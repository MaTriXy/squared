!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).squared={})}(this,function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){this.wrapped=e}function r(e){var t,r;function a(t,r){try{var o=e[t](r),l=o.value,u=l instanceof n;Promise.resolve(u?l.wrapped:l).then(function(e){u?a("next",e):i(o.done?"return":"normal",e)},function(e){a("throw",e)})}catch(e){i("throw",e)}}function i(e,n){switch(e){case"return":t.resolve({value:n,done:!0});break;case"throw":t.reject(n);break;default:t.resolve({value:n,done:!1})}(t=t.next)?a(t.key,t.arg):r=null}this._invoke=function(e,n){return new Promise(function(i,o){var l={key:e,arg:n,resolve:i,reject:o,next:null};r?r=r.next=l:(t=r=l,a(e,n))})},"function"!=typeof e.return&&(this.return=void 0)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}"function"==typeof Symbol&&Symbol.asyncIterator&&(r.prototype[Symbol.asyncIterator]=function(){return this}),r.prototype.next=function(e){return this._invoke("next",e)},r.prototype.throw=function(e){return this._invoke("throw",e)},r.prototype.return=function(e){return this._invoke("return",e)};function i(e,t){return l(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||c()}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(e){if(Array.isArray(e))return e}function u(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var s="ABCDEFGHIJKLMNOPQRSTUVWXYZ",f=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];function v(e,t,n,r){for(var a=n.split("."),i=e,o=t,l=Array.isArray(c=a),u=0,c=l?c:c[Symbol.iterator]();;){var s;if(l){if(u>=c.length)break;s=c[u++]}else{if((u=c.next()).done)break;s=u.value}if(void 0===i[s]||void 0===o[s])return(void 0!==i[s]||void 0!==o[s])&&(void 0!==i[s]?[1,0]:[0,1]);i=i[s],o=o[s]}if(r){var f=parseInt(i),v=parseInt(o);if(!isNaN(f)&&!isNaN(v))return[f,v];if(!isNaN(f))return[1,0];if(!isNaN(v))return[0,1]}return[i,o]}var h={CSS_URL:/url\("?(#?.*?)"?\)/,URI:/^[A-Za-z]+:\/\//,UNIT:/^(?:\s*(-?[\d.]+)(px|em|ch|pc|pt|vw|vh|vmin|vmax|mm|cm|in))+$/,ATTRIBUTE:/([^\s]+)="(.*?)"/};function d(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e?e.charAt(0)[t?"toUpperCase":"toLowerCase"]()+e.substring(1)[t?"toLowerCase":"toString"]():""}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=(e=e.replace(RegExp("^".concat(t,"+")),"")).match(RegExp("(".concat(t,"[a-z])"),"g"));return n&&n.forEach(function(t){return e=e.replace(t,t[1].toUpperCase())}),e}function p(e){return e&&parseInt(e)||0}function m(e,t,n){if(e){if(E(e))return"".concat(e,"px");if((e=e.trim()).endsWith("px")||e.endsWith("%")||"auto"===e)return e;var r=e.match(h.UNIT);if(r){var a=parseFloat(r[1]);switch(r[2]){case"em":case"ch":a*=n||16;break;case"pc":a*=12;case"pt":a*=4/3;break;case"vw":a*=window.innerWidth/100;break;case"vh":a*=window.innerHeight/100;break;case"vmin":a*=Math.min(window.innerWidth,window.innerHeight)/100;break;case"vmax":a*=Math.max(window.innerWidth,window.innerHeight)/100;break;case"mm":a/=10;case"cm":a/=2.54;case"in":a*=t||96}return"".concat(a,"px")}}return"0px"}function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e<1?"".concat(0===t?Math.round(100*e):parseFloat((100*e).toFixed(t)),"%"):"100%"}function y(e){return"".concat(isNaN(e=parseFloat(e))?0:Math.round(e),"px")}function A(e){return isNaN(e=parseFloat(e))?"0%":e<1?F(e):"".concat(Math.round(e),"%")}function b(e,t){return(e&t)===t}function E(e){return"number"==typeof e||/^-?\d+(\.\d+)?$/.test(e.trim())}function x(e){return"string"==typeof e&&""!==e}function C(e){return/^\d+(\.\d+)?%$/.test(e)}function B(e,n,r){var a,i=!1;if(e&&"object"===t(e)){a=e;var o=n.split("."),l=0;do{a=a[o[l]]}while(null!=a&&++l<o.length&&"string"!=typeof a&&"number"!=typeof a&&"boolean"!=typeof a);i=null!=a&&l===o.length}switch(r){case"object":return i?a:null;case"number":return i&&!isNaN(parseInt(a))?parseInt(a):0;case"boolean":return i&&!0===a;default:return i?""+a:""}}function D(e){if(!h.URI.test(e)){var t=location.pathname.split("/");if(t.pop(),"/"===e.charAt(0))e=location.origin+e;else if(e.startsWith("../")){var n,r=[],a=0;e.split("/").forEach(function(e){".."===e?a++:r.push(e)}),(n=t=t.slice(0,Math.max(t.length-a,0))).push.apply(n,r),e=location.origin+t.join("/")}else e="".concat(location.origin+t.join("/"),"/").concat(e)}return e}function k(e,t){return e?e.replace(RegExp("^".concat(t,"+"),"g"),""):""}function w(e,t){return e?e.replace(RegExp("".concat(t,"+$"),"g"),""):""}function S(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\t").repeat(e)}function I(e){return null!=e&&""!==(""+e).trim()}function M(e,t){return e===t||Math.floor(e)===Math.floor(t)||Math.ceil(e)===Math.ceil(t)||Math.ceil(e)===Math.floor(t)||Math.floor(e)===Math.ceil(t)}function R(e){return e.length?Math.min.apply(null,e):Number.MAX_VALUE}function N(e){return e.length?Math.max.apply(null,e):-1*Number.MAX_VALUE}function O(e,t){for(var n=[],r=[],a=0;a<e.length;a++){var i=e[a];t(i,a)?n.push(i):r.push(i)}return[n,r]}function T(e,t){return e.map(function(e,n){return t(e,n)}).filter(function(e){return I(e)})}var L=Object.freeze({REGEXP_PATTERN:h,capitalize:d,convertUnderscore:function(e){var t=(e=e.charAt(0).toLowerCase()+e.substring(1)).match(/([a-z][A-Z])/g);return t&&t.forEach(function(t){return e=e.replace(t,"".concat(t[0],"_").concat(t[1].toLowerCase()))}),e},convertCamelCase:g,convertWord:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?(e=e.replace(/[^\w]/g,"_").trim(),t&&(e=e.replace(/-/g,"_")),e):""},convertInt:p,convertFloat:function(e){return e&&parseFloat(e)||0},convertPX:m,convertPercent:F,convertAlpha:function e(t){for(var n="";t>=s.length;){var r=Math.floor(t/s.length);r>1&&r<=s.length?(n+=s.charAt(r-1),t-=r*s.length):r>s.length&&(n+=e(r*s.length),t-=r*s.length);var a=t%s.length;n+=s.charAt(a),t-=a+s.length}return n=s.charAt(t)+n},convertRoman:function(e){for(var t=(""+e).split(""),n="",r=3;r--;)n=(f[parseInt(t.pop()||"")+10*r]||"")+n;return"M".repeat(parseInt(t.join("")))+n},convertEnum:function(e,t,n){for(var r=Object.keys(t),a=0;a<r.length;a++){var i=r[a];if(e===t[i])return n[i]}return""},formatPX:y,formatPercent:A,formatString:function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t++)e=e.replace("{".concat(t,"}"),t+1<1||arguments.length<=t+1?void 0:arguments[t+1]);return e},hasBit:b,isNumber:E,isString:x,isArray:function(e){return Array.isArray(e)&&e.length>0},isUnit:function(e){return h.UNIT.test(e)},isPercent:C,includes:function(e,t){return!!e&&e.split(arguments.length>2&&void 0!==arguments[2]?arguments[2]:",").map(function(e){return e.trim()}).includes(t)},cloneObject:function e(n){var r={};for(var a in n)n.hasOwnProperty(a)&&(r[a]=n&&"object"===t(n[a])?e(n[a]):n[a]);return r},optional:B,optionalAsObject:function(e,t){return B(e,t,"object")},optionalAsString:function(e,t){return B(e,t,"string")},optionalAsNumber:function(e,t){return B(e,t,"number")},optionalAsBoolean:function(e,t){return B(e,t,"boolean")},resolvePath:D,trimNull:function(e){return e?e.trim():""},trimString:function(e,t){return e?k(w(e,t),t):""},trimStart:k,trimEnd:w,repeat:S,indexOf:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0;a<n.length;a++){var i=e.indexOf(n[a]);if(-1!==i)return i}return-1},lastIndexOf:function(e){return e.substring(e.lastIndexOf(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/")+1)},searchObject:function(e,n){var r,a=[];if("object"===t(n))for(var i in n){var o=n[i];I(e[o])&&a.push([o,e[o]])}else for(var l in r=/^\*.+\*$/.test(n)?function(e){return-1!==e.indexOf(n.replace(/\*/g,""))}:/^\*/.test(n)?function(e){return e.endsWith(n.replace(/\*/,""))}:/\*$/.test(n)?function(e){return e.startsWith(n.replace(/\*/,""))}:function(e){return e===n},e)r(l)&&a.push([l,e[l]]);return a},hasValue:I,withinRange:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t>=e-n&&t<=e+n},withinFraction:M,assignWhenNull:function(e,t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])},defaultWhenNull:function(e){for(var n=e,r=0;r<(arguments.length<=1?0:arguments.length-1)-1;r++){var a=r+1<1||arguments.length<=r+1?void 0:arguments[r+1];if(r===(arguments.length<=1?0:arguments.length-1)-2)I(n[a])||(n[a]=r+1+1<1||arguments.length<=r+1+1?void 0:arguments[r+1+1]);else{if(!x(a))break;if("object"===t(n[a]))n=n[a];else{if(void 0!==n[a])break;n[a]={},n=n[a]}}}},minArray:R,maxArray:N,partitionArray:O,retainArray:function(e,t){var n=e.filter(t);e.length=0,e.push.apply(e,o(n))},spliceArray:function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return e.splice(n,1),!0;return!1},sortArray:function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return e.sort(function(e,n){for(var a=0;a<r.length;a++){var i=v(e,n,r[a],!0);if(i&&i[0]!==i[1])return t?i[0]>i[1]?1:-1:i[0]<i[1]?1:-1}return 0})},flatArray:function(e){for(var t=e;t.some(function(e){return Array.isArray(e)});)t=[].concat.apply([],t.filter(function(e){return e}));return t},flatMap:T}),_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._children=[],Array.isArray(t)&&this.retain(t)}var t,n,r;return t=e,(n=[{key:Symbol.iterator,value:function(){var e=this._children,t=0;return{next:function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0,value:void 0}}}}},{key:"item",value:function(e,t){return void 0===e||void 0===t?void 0===e?this._children[this._children.length-1]:this._children[e]:e>=0&&e<this._children.length?(this._children[e]=t,t):void 0}},{key:"append",value:function(e){return this._children.push(e),this}},{key:"remove",value:function(e){for(var t=0;t<this._children.length;t++)if(e===this._children[t])return this._children.splice(t,1);return[]}},{key:"contains",value:function(e){return this._children.includes(e)}},{key:"retain",value:function(e){return this._children=e,this}},{key:"duplicate",value:function(){return this._children.slice(0)}},{key:"clear",value:function(){return this._children.length=0,this}},{key:"each",value:function(e){return this._children.forEach(e),this}},{key:"find",value:function(e,t){return this._children.find("string"==typeof e?function(n){return n[e]===t}:e)}},{key:"filter",value:function(e){return this._children.filter(e)}},{key:"map",value:function(e){return this._children.map(e)}},{key:"flatMap",value:function(e){return this._children.map(e).filter(function(e){return e})}},{key:"partition",value:function(e){return O(this._children,e)}},{key:"sort",value:function(e){return this._children.sort(e),this}},{key:"every",value:function(e){return this.length>0&&this._children.every(e)}},{key:"some",value:function(e){return this._children.some(e)}},{key:"cascade",value:function(){function t(n){for(var r=[],a=Array.isArray(l=n.children),i=0,l=a?l:l[Symbol.iterator]();;){var u;if(a){if(i>=l.length)break;u=l[i++]}else{if((i=l.next()).done)break;u=i.value}var c=u;r.push(c),c instanceof e&&c.length&&r.push.apply(r,o(t(c)))}return r}return t(this)}},{key:"children",get:function(){return this._children}},{key:"length",get:function(){return this._children.length}}])&&a(t.prototype,n),r&&a(t,r),e}(),G="0123456789ABCDEF",P={Pink:{value:"#FFC0CB"},LightPink:{value:"#FFB6C1"},HotPink:{value:"#FF69B4"},DeepPink:{value:"#FF1493"},PaleVioletRed:{value:"#DB7093"},MediumVioletRed:{value:"#C71585"},LightSalmon:{value:"#FFA07A"},Salmon:{value:"#FA8072"},DarkSalmon:{value:"#E9967A"},LightCoral:{value:"#F08080"},IndianRed:{value:"#CD5C5C"},Crimson:{value:"#DC143C"},Firebrick:{value:"#B22222"},DarkRed:{value:"#8B0000"},Red:{value:"#FF0000"},OrangeRed:{value:"#FF4500"},Tomato:{value:"#FF6347"},Coral:{value:"#FF7F50"},Orange:{value:"#FFA500"},DarkOrange:{value:"#FF8C00"},Yellow:{value:"#FFFF00"},LightYellow:{value:"#FFFFE0"},LemonChiffon:{value:"#FFFACD"},LightGoldenrodYellow:{value:"#FAFAD2"},PapayaWhip:{value:"#FFEFD5"},Moccasin:{value:"#FFE4B5"},PeachPuff:{value:"#FFDAB9"},PaleGoldenrod:{value:"#EEE8AA"},Khaki:{value:"#F0E68C"},DarkKhaki:{value:"#BDB76B"},Gold:{value:"#FFD700"},Cornsilk:{value:"#FFF8DC"},BlanchedAlmond:{value:"#FFEBCD"},Bisque:{value:"#FFE4C4"},NavajoWhite:{value:"#FFDEAD"},Wheat:{value:"#F5DEB3"},Burlywood:{value:"#DEB887"},Tan:{value:"#D2B48C"},RosyBrown:{value:"#BC8F8F"},SandyBrown:{value:"#F4A460"},Goldenrod:{value:"#DAA520"},DarkGoldenrod:{value:"#B8860B"},Peru:{value:"#CD853F"},Chocolate:{value:"#D2691E"},SaddleBrown:{value:"#8B4513"},Sienna:{value:"#A0522D"},Brown:{value:"#A52A2A"},Maroon:{value:"#800000"},DarkOliveGreen:{value:"#556B2F"},Olive:{value:"#808000"},OliveDrab:{value:"#6B8E23"},YellowGreen:{value:"#9ACD32"},LimeGreen:{value:"#32CD32"},Lime:{value:"#00FF00"},LawnGreen:{value:"#7CFC00"},Chartreuse:{value:"#7FFF00"},GreenYellow:{value:"#ADFF2F"},SpringGreen:{value:"#00FF7F"},MediumSpringGreen:{value:"#00FA9A"},LightGreen:{value:"#90EE90"},PaleGreen:{value:"#98FB98"},DarkSeaGreen:{value:"#8FBC8F"},MediumAquamarine:{value:"#66CDAA"},MediumSeaGreen:{value:"#3CB371"},SeaGreen:{value:"#2E8B57"},ForestGreen:{value:"#228B22"},Green:{value:"#008000"},DarkGreen:{value:"#006400"},Aqua:{value:"#00FFFF"},Cyan:{value:"#00FFFF"},LightCyan:{value:"#E0FFFF"},PaleTurquoise:{value:"#AFEEEE"},Aquamarine:{value:"#7FFFD4"},Turquoise:{value:"#40E0D0"},DarkTurquoise:{value:"#00CED1"},MediumTurquoise:{value:"#48D1CC"},LightSeaGreen:{value:"#20B2AA"},CadetBlue:{value:"#5F9EA0"},DarkCyan:{value:"#008B8B"},Teal:{value:"#008080"},LightSteelBlue:{value:"#B0C4DE"},PowderBlue:{value:"#B0E0E6"},LightBlue:{value:"#ADD8E6"},SkyBlue:{value:"#87CEEB"},LightSkyBlue:{value:"#87CEFA"},DeepSkyBlue:{value:"#00BFFF"},DodgerBlue:{value:"#1E90FF"},Cornflower:{value:"#6495ED"},SteelBlue:{value:"#4682B4"},RoyalBlue:{value:"#4169E1"},Blue:{value:"#0000FF"},MediumBlue:{value:"#0000CD"},DarkBlue:{value:"#00008B"},Navy:{value:"#000080"},MidnightBlue:{value:"#191970"},Lavender:{value:"#E6E6FA"},Thistle:{value:"#D8BFD8"},Plum:{value:"#DDA0DD"},Violet:{value:"#EE82EE"},Orchid:{value:"#DA70D6"},Fuchsia:{value:"#FF00FF"},Magenta:{value:"#FF00FF"},MediumOrchid:{value:"#BA55D3"},MediumPurple:{value:"#9370DB"},BlueViolet:{value:"#8A2BE2"},DarkViolet:{value:"#9400D3"},DarkOrchid:{value:"#9932CC"},DarkMagenta:{value:"#8B008B"},Purple:{value:"#800080"},RebeccaPurple:{value:"#663399"},Indigo:{value:"#4B0082"},DarkSlateBlue:{value:"#483D8B"},SlateBlue:{value:"#6A5ACD"},MediumSlateBlue:{value:"#7B68EE"},White:{value:"#FFFFFF"},Snow:{value:"#FFFAFA"},Honeydew:{value:"#F0FFF0"},MintCream:{value:"#F5FFFA"},Azure:{value:"#F0FFFF"},AliceBlue:{value:"#F0F8FF"},GhostWhite:{value:"#F8F8FF"},WhiteSmoke:{value:"#F5F5F5"},Seashell:{value:"#FFF5EE"},Beige:{value:"#F5F5DC"},OldLace:{value:"#FDF5E6"},FloralWhite:{value:"#FFFAF0"},Ivory:{value:"#FFFFF0"},AntiqueWhite:{value:"#FAEBD7"},Linen:{value:"#FAF0E6"},LavenderBlush:{value:"#FFF0F5"},MistyRose:{value:"#FFE4E1"},Gainsboro:{value:"#DCDCDC"},LightGray:{value:"#D3D3D3"},Silver:{value:"#C0C0C0"},DarkGray:{value:"#A9A9A9"},Gray:{value:"#808080"},DimGray:{value:"#696969"},LightSlateGray:{value:"#778899"},SlateGray:{value:"#708090"},DarkSlateGray:{value:"#2F4F4F"},LightGrey:{value:"#D3D3D3"},DarkGrey:{value:"#A9A9A9"},Grey:{value:"#808080"},DimGrey:{value:"#696969"},LightSlateGrey:{value:"#778899"},SlateGrey:{value:"#708090"},DarkSlateGrey:{value:"#2F4F4F"},Black:{value:"#000000"}},j=/[A-Za-z\d]{3,}/,U=/rgba?\((\d+), (\d+), (\d+)(?:, ([\d.]+))?\)/,X=[];for(var z in P){var W=P[z];W.name=z;var V=Q(W.value);V&&(W.rgba=V,W.hsl=q(W.rgba),X.push(W))}function q(e){var t=e.r,n=void 0===t?0:t,r=e.g,a=void 0===r?0:r,i=e.b,o=void 0===i?0:i,l=Math.min(n/=255,a/=255,o/=255),u=Math.max(n,a,o),c=(u+l)/2,s=c,f=c;if(u===l)c=0,s=0;else{var v=u-l;switch(s=f>.5?v/(2-u-l):v/(u+l),u){case n:c=(a-o)/v+(a<o?6:0);break;case a:c=(o-n)/v+2;break;case o:c=(n-a)/v+4}c/=6}return{h:360*c,s:100*s,l:100*f}}function H(e,t){if(e.hsl&&t.hsl){var n=e.hsl.h,r=t.hsl.h;return n===r&&(n=e.hsl.s)===(r=t.hsl.s)&&(n=e.hsl.l,r=t.hsl.l),n>=r?1:-1}return 0}function Y(e){return"rgb".concat(e.a<255?"a":"","(").concat(e.r,", ").concat(e.g,", ").concat(e.b).concat(e.a<255?", ".concat((e.a/255).toFixed(2)):"",")")}function $(e){return parseFloat(e)<1?Z("255",parseFloat(e)):"FF"}function K(e){for(var t in P)if(t.toLowerCase()===e.trim().toLowerCase())return P[t]}function Z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=("string"==typeof e?parseInt(e):e)*t;return isNaN(n)?"00":G.charAt(((n=Math.max(0,Math.min(n,255)))-n%16)/16)+G.charAt(n%16)}function Q(e){if(e=e.replace(/#/g,"").trim(),j.test(e)){var t=255;switch(e.length){case 4:t=parseInt(e.charAt(3).repeat(2),16);case 3:e=e.charAt(0).repeat(2)+e.charAt(1).repeat(2)+e.charAt(2).repeat(2);break;case 5:e+=e.charAt(4);break;default:e.length>=8&&(t=parseInt(e.substring(6,8),16)),e=e.substring(0,6)}if(6===e.length)return{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4),16),a:t}}}function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1";if(e&&"initial"!==e&&"transparent"!==e){if(""===t.trim()&&(t="1"),"#"===e.charAt(0)){var n=Q(e);n&&(e=Y(n))}else if(!e.startsWith("rgb")){var r=K(e);r&&r.rgba&&(r.rgba.a=parseFloat($(t)),e=Y(r.rgba))}var a=e.match(U);if(a&&a.length>=4&&(void 0===a[4]||parseFloat(a[4])>0)){void 0===a[4]&&(a[4]=parseFloat(t).toFixed(2));var i=Z(a[1])+Z(a[2])+Z(a[3]),o=$(a[4]),l="#".concat(i+o),u=parseFloat(a[4]);return{valueRGB:"#".concat(i),valueRGBA:l,valueARGB:"#".concat(o+i),alpha:u,rgba:Q(l),opaque:u<1,visible:u>0}}}}X.sort(H);var ee=Object.freeze({getColorByName:K,getColorByShade:function(e){var t=X.slice(0),n=t.findIndex(function(t){return t.value===e});if(-1!==n)return t[n];var r=Q(e);if(r){var a=q(r);if(a)return t.push({name:"",value:"",hsl:a,rgba:{r:-1,g:-1,b:-1,a:1}}),t.sort(H),n=t.findIndex(function(e){return""===e.name}),t[Math.min(n+1,t.length-1)]}},convertHex:Z,convertRGBA:Q,parseRGBA:J,reduceRGBA:function(e,t){var n=Q(e);if(n){var r=t<0?0:255;return n.r=Math.round((r-n.r)*(t=Math.abs(t)))+n.r,n.g=Math.round((r-n.g)*t)+n.g,n.b=Math.round((r-n.b)*t)+n.b,J(Y(n))}}});function te(){return{top:0,left:0,right:0,bottom:0}}function ne(){return Object.assign({width:0,height:0},{top:0,left:0,right:0,bottom:0})}function re(e,t,n,r){return arguments.length>4&&void 0!==arguments[4]&&arguments[4]?C(e)?p(e)/100:parseFloat(m(e,n,r))/t:C(e)?Math.round(t*(p(e)/100)):parseInt(m(e,n,r))}function ae(e){return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}}function ie(e){if(e){if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]){var t=ve(e,"style");if(t)return t;var n=he(e);if(n&&n.plainText)return n.unsafe("styleMap")}if(ce(e)){var r=getComputedStyle(e);return fe(e,"style",r),r}}return{display:"none"}}function oe(e,t){if(e){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if("#"!==e.nodeName.charAt(0)&&r.includes(ie(e)[t]))return!0;if(e.parentElement)return r.includes(ie(e.parentElement)[t])}return!1}function le(e,n){var r="";if("object"===t(e.style)&&(r=e.style[n]),!r){var a=ve(e,"styleMap");a&&(r=a[n])}return r||""}function ue(e){if(e&&"#text"===e.nodeName&&e.textContent){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){for(var t=e.textContent,n=!1,r=0;r<t.length;r++)switch(t.charCodeAt(r)){case 9:case 10:case 13:case 32:continue;default:n=!0}return n&&""!==t}return""!==e.textContent.trim()}return!1}function ce(e){return!!e&&"object"===t(e.style)}function se(e){return!(e.left<0&&e.top<0&&Math.abs(e.left)>=e.width&&Math.abs(e.top)>=e.height)}function fe(e,t,n){e["__".concat(t)]=n}function ve(e,t){return e["__".concat(t)]||void 0}function he(e){return x(e.className)&&e.className.startsWith("squared")?void 0:ve(e,"node")}var de=Object.freeze({ELEMENT_BLOCK:["ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","CANVAS","DD","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","LI","MAIN","NAV","OL","OUTPUT","P","PRE","SECTION","TFOOT","TH","THEAD","TR","UL","VIDEO"],ELEMENT_INLINE:["A","ABBR","ACRONYM","B","BDO","BIG","BR","BUTTON","CITE","CODE","DFN","EM","I","IFRAME","IMG","INPUT","KBD","LABEL","MAP","OBJECT","Q","S","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRIKE","STRONG","SUB","SUP","TEXTAREA","TIME","TT","U","VAR","PLAINTEXT"],isUserAgent:function(e){if("string"==typeof e){var t=e.toUpperCase();e=0,-1!==t.indexOf("CHROME")&&(e|=2),-1!==t.indexOf("SAFARI")&&(e|=4),-1!==t.indexOf("FIREFOX")&&(e|=16),-1!==t.indexOf("EDGE")&&(e|=8)}return b(e,-1!==navigator.userAgent.indexOf("Edge")?8:-1!==navigator.userAgent.indexOf("Firefox")?16:-1===navigator.userAgent.indexOf("Chrome")&&-1!==navigator.userAgent.indexOf("Safari")?4:2)},getKeyframeRules:function(){for(var e=new Map,t=0;t<document.styleSheets.length;t++){var n=document.styleSheets[t];if(n.cssRules)for(var r=0;r<n.cssRules.length;r++){var a=n.cssRules[r];try{a instanceof CSSKeyframesRule&&function(){var t={};Array.from(a.cssRules).forEach(function(e){var n=/((?:\d+%\s*,?\s*)+|from|to)\s*{\s*(.*?)\s*}/.exec(e.cssText);if(n)for(var r=(e.keyText||n[1].trim()).split(",").map(function(e){return e.trim()}),a=T(n[2].split(";"),function(e){return e.trim()}),o=Array.isArray(u=r),l=0,u=o?u:u[Symbol.iterator]();;){var c;if(o){if(l>=u.length)break;c=u[l++]}else{if((l=u.next()).done)break;c=l.value}var s=c;switch(s){case"from":s="0%";break;case"to":s="100%"}t[s]={};for(var f=Array.isArray(h=a),v=0,h=f?h:h[Symbol.iterator]();;){var d;if(f){if(v>=h.length)break;d=h[v++]}else{if((v=h.next()).done)break;d=v.value}var g=i(d.split(":").map(function(e){return e.trim()}),2),p=g[0],m=g[1];""!==p&&""!==m&&(t[s][p]=m)}}}),e.set(a.name,t)}()}catch(e){}}}return e},getDataSet:function(e,t){var n={};if(ce(e))for(var r in t=g(t,"\\."),e.dataset)r.length>t.length&&r.startsWith(t)&&(n[d(r.substring(t.length),!1)]=e.dataset[r]);return n},newBoxRect:te,newRectDimensions:ne,newBoxModel:function(){return{marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}},createElement:function(e){var t=document.createElement(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"div":"span"),n=t.style;return n.position="static",n.margin="0px",n.padding="0px",n.border="none",n.cssFloat="none",n.clear="none",n.display="none",t.className="__css.placeholder",e&&e.appendChild(t),t},removeElementsByClassName:function(e){Array.from(document.getElementsByClassName(e)).forEach(function(e){return e.parentElement&&e.parentElement.removeChild(e)})},convertClientUnit:re,getRangeClientRect:function(e){var t=document.createRange();t.selectNodeContents(e);var n=Array.from(t.getClientRects()).filter(function(e){return!(0===Math.round(e.width)&&M(e.left,e.right))}),r=ne(),a=0;if(n.length){r=ae(n[0]);for(var i=new Set([r.top]),o=new Set([r.bottom]),l=1;l<n.length;l++){var u=n[l];i.add(u.top),o.add(u.bottom),r.width+=u.width,r.right=Math.max(u.right,r.right),r.height=Math.max(u.height,r.height)}i.size>1&&o.size>1&&(r.top=R(Array.from(i)),r.bottom=N(Array.from(o)),n[n.length-1].top>=n[0].bottom&&e.textContent&&(""!==e.textContent.trim()||/^\s*\n/.test(e.textContent))&&(a=n.length-1))}return Object.assign({},r,{multiline:a})},assignBounds:ae,getStyle:ie,cssResolveUrl:function(e){var t=e.match(h.CSS_URL);return t?D(t[1]):""},cssInherit:function(e,t,n,r){var a="";if(e)for(var i=e.parentElement;i&&(void 0===r||!r.includes(i.tagName))&&(("inherit"===(a=ie(i)[t]||"")||n&&n.some(function(e){return-1!==a.indexOf(e)}))&&(a=""),i!==document.body&&!a);)i=i.parentElement;return a},cssParent:oe,cssFromParent:function(e,t){if(ce(e)&&e.parentElement){var n=he(e),r=ie(e);if(n&&r)return r[t]===ie(e.parentElement)[t]&&!n.cssInitial(t)}return!1},cssAttribute:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=g(t),a=he(e),i=a&&a.cssInitial(r)||le(e,r);if(!i){var o=e.attributes.getNamedItem(t);o&&(i=o.value.trim())}return i||n&&ie(e)[r]||""},cssInline:le,getBackgroundPosition:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o={top:0,left:0,right:0,bottom:0,horizontal:"left",vertical:"top",originalX:"",originalY:""},l="center"===e?["center","center"]:e.split(" ");return 4===l.length?l.forEach(function(e,l){switch(l){case 0:o.horizontal=e;break;case 2:o.vertical=e;break;case 1:case 3:var u=re(e,1===l?t.width:t.height,n,r,i);1===l?a?"right"===o.horizontal?(o.originalX=C(e)?A(100-parseInt(e)):y(t.width-parseInt(m(e,n,r))),o.right=u,o.left=i?1-u:t.width-u):(o.left=u,o.originalX=e):"center"!==o.horizontal&&(o[o.horizontal]=u):a?"bottom"===o.vertical?(o.originalY=C(e)?A(100-parseInt(e)):y(t.height-parseInt(m(e,n,r))),o.bottom=u,o.top=i?1-u:t.height-u):(o.top=u,o.originalY=e):"center"!==o.vertical&&(o[o.vertical]=u)}}):2===l.length&&l.forEach(function(e,l){var u=0===l?t.width:t.height,c=0===l?"left":"top",s=0===l?"originalX":"originalY",f=re(e,u,n,r,i);if(C(e))o[c]=f,o[s]=e;else if(/^[a-z]+$/.test(e)){if(o[0===l?"horizontal":"vertical"]=e,a)switch(e){case"left":case"top":o[s]="0%";break;case"right":case"bottom":o[c]=i?1:u,o[s]="100%";break;case"center":o[c]=i?.5:Math.round(u/2),o[s]="50%"}}else o[c]=f,o[s]=e}),o},getFirstChildElement:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)for(var n=0;n<e.childNodes.length;n++){var r=he(e.childNodes[n]);if(r&&(!r.excluded||t&&r.lineBreak))return r.element}return null},getLastChildElement:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)for(var n=e.childNodes.length-1;n>=0;n--){var r=he(e.childNodes[n]);if(r&&r.naturalElement&&(!r.excluded||t&&r.lineBreak))return r.element}return null},hasFreeFormText:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];function n(e){return e.some(function(e){if("#text"===e.nodeName){if(ue(e,t)||oe(e,"whiteSpace","pre","pre-wrap")&&e.textContent&&""!==e.textContent)return!0}else if(n(Array.from(e.childNodes)))return!0;return!1})}return n("#text"===e.nodeName?[e]:Array.from(e.childNodes))},isPlainText:ue,hasLineBreak:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){var n=e.textContent||"";if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(n=n.trim()),e.children&&Array.from(e.children).some(function(e){return"BR"===e.tagName}))return!0;if(!t&&/\n/.test(n)){var r=he(e),a=r?r.css("whiteSpace"):ie(e).whiteSpace||"";return["pre","pre-wrap"].includes(a)||"#text"===e.nodeName&&oe(e,"whiteSpace","pre","pre-wrap")}}return!1},isLineBreak:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=he(e);return!!n&&("BR"===n.tagName||t&&n.excluded&&n.blockStatic)},getElementsBetween:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e||e.parentElement===t.parentElement){var a=t.parentElement;if(a){var i=Array.from(a.childNodes),o=e?i.findIndex(function(t){return t===e}):0,l=i.findIndex(function(e){return e===t});if(-1!==o&&-1!==l&&o!==l){var u=i.slice(Math.min(o,l)+1,Math.max(o,l));return u=u.filter(n?function(e){return"#comment"!==e.nodeName}:function(e){return"#"!==e.nodeName.charAt(0)||ue(e)}),r&&(u=u.filter(function(e){return he(e)})),u}}}return[]},getPreviousElementSibling:function(e){if(e)for(e=e.previousSibling;e;){var t=he(e);if(t&&(!t.excluded||t.lineBreak))return t.element;e=e.previousSibling}return null},getNextElementSibling:function(e){if(e)for(e=e.nextSibling;e;){var t=he(e);if(t&&(!t.excluded||t.lineBreak))return t.element;e=e.nextSibling}return null},hasComputedStyle:ce,hasVisibleRect:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getBoundingClientRect();return 0!==n.width&&0!==n.height&&(!t||se(n))},withinViewportOrigin:se,setElementCache:fe,getElementCache:ve,deleteElementCache:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0;a<n.length;a++)delete e["__".concat(n[a])]},getElementAsNode:he,getElementAsNodeAttribute:function(e,t){var n=he(e);return n&&void 0!==n[t]?n[t]:void 0}});function ge(e){return"{".concat((arguments.length>1&&void 0!==arguments[1]?arguments[1]:":")+""+e,"}")}function pe(e){for(var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\t",a=[],i=/\s*(<(\/)?([?\w]+)[^>]*>)\n?([^<]*)/g;null!==(t=i.exec(e));)a.push({tag:t[1],closing:!!t[2],tagName:t[3],value:""===t[4].trim()?"":t[4]});for(var o=/\/>\n*$/,l="",u=-1,c=function(e){var t=a[e],i=u;if(e>0){if(t.closing)u--;else if(i++,!o.exec(t.tag))if(n&&""===t.value.trim()){var c=a[e+1];c&&c.closing&&c.tagName===t.tagName?(t.tag=t.tag.replace(/\s*>$/," />"),e++):u++}else u++;t.tag.trim().split("\n").forEach(function(e,t){var n=i+(t>0?1:0);l+=(n>0?S(n,r):"")+e.trim()+"\n"})}else l+=t.tag+"\n";l+=t.value,s=e},s=0;s<a.length;s++)c(s);return l.trim()}var me,Fe,ye=Object.freeze({formatPlaceholder:ge,replacePlaceholder:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a="number"==typeof t?ge(t):t;return e.replace(a,(r?a:"")+n+(r?"":a))},replaceIndent:function(e,t,n){if(t>=0){var r=-1;return e.split("\n").map(function(e){var a=n.exec(e);return a?(-1===r&&(r=a[2].length),a[1]+S(t+(a[2].length-r))+a[3]):e}).join("\n")}return e},replaceTab:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return t>0&&(e=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e.split("\n").map(function(e){var n=e.match(/^(\t+)(.*)$/);return n?" ".repeat(t*n[1].length)+n[2]:e}).join("\n"):e.replace(/\t/g," ".repeat(t))),e},replaceEntity:function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t))}).replace(/\u00A0/g,"&#160;").replace(/\u2002/g,"&#8194;").replace(/\u2003/g,"&#8195;").replace(/\u2009/g,"&#8201;").replace(/\u200C/g,"&#8204;").replace(/\u200D/g,"&#8205;").replace(/\u200E/g,"&#8206;").replace(/\u200F/g,"&#8207;")},replaceCharacter:function(e){return e.replace(/&nbsp;/g,"&#160;").replace(/&(?!#?[A-Za-z0-9]{2,};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;")},parseTemplate:function(e){var t={__ROOT__:e};return function e(n){for(var r,a=/(\t*<<(\w+)>>)\n[\w\W]*\n*\1/g;null!==(r=a.exec(n));){var i=r[0].replace(RegExp("^".concat(r[1],"\\n")),"").replace(RegExp("".concat(r[1],"$")),"");for(var o in t)t[o]=t[o].replace(r[0],"{%".concat(r[2],"}"));t[r[2]]=i,e(i)}}(e),t},createTemplate:function e(n,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0;function o(e,t){return"(\\t*##".concat(e,"-").concat(t,"##\\s*\\n)([\\w\\W]*?\\s*\\n)(\\t*##").concat(e,"-").concat(t,"##\\s*\\n)")}var l=void 0===i?n.__ROOT__:n[i];for(var u in r){var c=r[u],s="",f="";if(null!=c){if(Array.isArray(c))if(f="%",Array.isArray(c[0])){var v=RegExp(o(u,"start")+"([\\w\\W]*?)"+o(u,"end")).exec(l);if(v){for(var h="",d="",g=c[0].length,p=Object.assign({},n),m=0;m<g;m++){var F="".concat(i,"_").concat(u,"_").concat(m);p[F]=v[2],h+=e(p,c[0][m],a,F),d=v[6]+d}l=l.replace(v[2],h).replace(v[6],d).replace(v[1],"").replace(v[3],"").replace(RegExp("\\t*".concat(v[5])),"").replace(RegExp("\\t*".concat(v[7])),"")}else s=!1}else if(0===c.length||"object"!==t(c[0]))s=!1;else{for(var y=0;y<c.length;y++)s+=e(n,c[y],a,""+u);s=""!==s&&w(s,"\n")}else f="[&~]",s="boolean"==typeof c?"":""+c;if(s)""!==s&&(l=l.replace(RegExp("{".concat(f+u,"}")),s));else{if(RegExp("{&".concat(u,"}")).test(l))return"";"%"===f&&(l=l.replace(RegExp("[ \\t]*{%".concat(u,"}\\n*")),""))}}}return void 0===i&&(l=l.replace(/\n+\t*{%\w+}\n+/g,"\n").trim(),a&&(l=pe(l))),l.replace(/\s*((\w+:)?\w+="[^"]*)?{~\w+}"?/g,"")},formatTemplate:pe});e.settings={},e.system={};var Ae=new Set,be=new Map;function Ee(e){if(me){if(e instanceof squared.base.Extension)return me.extensionManager.include(e);if("string"==typeof e){e=e.trim();var t=me.builtInExtensions[e]||Ce(e);if(t)return me.extensionManager.include(t)}}return!1}function xe(n,r){if("object"===t(r)){if(n instanceof squared.base.Extension)return Object.assign(n.options,r),!0;if("string"==typeof n&&me){n=n.trim();var a=me.extensionManager.retrieve(n)||Array.from(Ae).find(function(e){return e.name===n});if(a)return Object.assign(a.options,r),!0;if(be.set(n,r),e.settings.handleExtensionsAsync)return!0}}return!1}function Ce(e){return me&&me.extensionManager.retrieve(e)}function Be(){me&&me.reset()}var De={base:{Container:_},color:ee,dom:de,util:L,xml:ye};e.setFramework=function(t){if(Fe!==t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?t.cached():t.create();if(void 0===Fe&&Object.assign(n.userSettings,e.settings),e.settings=n.userSettings,(me=n.application).userSettings=e.settings,Array.isArray(e.settings.builtInExtensions)){for(var r=new Set,a=Array.isArray(o=e.settings.builtInExtensions),i=0,o=a?o:o[Symbol.iterator]();;){var l;if(a){if(i>=o.length)break;l=o[i++]}else{if((i=o.next()).done)break;l=i.value}var u=l;if(u=u.trim(),me.builtInExtensions[u])r.add(me.builtInExtensions[u]);else for(var c in me.builtInExtensions)c.startsWith("".concat(u,"."))&&r.add(me.builtInExtensions[c])}for(var s=Array.isArray(v=r),f=0,v=s?v:v[Symbol.iterator]();;){var h;if(s){if(f>=v.length)break;h=v[f++]}else{if((f=v.next()).done)break;h=f.value}me.extensionManager.include(h)}}Fe=t,e.system=t.system}Be()},e.parseDocument=function t(){for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];if(me&&!me.closed){var o;if(e.settings.handleExtensionsAsync){for(var l=Array.isArray(c=Ae),u=0,c=l?c:c[Symbol.iterator]();;){var s;if(l){if(u>=c.length)break;s=c[u++]}else{if((u=c.next()).done)break;s=u.value}me.extensionManager.include(s)}var f=be.entries(),v=Array.isArray(f),h=0;for(f=v?f:f[Symbol.iterator]();;){var d;if(v){if(h>=f.length)break;d=f[h++]}else{if((h=f.next()).done)break;d=h.value}var g=i(d,2);xe(g[0],g[1])}Ae.clear(),be.clear()}return(o=me).parseDocument.apply(o,r)}return{then:function(e){me?me.closed&&confirm("ERROR: Document is closed. Reset and rerun?")&&(me.reset(),t.call.apply(t,[null].concat(r)).then(e)):alert("ERROR: Framework not installed.")}}},e.include=Ee,e.includeAsync=function(t){return!!Ee(t)||!!(t instanceof squared.base.Extension&&(Ae.add(t),e.settings.handleExtensionsAsync))},e.exclude=function(e){if(me){if(e instanceof squared.base.Extension)return Ae.has(e)?(Ae.delete(e),me.extensionManager.exclude(e),!0):me.extensionManager.exclude(e);if("string"==typeof e){e=e.trim();var t=me.extensionManager.retrieve(e);if(t)return me.extensionManager.exclude(t)}}return!1},e.configure=xe,e.apply=function(e,n){return e instanceof squared.base.Extension?Ee(e):"string"==typeof e&&(e=e.trim(),"object"===t(n)?xe(e,n):Ce(e))},e.retrieve=Ce,e.ready=function(){return!!me&&!me.initialized&&!me.closed},e.close=function(){me&&!me.initialized&&me.size&&me.finalize()},e.reset=Be,e.saveAllToDisk=function(){me&&!me.initialized&&me.size&&(me.closed||me.finalize(),me.saveAllToDisk())},e.toString=function(){return me?""+me:""},e.lib=De,Object.defineProperty(e,"__esModule",{value:!0})});
