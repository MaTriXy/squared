var squared=function(n){"use strict";function e(n){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function t(n){this.wrapped=n}function r(n){var e,r;function i(e,r){try{var s=n[e](r),a=s.value,u=a instanceof t;Promise.resolve(u?a.wrapped:a).then(function(n){u?i("next",n):o(s.done?"return":"normal",n)},function(n){i("throw",n)})}catch(n){o("throw",n)}}function o(n,t){switch(n){case"return":e.resolve({value:t,done:!0});break;case"throw":e.reject(t);break;default:e.resolve({value:t,done:!1})}(e=e.next)?i(e.key,e.arg):r=null}this._invoke=function(n,t){return new Promise(function(o,s){var a={key:n,arg:t,resolve:o,reject:s,next:null};r?r=r.next=a:(e=r=a,i(n,t))})},"function"!=typeof n.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(r.prototype[Symbol.asyncIterator]=function(){return this}),r.prototype.next=function(n){return this._invoke("next",n)},r.prototype.throw=function(n){return this._invoke("throw",n)},r.prototype.return=function(n){return this._invoke("return",n)};function i(n,e){return s(n)||function(n,e){var t=[],r=!0,i=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(r=(s=a.next()).done)&&(t.push(s.value),!e||t.length!==e);r=!0);}catch(n){i=!0,o=n}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return t}(n,e)||u()}function o(n){return function(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}}(n)||a(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(n){if(Array.isArray(n))return n}function a(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}n.settings={},n.system={};var c,f,l=new Set,y=new Map;function d(n){if(c){if(n instanceof squared.base.Extension)return c.extensionManager.include(n);if("string"==typeof n){n=n.trim();var e=c.builtInExtensions[n]||p(n);if(e)return c.extensionManager.include(e)}}return!1}function v(t,r){if("object"===e(r)){if(t instanceof squared.base.Extension)return Object.assign(t.options,r),!0;if("string"==typeof t&&c){t=t.trim();var i=c.extensionManager.retrieve(t)||Array.from(l).find(function(n){return n.name===t});if(i)return Object.assign(i.options,r),!0;if(y.set(t,r),n.settings.handleExtensionsAsync)return!0}}return!1}function p(n){return c&&c.extensionManager.retrieve(n)}function b(){c&&c.reset()}return n.setFramework=function(e){if(f!==e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.cached():e.create();if(n.settings=t.userSettings,(c=t.application).userSettings=t.userSettings,Array.isArray(n.settings.builtInExtensions)){for(var r=new Set,i=Array.isArray(s=n.settings.builtInExtensions),o=0,s=i?s:s[Symbol.iterator]();;){var a;if(i){if(o>=s.length)break;a=s[o++]}else{if((o=s.next()).done)break;a=o.value}var u=a;if(u=u.trim(),c.builtInExtensions[u])r.add(c.builtInExtensions[u]);else for(var l in c.builtInExtensions)l.startsWith("".concat(u,"."))&&r.add(c.builtInExtensions[l])}r.forEach(function(n){return c.extensionManager.include(n)})}f=e,n.system=e.system}b()},n.parseDocument=function e(){for(var t=arguments,r=arguments.length,s=Array(r),a=0;a<r;a++)s[a]=arguments[a];if(c&&!c.closed){var u;if(n.settings.handleExtensionsAsync){l.forEach(function(n){return c.extensionManager.include(n)});var f=y.entries(),d=Array.isArray(f),p=0;for(f=d?f:f[Symbol.iterator]();;){var b;if(d){if(p>=f.length)break;b=f[p++]}else{if((p=f.next()).done)break;b=p.value}var x=i(b,2);v(x[0],x[1])}l.clear(),y.clear()}return(u=c).parseDocument.apply(u,s)}return{then:function(n){c?c.closed&&confirm("ERROR: Document is closed. Reset and rerun?")&&(c.reset(),e.call.apply(e,[null].concat(o(t))).then(n)):alert("ERROR: Framework not installed.")}}},n.include=d,n.includeAsync=function(e){return!!d(e)||!!(e instanceof squared.base.Extension&&(l.add(e),n.settings.handleExtensionsAsync))},n.exclude=function(n){if(c){if(n instanceof squared.base.Extension)return l.has(n)?(l.delete(n),c.extensionManager.exclude(n),!0):c.extensionManager.exclude(n);if("string"==typeof n){n=n.trim();var e=c.extensionManager.retrieve(n);if(e)return c.extensionManager.exclude(e)}}return!1},n.configure=v,n.apply=function(n,t){return n instanceof squared.base.Extension?d(n):"string"==typeof n&&(n=n.trim(),"object"===e(t)?v(n,t):p(n))},n.retrieve=p,n.ready=function(){return c&&!c.initialized&&!c.closed},n.close=function(){c&&!c.initialized&&c.size&&c.finalize()},n.reset=b,n.saveAllToDisk=function(){c&&!c.initialized&&c.size&&(c.closed||c.finalize(),c.saveAllToDisk())},n.toString=function(){return c?""+c:""},n}({});
