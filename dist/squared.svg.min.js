!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e=e||self).squared=e.squared||{},e.squared.svg={}))}(this,function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){this.wrapped=e}function i(e){var t,i;function a(t,i){try{var s=e[t](i),o=s.value,l=o instanceof r;Promise.resolve(l?o.wrapped:o).then(function(e){l?a("next",e):n(s.done?"return":"normal",e)},function(e){a("throw",e)})}catch(e){n("throw",e)}}function n(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?a(t.key,t.arg):i=null}this._invoke=function(e,r){return new Promise(function(n,s){var o={key:e,arg:r,resolve:n,reject:s,next:null};i?i=i.next=o:(t=i=o,a(e,r))})},"function"!=typeof e.return&&(this.return=void 0)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}function v(e,t,r){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var i=f(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function p(e,t,r,i){return(p="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,r,i){var a,n=f(e,t);if(n){if((a=Object.getOwnPropertyDescriptor(n,t)).set)return a.set.call(i,r),!0;if(!a.writable)return!1}if(a=Object.getOwnPropertyDescriptor(i,t)){if(!a.writable)return!1;a.value=r,Object.defineProperty(i,t,a)}else o(i,t,r);return!0})(e,t,r,i)}function y(e,t,r,i,a){if(!p(e,t,r,i||e)&&a)throw Error("failed to set property");return r}"function"==typeof Symbol&&Symbol.asyncIterator&&(i.prototype[Symbol.asyncIterator]=function(){return this}),i.prototype.next=function(e){return this._invoke("next",e)},i.prototype.throw=function(e){return this._invoke("throw",e)},i.prototype.return=function(e){return this._invoke("return",e)};function m(e,t){return g(e)||function(e,t){var r=[],i=!0,a=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(e){a=!0,n=e}finally{try{i||null==o.return||o.return()}finally{if(a)throw n}}return r}(e,t)||k()}function d(e){return function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(e){if(Array.isArray(e))return e}function b(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function k(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var S=squared.lib.dom,A=squared.lib.util;function T(e,t,r){e.style[t]=r,e.setAttribute(t,r)}var R={path:1,line:2,rect:3,ellipse:4,circle:5,polyline:6,polygon:7},x={URL:/url\("?(#.*?)"?\)/,ZERO_ONE:"(0(?:\\.\\d+)?|1(?:\\.0+)?)"},_={MATRIX:"(matrix(?:3d)?)\\(".concat(A.REGEXP_STRING.DECIMAL,", ").concat(A.REGEXP_STRING.DECIMAL,", ").concat(A.REGEXP_STRING.DECIMAL,", ").concat(A.REGEXP_STRING.DECIMAL,", ").concat(A.REGEXP_STRING.DECIMAL,", ").concat(A.REGEXP_STRING.DECIMAL,"(?:, ").concat(A.REGEXP_STRING.DECIMAL,")?(?:, ").concat(A.REGEXP_STRING.DECIMAL,")?(?:, ").concat(A.REGEXP_STRING.DECIMAL,")?(?:, ").concat(A.REGEXP_STRING.DECIMAL,")?(?:, ").concat(A.REGEXP_STRING.DECIMAL,")?(?:, ").concat(A.REGEXP_STRING.DECIMAL,")?(?:, ").concat(A.REGEXP_STRING.DECIMAL,")?(?:, ").concat(A.REGEXP_STRING.DECIMAL,")?(?:, ").concat(A.REGEXP_STRING.DECIMAL,")?(?:, ").concat(A.REGEXP_STRING.DECIMAL,")?\\)"),ROTATE:"(rotate[XY]?)\\(".concat(A.REGEXP_STRING.DEGREE,"\\)"),SKEW:"(skew[XY]?)\\(".concat(A.REGEXP_STRING.DEGREE,"(?:, ").concat(A.REGEXP_STRING.DEGREE,")?\\)"),SCALE:"(scale[XY]?)\\(".concat(A.REGEXP_STRING.DECIMAL,"(?:, ").concat(A.REGEXP_STRING.DECIMAL,")?\\)"),TRANSLATE:"(translate[XY]?)\\(".concat(A.REGEXP_STRING.LENGTH,"(?:, ").concat(A.REGEXP_STRING.LENGTH,")?\\)")},E={applyX:function(e,t,r){return e.a*t+e.c*r+e.e},applyY:function(e,t,r){return e.b*t+e.d*r+e.f},distance:function(e,t){return t*Math.cos(A.convertRadian(e))*-1},clone:function(e){return{a:e.a,b:e.b,c:e.c,d:e.d,e:e.e,f:e.f}},rotate:function(e){var t=A.convertRadian(e),r=Math.cos(t),i=Math.sin(t);return{a:r,b:i,c:-1*i,d:r,e:0,f:0}},skew:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{a:1,b:Math.tan(A.convertRadian(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)),c:Math.tan(A.convertRadian(e)),d:1,e:0,f:0}},scale:function(){return{a:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,b:0,c:0,d:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e:0,f:0}},translate:function(){return{a:1,b:0,c:0,d:1,e:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,f:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0}}},w={create:function(e,t){return{type:e,matrix:t,angle:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,method:{x:!(arguments.length>3&&void 0!==arguments[3])||arguments[3],y:!(arguments.length>4&&void 0!==arguments[4])||arguments[4]}}},parse:function(e,t){var r=void 0===t?S.cssInline(e,"transform"):t;if(""!==r){var i=[];for(var a in _)for(var n=RegExp(_[a],"g"),s=null;null!==(s=n.exec(r));){var o=s[1].endsWith("X"),l=s[1].endsWith("Y");if(s[1].startsWith("rotate")){var u=A.convertAngle(s[2],s[3]),h=E.rotate(u);o?(h.a=1,h.b=0,h.c=0):l&&(h.b=0,h.c=0,h.d=1),i[s.index]=w.create(SVGTransform.SVG_TRANSFORM_ROTATE,h,u,!o,!l)}else if(s[1].startsWith("skew")){var c=l?0:A.convertAngle(s[2],s[3]),f=l?A.convertAngle(s[2],s[3]):s[4]&&s[5]?A.convertAngle(s[4],s[5]):0,v=E.skew(c,f);o?i[s.index]=w.create(SVGTransform.SVG_TRANSFORM_SKEWX,v,c,!0,!1):l?i[s.index]=w.create(SVGTransform.SVG_TRANSFORM_SKEWY,v,f,!1,!0):(i[s.index]=w.create(SVGTransform.SVG_TRANSFORM_SKEWX,Object.assign({},v,{b:0}),c,!0,!1),0!==f&&(i[s.index+1]=w.create(SVGTransform.SVG_TRANSFORM_SKEWY,Object.assign({},v,{c:0}),f,!1,!0)))}else if(s[1].startsWith("scale")){var p=l?void 0:parseFloat(s[2]),y=E.scale(p,o?void 0:l?parseFloat(s[2]):!o&&s[3]?parseFloat(s[3]):p);i[s.index]=w.create(SVGTransform.SVG_TRANSFORM_SCALE,y,0,!l,!o)}else if(s[1].startsWith("translate")){var m=N(),d=G(e),g=parseFloat(A.convertPX(s[2],m,d)),b=!o&&s[3]?parseFloat(A.convertPX(s[3],m,d)):0,k=E.translate(l?0:g,l?g:b);i[s.index]=w.create(SVGTransform.SVG_TRANSFORM_TRANSLATE,k,0)}else if(s[1].startsWith("matrix")){var T=w.matrix(e,t);T&&(i[s.index]=w.create(SVGTransform.SVG_TRANSFORM_MATRIX,T))}}return i.filter(function(e){return!!e&&(e.fromCSS=!0,!0)})}},matrix:function(e,t){var r=RegExp(_.MATRIX).exec(t||S.getStyle(e,!0).transform||"");if(r)switch(r[1]){case"matrix":return{a:parseFloat(r[2]),b:parseFloat(r[3]),c:parseFloat(r[4]),d:parseFloat(r[5]),e:parseFloat(r[6]),f:parseFloat(r[7])};case"matrix3d":return{a:parseFloat(r[2]),b:parseFloat(r[3]),c:parseFloat(r[6]),d:parseFloat(r[7]),e:parseFloat(r[14]),f:parseFloat(r[15])}}},origin:function(e,t){void 0===t&&(t=S.cssAttribute(e,"transform-origin"));var r={x:null,y:null};if(""!==t){var i,a,n=I(e);if(n)i=n.width,a=n.height;else{var s=e.parentElement;s instanceof SVGGraphicsElement&&s.viewportElement&&(V.svg(s.viewportElement)||V.symbol(s.viewportElement))&&(i=s.viewportElement.viewBox.baseVal.width,a=s.viewportElement.viewBox.baseVal.height)}if(!i||!a){var o=e.getBoundingClientRect();i||(i=o.width),a||(a=o.height)}var l=t.split(" ");1===l.length&&l.push("center"),(l=l.slice(0,2)).includes("left")?r.x=0:l.includes("right")&&(r.x=i),l.includes("top")?r.y=0:l.includes("bottom")&&(r.y=a),["x","y"].forEach(function(t){if(null===r[t])for(var n=0;n<l.length;n++){var s=l[n];if(""!==s&&("center"===s&&(s="50%"),A.isUnit(s)?r[t]=parseInt(s.endsWith("px")?s:A.convertPX(s,N(),G(e))):A.isPercent(s)&&(r[t]=("x"===t?i:a)*(parseInt(s)/100)),null!==r[t])){l[n]="";break}}})}return r.x=r.x||0,r.y=r.y||0,r},rotateOrigin:function(e){var t=S.getNamedItem(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"transform"),r=[];if(""!==t)for(var i,a=/rotate\((-?[\d.]+),?\s*(-?[\d.]+),?\s*(-?[\d.]+)\)/g;null!==(i=a.exec(t));){var n=parseFloat(i[1]);0!==n&&r.push({angle:n,x:parseFloat(i[2]),y:parseFloat(i[3])})}return r},typeAsName:function(e){switch(e){case SVGTransform.SVG_TRANSFORM_ROTATE:return"rotate";case SVGTransform.SVG_TRANSFORM_SCALE:return"scale";case SVGTransform.SVG_TRANSFORM_SKEWX:return"skewX";case SVGTransform.SVG_TRANSFORM_SKEWY:return"skewY";case SVGTransform.SVG_TRANSFORM_TRANSLATE:return"translate"}return""},typeAsValue:function(e){switch(e){case"rotate":case SVGTransform.SVG_TRANSFORM_ROTATE:return"0 0 0";case"scale":case SVGTransform.SVG_TRANSFORM_SCALE:return"1 1 0 0";case"skewX":case"skewY":case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:return"0";case"translate":case SVGTransform.SVG_TRANSFORM_TRANSLATE:return"0 0"}return""}},V={svg:function(e){return"svg"===e.tagName},g:function(e){return"g"===e.tagName},symbol:function(e){return"symbol"===e.tagName},path:function(e){return"path"===e.tagName},shape:function(e){return void 0!==R[e.tagName]},image:function(e){return"image"===e.tagName},use:function(e){return"use"===e.tagName},line:function(e){return"line"===e.tagName},rect:function(e){return"rect"===e.tagName},circle:function(e){return"circle"===e.tagName},ellipse:function(e){return"ellipse"===e.tagName},polygon:function(e){return"polygon"===e.tagName},polyline:function(e){return"polyline"===e.tagName},clipPath:function(e){return"clipPath"===e.tagName},pattern:function(e){return"pattern"===e.tagName},linearGradient:function(e){return"linearGradient"===e.tagName},radialGradient:function(e){return"radialGradient"===e.tagName}};function N(){return A.optionalAsNumber(squared,"settings.resolutionDPI")||96}function G(e){return parseInt(S.getStyle(e).fontSize||"16")}function M(e){var t=0,r=0;if(A.isNumber(e))t=parseInt(e);else if(/-?\d+ms$/.test(e))r=parseFloat(e);else if(/-?\d+s$/.test(e))t=parseFloat(e);else if(/-?\d+min$/.test(e))t=60*parseFloat(e);else if(/-?\d+(.\d+)?h$/.test(e))t=60*parseFloat(e)*60;else{var i=/^(?:(-?)(\d?\d):)?(?:(\d?\d):)?(\d?\d)\.?(\d?\d?\d)?$/.exec(e);i&&(i[2]&&(t+=60*parseInt(i[2])*60),i[3]&&(t+=60*parseInt(i[3])),i[4]&&(t+=parseInt(i[4])),i[5]&&(r=parseInt(i[5])*(i[5].length<3?Math.pow(10,3-i[5].length):1)),i[1]&&(t*=-1,r*=-1))}return 1e3*t+r}function P(e){var t=S.cssAttribute(e,"visibility",!0);return"hidden"!==t&&"collapse"!==t&&"none"!==S.cssAttribute(e,"display",!0)}function F(e,t){T(e,"display",t?"block":"none"),T(e,"visibility",t?"visible":"hidden")}function O(e,t){if(A.isNumber(t)){var r=parseFloat(""+t);r<=0?r=0:r>=1&&(r=1),e.style.opacity=""+r,e.setAttribute("opacity",""+r)}}function B(e,t){var r=S.getNamedItem(e,"href");if("#"===r.charAt(0)){var i,a=r.substring(1);if(void 0===t)for(i=e.parentElement;i&&i.parentElement instanceof SVGGraphicsElement;)i=i.parentElement;else i=t;if(i)for(var n=Array.from(i.querySelectorAll("*")),s=0;s<n.length;s++){var o=n[s];if(o.id===a&&o instanceof SVGElement)return o}else{var l=document.getElementById(a);if(l instanceof SVGElement)return l}}return null}function I(e){for(var t=e.parentElement;t;){if((V.svg(t)||V.symbol(t))&&t.viewBox&&t.viewBox.baseVal.width>0&&t.viewBox.baseVal.height>0)return t.viewBox.baseVal;t=t.parentElement}}function C(e){return e.sort(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?function(e,t){return e>t?-1:1}:function(e,t){return e<t?-1:1})}function L(e){return e%1!=0?e.toFixed(arguments.length>1&&void 0!==arguments[1]?arguments[1]:3).replace(/(\.\d+?)0+$/,function(e,t){return t}):e}function X(e,t,r){return e+(t-e)*r}function z(e,t){if(e.length>1){var r=C(e.slice(0))[0],i=0;if(t)if(t.length===e.length)for(var a=0;a<t.length;a++)i=Math.max(i,t[a]+e[a]);else t=void 0;void 0===t&&(i=Math.max(i,r));for(var n=i,s=!1;!s;)for(var o=0;o<e.length;o++){if((n-(t?t[o]:0))%e[o]!=0){s=!1,n+=r;break}s=!0}return n}return e[0]}var j=Object.freeze({REGEXP_SVG:x,MATRIX:E,TRANSFORM:w,SVG:V,getHostDPI:N,getFontSize:G,convertClockTime:M,isVisible:P,setVisible:F,setOpacity:O,getTargetElement:B,getNearestViewBox:I,sortNumber:C,truncateDecimal:L,getSplitValue:X,getLeastCommonMultiple:z}),q=squared.lib.util,W=new Map,D=function(){function e(){a(this,e)}return s(e,null,[{key:"isContainer",value:function(e){return q.hasBit(e.instanceType,2)}},{key:"isElement",value:function(e){return q.hasBit(e.instanceType,4)}},{key:"isShape",value:function(e){return q.hasBit(e.instanceType,2052)}},{key:"isAnimate",value:function(e){return q.hasBit(e.instanceType,16392)}},{key:"asSvg",value:function(e){return 18===e.instanceType}},{key:"asG",value:function(e){return 34===e.instanceType}},{key:"asUseSymbol",value:function(e){return 66===e.instanceType}},{key:"asPattern",value:function(e){return 130===e.instanceType}},{key:"isShapePattern",value:function(e){return 258===e.instanceType}},{key:"asUsePattern",value:function(e){return 514===e.instanceType}},{key:"asImage",value:function(e){return 4100===e.instanceType}},{key:"asUse",value:function(e){return 10244===e.instanceType}},{key:"asSet",value:function(e){return 8===e.instanceType}},{key:"asAnimate",value:function(e){return 16392===e.instanceType}},{key:"asAnimateTransform",value:function(e){return 81928===e.instanceType}},{key:"asAnimateMotion",value:function(e){return 49160===e.instanceType}},{key:"setName",value:function(e){if(e){var t,r="";if(q.isString(e.id)){var i=q.convertWord(e.id,!0);W.has(i)||(r=i),t=i}else t=e.tagName;var a=W.get(t)||0;return""!==r?(W.set(r,a),r):(W.set(t,++a),"".concat(t,"_").concat(a))}return W.clear(),""}},{key:"drawLine",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return"M".concat(e,",").concat(t," L").concat(r,",").concat(i)}},{key:"drawRect",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return"M".concat(r,",").concat(i," ").concat(r+e,",").concat(i," ").concat(r+e,",").concat(i+t," ").concat(r,",").concat(i+t," Z")}},{key:"drawCircle",value:function(t,r,i){return e.drawEllipse(t,r,i)}},{key:"drawEllipse",value:function(e,t,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return void 0===i&&(i=r),"M".concat(a?L(e-r):e-r,",").concat(a?L(t):t," a").concat(r,",").concat(i,",0,1,0,").concat(2*r,",0 a").concat(r,",").concat(i,",0,1,0,-").concat(2*r,",0")}},{key:"drawPolygon",value:function(t){var r=e.drawPolyline(t,arguments.length>1&&void 0!==arguments[1]&&arguments[1]);return""!==r?"".concat(r," Z"):""}},{key:"drawPolyline",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.length?"M".concat(e.map(function(e){return"".concat(t?L(e.x):e.x,",").concat(t?L(e.y):e.y)}).join(" ")):""}},{key:"drawPath",value:function(e){for(var t="",r=Array.isArray(a=e),i=0,a=r?a:a[Symbol.iterator]();;){var n;if(r){if(i>=a.length)break;n=a[i++]}else{if((i=a.next()).done)break;n=i.value}var s=n;switch(t+=(""!==t?" ":"")+s.command,s.command.toUpperCase()){case"M":case"L":case"C":case"S":case"Q":case"T":t+=s.coordinates.join(",");break;case"H":t+=s.coordinates[0];break;case"V":t+=s.coordinates[1];break;case"A":t+="".concat(s.radiusX,",").concat(s.radiusY,",").concat(s.xAxisRotation,",").concat(s.largeArcFlag,",").concat(s.sweepFlag,",").concat(s.coordinates.join(","))}}return t}},{key:"getPathCommands",value:function(t){var r,i=[],a=/([A-Za-z])([^A-Za-z]+)?/g;for(t=t.trim();null!==(r=a.exec(t))&&(0!==i.length||"M"===r[1].toUpperCase());){r[2]=(r[2]||"").trim();var n=e.toNumberList(r[2]),s=i[i.length-1],o=s?s.command.toUpperCase():"",l=s?s.points[s.points.length-1]:void 0,u=void 0,h=void 0,c=void 0,f=void 0,v=void 0;switch(r[1].toUpperCase()){case"M":0===i.length&&(r[1]="M");case"L":if(n.length>=2){n.length%2!=0&&n.length--;break}continue;case"H":if(l&&n.length){n[1]="h"===r[1]?0:l.y,n.length=2;break}continue;case"V":if(l&&n.length){var p=n[0];n[0]="v"===r[1]?0:l.x,n[1]=p,n.length=2;break}continue;case"Z":if(i.length){n.push.apply(n,d(i[0].coordinates.slice(0,2))),r[1]="Z";break}continue;case"C":if(n.length>=6){n.length=6;break}continue;case"S":if(n.length>=4&&("C"===o||"S"===o)){n.length=4;break}continue;case"Q":if(n.length>=4){n.length=4;break}continue;case"T":if(n.length>=2&&("Q"===o||"T"===o)){n.length=2;break}continue;case"A":if(n.length>=7){var y=m(n.splice(0,5),5);u=y[0],h=y[1],c=y[2],f=y[3],v=y[4],n.length=2;break}continue;default:continue}if(n.length>1){for(var g=[],b=/[a-z]/.test(r[1]),k=0;k<n.length;k+=2){var S=n[k],A=n[k+1];b&&l&&(l={x:S+=l.x,y:A+=l.y}),g.push({x:S,y:A})}i.push({command:r[1],relative:b,coordinates:n,points:g,radiusX:u,radiusY:h,xAxisRotation:c,largeArcFlag:f,sweepFlag:v})}}return i}},{key:"getPathPoints",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[],i=0,a=0,n=0;n<e.length;n++){for(var s=e[n],o=0;o<s.coordinates.length;o+=2){s.relative?(i+=s.coordinates[o],a+=s.coordinates[o+1]):(i=s.coordinates[o],a=s.coordinates[o+1]);var l={x:i,y:a};"A"===s.command.toUpperCase()&&(l.rx=s.radiusX,l.ry=s.radiusY,t&&(s.coordinates[o]>=0?l.y-=s.radiusY:l.y+=s.radiusY)),r.push(l)}if(s.relative){switch(s.command){case"h":case"v":var u,h=e[n-1];if(h&&"M"===h.command)(u=h.coordinates).push.apply(u,d(s.coordinates)),e.splice(n--,1);s.command="M";break;default:s.command=s.command.toUpperCase()}s.relative=!1}}return r}},{key:"setPathPoints",value:function(e,t){var r=t.slice(0);e:for(var i=Array.isArray(n=e),a=0,n=i?n:n[Symbol.iterator]();;){var s;if(i){if(a>=n.length)break;s=n[a++]}else{if((a=n.next()).done)break;s=a.value}var o=s;switch(o.command.toUpperCase()){case"M":case"L":case"H":case"V":case"C":case"S":case"Q":case"T":for(var l=0;l<o.coordinates.length;l+=2){var u=r.shift();if(!u){e=[];break e}o.coordinates[l]=u.x,o.coordinates[l+1]=u.y}break;case"A":var h=r.shift();if(!h||void 0===h.rx||void 0===h.ry){e=[];break e}o.coordinates[0]=h.x,o.coordinates[1]=h.y,o.radiusX=h.rx,o.radiusY=h.ry}}return e}},{key:"filterTransforms",value:function(e,t){for(var r=[],i=Array.isArray(n=e),a=0,n=i?n:n[Symbol.iterator]();;){var s;if(i){if(a>=n.length)break;s=n[a++]}else{if((a=n.next()).done)break;s=a.value}var o=s;if(void 0===t||!t.includes(o.type)){switch(o.type){case SVGTransform.SVG_TRANSFORM_ROTATE:case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:if(0===o.angle)continue;break;case SVGTransform.SVG_TRANSFORM_SCALE:if(1===o.matrix.a&&1===o.matrix.d)continue;break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:if(0===o.matrix.e&&0===o.matrix.f)continue}r.push(o)}}return r}},{key:"applyTransforms",value:function(t,r,i,a){t=t.slice(0).reverse();for(var n=e.clonePoints(r),s=Array.isArray(l=t),o=0,l=s?l:l[Symbol.iterator]();;){var u;if(s){if(o>=l.length)break;u=l[o++]}else{if((o=l.next()).done)break;u=o.value}var h=u,c=h.matrix,f=0,v=0,p=0,y=0;if(i)switch(h.type){case SVGTransform.SVG_TRANSFORM_SCALE:h.method.x&&(p=i.x*(1-c.a)),h.method.y&&(y=i.y*(1-c.d));break;case SVGTransform.SVG_TRANSFORM_SKEWX:h.method.y&&(v-=i.y);break;case SVGTransform.SVG_TRANSFORM_SKEWY:h.method.x&&(f-=i.x);break;case SVGTransform.SVG_TRANSFORM_ROTATE:h.method.x&&(f-=i.x,p=i.x+E.distance(h.angle,i.x)),h.method.y&&(v-=i.y,y=i.y+E.distance(h.angle,i.y))}if(a)switch(h.type){case SVGTransform.SVG_TRANSFORM_SCALE:a.x*=c.a,a.y*=c.d;break;case SVGTransform.SVG_TRANSFORM_ROTATE:0!==h.angle&&(a.angle=(a.angle||0)+h.angle);break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:a.x+=c.e,a.y+=c.f}for(var m=Array.isArray(g=n),d=0,g=m?g:g[Symbol.iterator]();;){var b;if(m){if(d>=g.length)break;b=g[d++]}else{if((d=g.next()).done)break;b=d.value}var k=b,S=k.x;if(k.x=E.applyX(c,S,k.y+v)+p,k.y=E.applyY(c,S+f,k.y)+y,h.type===SVGTransform.SVG_TRANSFORM_SCALE&&void 0!==k.rx&&void 0!==k.ry){var A=k.rx;k.rx=E.applyX(c,A,k.ry+v),k.ry=E.applyY(c,A+f,k.ry)}}}return n}},{key:"convertTransforms",value:function(e){for(var t=[],r=0;r<e.numberOfItems;r++){var i=e.getItem(r);t.push(w.create(i.type,i.matrix,i.angle))}return t}},{key:"clonePoints",value:function(e){var t=[];if(Array.isArray(e))for(var r=Array.isArray(a=e),i=0,a=r?a:a[Symbol.iterator]();;){var n;if(r){if(i>=a.length)break;n=a[i++]}else{if((i=a.next()).done)break;n=i.value}var s=n,o={x:s.x,y:s.y};void 0!==s.rx&&void 0!==s.ry&&(o.rx=s.rx,o.ry=s.ry),t.push(o)}else for(var l=0;l<e.numberOfItems;l++){var u=e.getItem(l);t.push({x:u.x,y:u.y})}return t}},{key:"convertNumbers",value:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push({x:e[r],y:e[r+1]});return t.length%2==0?t:[]}},{key:"toNumberList",value:function(e){for(var t,r=[],i=/-?[\d.]+/g;null!==(t=i.exec(e));){var a=parseFloat(t[0]);isNaN(a)||r.push(a)}return r}},{key:"toPointList",value:function(e){var t=[],r=e.trim().split(/\s+/),i=Array.isArray(r),a=0;for(r=i?r:r[Symbol.iterator]();;){var n;if(i){if(a>=r.length)break;n=r[a++]}else{if((a=r.next()).done)break;n=a.value}var s=m(n.split(",").map(function(e){return parseFloat(e)}),2);t.push({x:s[0],y:s[1]})}return t}},{key:"toBoxRect",value:function(t){for(var r=Number.MAX_VALUE,i=-Number.MAX_VALUE,a=-Number.MAX_VALUE,n=Number.MAX_VALUE,s=Array.isArray(l=t),o=0,l=s?l:l[Symbol.iterator]();;){var u;if(s){if(o>=l.length)break;u=l[o++]}else{if((o=l.next()).done)break;u=o.value}for(var h=e.getPathPoints(e.getPathCommands(u),!0),c=Array.isArray(v=h),f=0,v=c?v:v[Symbol.iterator]();;){var p;if(c){if(f>=v.length)break;p=v[f++]}else{if((f=v.next()).done)break;p=f.value}p.y<r?r=p.y:p.y>a&&(a=p.y),p.x<n?n=p.x:p.x>i&&(i=p.x)}}return{top:r,right:i,bottom:a,left:n}}}]),e}(),U=squared.lib.dom,Y=function(e){return function(t){function r(){var e;return a(this,r),(e=c(this,u(r).apply(this,arguments)))._baseVal={},e}return l(r,e),s(r,[{key:"setBaseValue",value:function(e,t){if(void 0!==t){if(this.validateBaseValue(e,t))return this._baseVal[e]=t,!0}else switch(e){case"d":return this._baseVal[e]=U.cssAttribute(this.element,"d"),!0;case"points":var r=this.element[e];if(Array.isArray(r))return this._baseVal[e]=D.clonePoints(r),!0;break;default:var i=this.element[e];if(i&&i.baseVal)return this._baseVal[e]=i.baseVal.value,!0}return!1}},{key:"getBaseValue",value:function(e,t){return void 0!==this._baseVal[e]||this.setBaseValue(e)?this._baseVal[e]:t}},{key:"refitBaseValue",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;function a(a){for(var n=Array.isArray(o=a),s=0,o=n?o:o[Symbol.iterator]();;){var l;if(n){if(s>=o.length)break;l=o[s++]}else{if((s=o.next()).done)break;l=s.value}var u=l;u.x+=e,u.y+=t,void 0!==u.rx&&void 0!==u.ry&&(u.rx*=r,u.ry*=i)}}for(var n in this._baseVal){var s=this._baseVal[n];if("string"==typeof s){if("d"===n){var o=D.getPathCommands(s),l=D.getPathPoints(o);a(l),this._baseVal[n]=D.drawPath(D.setPathPoints(o,l))}}else if("number"==typeof s)switch(n){case"cx":case"x1":case"x2":case"x":this._baseVal[n]+=e;break;case"cy":case"y1":case"y2":case"y":this._baseVal[n]+=t;case"r":this._baseVal[n]*=Math.min(r,i);break;case"rx":case"width":this._baseVal[n]*=r;break;case"height":case"ry":this._baseVal[n]*=i}else Array.isArray(s)&&"points"===n&&a(s)}}},{key:"validateBaseValue",value:function(e,t){switch(e){case"d":return"string"==typeof t;case"cx":case"cy":case"r":case"rx":case"ry":case"x1":case"x2":case"y1":case"y2":case"x":case"y":case"width":case"height":return"number"==typeof t;case"points":return Array.isArray(t)}}}]),r}()},H=squared.lib.dom,K=squared.lib.util,Z=function(){function e(t){if(a(this,e),this.element=null,this.attributeName="",this.paused=!1,this.synchronizeState=0,this._duration=-1,this._delay=0,this._to="",t){this.element=t,this.setAttribute("attributeName"),this.setAttribute("to");var r=H.getNamedItem(t,"dur");""!==r&&"indefinite"!==r&&(this.duration=M(r)),"transform"===this.attributeName?this.baseFrom=w.typeAsValue(H.getNamedItem(t,"type")):t.parentElement&&(this.baseFrom=K.optionalAsString(t.parentElement,"".concat(this.attributeName,".baseVal.valueAsString"))||H.cssInheritAttribute(t.parentElement,this.attributeName))}}return s(e,[{key:"setAttribute",value:function(e,t){var r=H.getNamedItem(this.element,e);""!==r&&(void 0!==t?this[e+K.capitalize(t)]=r===t:this[e]=r)}},{key:"addState",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var i=0;i<t.length;i++){var a=t[i];K.hasBit(this.synchronizeState,a)||(this.synchronizeState|=a)}}},{key:"removeState",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var i=0;i<t.length;i++){var a=t[i];K.hasBit(this.synchronizeState,a)&&(this.synchronizeState^=a)}}},{key:"hasState",value:function(){for(var e=this,t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return r.some(function(t){return K.hasBit(e.synchronizeState,t)})}},{key:"delay",set:function(e){this._delay=e},get:function(){return this._delay}},{key:"duration",set:function(e){this._duration=Math.round(e)},get:function(){return this._duration}},{key:"to",set:function(e){this._to=e},get:function(){return this._to}},{key:"group",set:function(e){this._group=e},get:function(){return this._group||{id:-1/0,name:""}}},{key:"setterType",set:function(e){},get:function(){return!0}},{key:"instanceType",get:function(){return 8}}]),e}(),$={ease:"0.25 0.1 0.25 1","ease-in":"0.42 0 1 1","ease-in-out":"0.42 0 0.58 1","ease-out":"0 0 0.58 1",linear:"0 0 1 1",step:"0 1 0 1"},Q=Object.freeze({KEYSPLINE_NAME:$}),J=squared.lib.color,ee=squared.lib.dom,te=squared.lib.util;function re(e){return parseFloat((1-e).toFixed(5))}var ie=function(e){function t(e){var r;if(a(this,t),(r=c(this,u(t).call(this,e))).type=0,r.from="",r.fillMode=0,r.alternate=!1,r.additiveSum=!1,r.accumulateSum=!1,r._iterationCount=1,r._reverse=!1,r._setterType=!1,r._repeatDuration=-1,e){var i=ee.getNamedItem(e,"values"),n=-1!==r.duration?t.toFractionList(ee.getNamedItem(e,"keyTimes")):[];if(""!==i)r.values=te.flatMap(i.split(";"),function(e){return e.trim()}),r.values.length>1&&n.length===r.values.length?(r.from=r.values[0],r.to=r.values[r.values.length-1],r.keyTimes=n):1===r.values.length&&(r.to=i[0],r.convertToValues());else{if(r.from=ee.getNamedItem(e,"from"),""===r.to){var s=ee.getNamedItem(e,"by");te.isNumber(s)&&(""===r.from&&r.baseFrom&&(r.from=r.baseFrom),te.isNumber(r.from)&&(r.to=""+(parseFloat(r.from)+parseFloat(s))))}r.convertToValues(n)}r.setAttribute("additive","sum");var o=ee.getNamedItem(e,"repeatDur");""!==o&&"indefinite"!==o&&(r._repeatDuration=M(o));var l=ee.getNamedItem(e,"repeatCount");r.iterationCount="indefinite"===l?-1:parseFloat(l),"animate"===e.tagName&&r.setCalcMode(r.attributeName)}return r}return l(t,Z),s(t,[{key:"setCalcMode",value:function(e){switch(ee.getNamedItem(this.element,"calcMode")){case"discrete":if(2===this.keyTimes.length&&0===this.keyTimes[0]){for(var r=[],i=[],a=0;a<this.keyTimes.length-1;a++){var n=t.toStepFractionList(e,this.keyTimes,this.values,"step-end",a,N(),G(this.element));n&&(r.push.apply(r,d(n[0])),i.push.apply(i,d(n[1])))}r.push(this.keyTimes.pop()),i.push(this.values.pop()),this.values=i,this.keyTimes=r,this._keySplines=[$.step]}break;case"spline":this.keySplines=te.flatMap(ee.getNamedItem(this.element,"keySplines").split(";"),function(e){return e.trim()});case"linear":if(0!==this.keyTimes[0]&&1!==this.keyTimes[this.keyTimes.length-1]){for(var s=[],o=0;o<this.values.length;o++)s.push(o/(this.values.length-1));this._keyTimes=s,this._keySplines=void 0}}}},{key:"convertToValues",value:function(e){""!==this.to&&(this.values=[this.from,this.to],this.keyTimes=e&&2===e.length&&0===this.keyTimes[0]&&this.keyTimes[1]<=1?e:[0,1])}},{key:"setGroupSiblings",value:function(e){if(this.group.siblings=e,this.fillBackwards)for(var t=e.length-1,r=!1;t>=0;t--)if(r){if("backwards"===e[t].fillMode||"both"===e[t].fillMode){this.fillBackwards=!1;break}}else e[t].name===this.group.name&&(r=!0)}},{key:"getPartialDuration",value:function(e){return(0===e?this.delay:0)+this.keyTimes[this.keyTimes.length-1]*this.duration}},{key:"_setFillMode",value:function(e,t){var r=te.hasBit(this.fillMode,t);e?r||(this.fillMode|=t):r&&(this.fillMode^=t)}},{key:"delay",set:function(e){y(u(t.prototype),"delay",e,this,!0);var r=ee.getNamedItem(this.element,"end");if(""!==r){var i=C(r.split(";").map(function(e){return M(e)}))[0];void 0!==i&&(-1===this.iterationCount||this.duration>0&&i<this.duration*this.iterationCount)&&(this.delay>i?(this.end=i,-1===this.iterationCount&&(this.iterationCount=Math.ceil((this.end-this.delay)/this.duration))):this.duration=-1)}},get:function(){return v(u(t.prototype),"delay",this)}},{key:"duration",set:function(e){y(u(t.prototype),"duration",e,this,!0)},get:function(){var e=v(u(t.prototype),"duration",this);return-1===e&&-1!==this._repeatDuration?this._repeatDuration:e}},{key:"iterationCount",set:function(e){this._iterationCount=isNaN(e)?1:e,this.fillFreeze=-1!==this.iterationCount&&"freeze"===ee.getNamedItem(this.element,"fill"),1!==this.iterationCount?this.setAttribute("accumulate","sum"):this.accumulateSum=!1},get:function(){return this.duration>0?-1!==this._repeatDuration&&(-1===this._iterationCount||this._repeatDuration<this._iterationCount*this.duration)?this._repeatDuration/this.duration:this._iterationCount:1}},{key:"to",set:function(e){y(u(t.prototype),"to",e,this,!0)},get:function(){return this._setterType?this.valueTo||v(u(t.prototype),"to",this):this.setterType?this.values[0]:v(u(t.prototype),"to",this)}},{key:"values",set:function(e){this._values=e,this._keyTimes&&this._keyTimes.length!==e.length&&(this._keyTimes=void 0,this._keySplines=void 0)},get:function(){return void 0===this._values&&(this._values=[]),this._values}},{key:"valueTo",get:function(){return this.values[this.values.length-1]||""}},{key:"valueFrom",get:function(){return this.values[0]||""}},{key:"keyTimes",set:function(e){!e.every(function(e){return e>=0&&e<=1})||void 0!==this._values&&this._values.length!==e.length||(this._keyTimes=e)},get:function(){return void 0===this._keyTimes&&(this._keyTimes=[]),this._keyTimes}},{key:"keySplines",set:function(e){if(e&&e.length){var t=this.keyTimes.length-1;if(e.length>=t&&!e.every(function(e){return""===e||e===$.linear})){for(var r=[],i=0;i<t;i++){var a=e[i].split(" ").map(function(e){return parseFloat(e)});4===a.length&&!a.some(function(e){return isNaN(e)})&&a[0]>=0&&a[0]<=1&&a[2]>=0&&a[2]<=1?r.push(a.join(" ")):r.push($.linear)}this._keySplines=r}}else this._keySplines=void 0},get:function(){return this._keySplines}},{key:"reverse",set:function(e){if(e!==this._reverse&&this.values.length){this.values.reverse();for(var t=[],r=0;r<this.keyTimes.length;r++)t.push(1-this.keyTimes[r]);if(t.reverse(),this.keyTimes=t,this._keySplines){for(var i=[],a=this._keySplines.length-1;a>=0;a--){var n=this._keySplines[a].split(" ").map(function(e){return parseFloat(e)});i.push(4===n.length?"".concat(re(n[2])," ").concat(re(n[3])," ").concat(re(n[0])," ").concat(re(n[1])):$.linear)}this._keySplines=i}this._reverse=e}},get:function(){return this._reverse}},{key:"fillBackwards",set:function(e){this._setFillMode(e,2)},get:function(){return te.hasBit(this.fillMode,2)}},{key:"fillForwards",set:function(e){this._setFillMode(e,4)},get:function(){return te.hasBit(this.fillMode,4)}},{key:"fillFreeze",set:function(e){this._setFillMode(e,8)},get:function(){return te.hasBit(this.fillMode,8)}},{key:"fillReplace",get:function(){return this.fillMode<4}},{key:"fromToType",get:function(){return 2===this.keyTimes.length&&0===this.keyTimes[0]&&1===this.keyTimes[1]}},{key:"partialType",get:function(){return this.keyTimes.length>1&&this.keyTimes[this.keyTimes.length-1]<1}},{key:"setterType",set:function(e){this._setterType=e},get:function(){return this._setterType||void 0!==this.element&&0===this.duration&&this.keyTimes.length>=2&&0===this.keyTimes[0]}},{key:"instanceType",get:function(){return 16392}}],[{key:"toStepFractionList",value:function(e,t,r,i,a){var n,s,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:96,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:16;switch(e){case"fill":case"stroke":var u=J.parseRGBA(r[a]),h=J.parseRGBA(r[a+1]);u&&h&&(n=[u],s=[h]);break;case"points":n=D.convertNumbers(D.toNumberList(r[a])),s=D.convertNumbers(D.toNumberList(r[a+1]));break;case"rotate":case"scale":case"translate":n=r[a].trim().split(/\s+/).map(function(e){return parseFloat(e)}),s=r[a+1].trim().split(/\s+/).map(function(e){return parseFloat(e)});break;default:te.isNumber(r[a])?n=[parseFloat(r[a])]:te.isUnit(r[a])&&(n=[parseFloat(te.convertPX(r[a],o,l))]),te.isNumber(r[a+1])?s=[parseFloat(r[a+1])]:te.isUnit(r[a+1])&&(s=[parseFloat(te.convertPX(r[a+1],o,l))])}if(n&&s&&n.length&&n.length===s.length){switch(i){case"step-start":i="steps(1, start)";break;case"step-end":i="steps(1, end)"}var c=/steps\((\d+)(?:, (start|end))?\)/.exec(i);if(c){for(var f=t[a+1]-t[a],v=parseInt(c[1]),p=100/v,y=[],m=[],d=0;d<v;d++){var g=t[a]+f*(d/v),b=p*(d+(0===d&&"start"===c[2]?1:0))/100,k=[];switch(e){case"fill":case"stroke":var S=n[0],A=s[0],T=J.convertHex(X(S.rgba.r,A.rgba.r,b),X(S.rgba.g,A.rgba.g,b),X(S.rgba.b,A.rgba.b,b)),R=J.convertHex(X(S.rgba.a,A.rgba.a,b));k.push("#".concat(T+("FF"!==R?R:"")));break;case"points":for(var x=0;x<n.length;x++){var _=n[x],E=s[x];k.push("".concat(X(_.x,E.x,b),",").concat(X(_.y,E.y,b)))}break;default:for(var w=0;w<n.length;w++){k.push(""+X(n[w],s[w],b))}}if(!k.length)return;y.push(g),m.push(k.join(" "))}return[y,m]}}}},{key:"toFractionList",value:function(e){var t=0,r=te.flatMap(e.split(arguments.length>1&&void 0!==arguments[1]?arguments[1]:";"),function(e){var r=parseFloat(e);return!isNaN(r)&&r>=t&&r<=1?(t=r,r):-1});return r.length>1&&0===r[0]&&r.some(function(e){return-1!==e})?r:[]}}]),t}(),ae=squared.lib.dom,ne=function(e){function t(e){var r;if(a(this,t),r=c(this,u(t).call(this,e)),e){var i=ae.getNamedItem(e,"type");r.setType(i),r.setCalcMode(i)}return r}return l(t,ie),s(t,null,[{key:"toRotateList",value:function(e){var t=e.map(function(e){if(""===e)return[0,0,0];var t=D.toNumberList(e);return 1===t.length?(t[1]=0,t[2]=0,t):3===t.length?t:[]});return t.some(function(e){return 0===e.length})?void 0:t}},{key:"toScaleList",value:function(e){var t=e.map(function(e){if(""===e)return[1,1,0,0];var t=D.toNumberList(e);return 1===t.length&&(t[1]=t[0]),2===t.length?(t[2]=0,t[3]=0,t):4===t.length?t:[]});return t.some(function(e){return 0===e.length})?void 0:t}},{key:"toTranslateList",value:function(e){var t=e.map(function(e){if(""===e)return[0,0];var t=D.toNumberList(e);return 1===t.length?(t[1]=0,t):2===t.length?t:[]});return t.some(function(e){return 0===e.length})?void 0:t}},{key:"toSkewList",value:function(e){var t=e.map(function(e){if(""===e)return[0];var t=D.toNumberList(e);return 1===t.length?t:[]});return t.some(function(e){return 0===e.length})?void 0:t}}]),s(t,[{key:"expandToValues",value:function(){if(this.additiveSum&&-1!==this.iterationCount&&this.keyTimes.length&&this.duration>0){var e=this.duration*this.iterationCount;e:{for(var t,r=[],i=[],a=[],n=0;n<this.iterationCount;n++){n>0&&this.keySplines&&a.push("");for(var s=0;s<this.keyTimes.length;s++){var o=this.values[s].split(" "),l=o.map(function(e){return parseFloat(e)});if(o.length!==l.length)break e;var u=void 0;switch(this.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:1===l.length?u=[l[0],0]:2===l.length&&(u=l);break;case SVGTransform.SVG_TRANSFORM_SCALE:1===l.length?u=[l[0],l[0]]:2===l.length&&(u=l);break;case SVGTransform.SVG_TRANSFORM_ROTATE:1===l.length?u=[l[0],0,0]:3===l.length&&(u=l);break;case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:1===l.length&&(u=l)}if(!u)break e;var h=(this.keyTimes[s]+n)*this.duration;if(t)for(var c=0;c<u.length;c++)u[c]+=t[c];n<this.iterationCount-1&&s===this.keyTimes.length-1&&(this.accumulateSum&&(t=u),h--),r.push(h/e),i.push(u.join(" ")),this.keySplines&&s<this.keyTimes.length-1&&a.push(this.keySplines[s])}}this.keyTimes=r,this.values=i,this.keySplines=a.length?a:void 0,this.duration=e,this.iterationCount=1,this.accumulateSum=!1}}}},{key:"setType",value:function(e){var r;switch(e){case"translate":this.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,r=t.toTranslateList(this.values);break;case"scale":this.type=SVGTransform.SVG_TRANSFORM_SCALE,r=t.toScaleList(this.values);break;case"rotate":this.type=SVGTransform.SVG_TRANSFORM_ROTATE,r=t.toRotateList(this.values);break;case"skewX":this.type=SVGTransform.SVG_TRANSFORM_SKEWX,r=t.toSkewList(this.values);break;case"skewY":this.type=SVGTransform.SVG_TRANSFORM_SKEWY,r=t.toSkewList(this.values)}this.values=r?r.map(function(e){return e.join(" ")}):[]}},{key:"instanceType",get:function(){return 81928}}]),t}(),se=squared.lib.util;function oe(e,t,r){var i,a,n,s=0,o=e.entries(),l=Array.isArray(o),u=0;for(o=l?o:o[Symbol.iterator]();;){var h;if(l){if(u>=o.length)break;h=o[u++]}else{if((u=o.next()).done)break;h=u.value}var c=m(h,2),f=c[0],v=c[1];if(r===f){a={index:f,value:v};break}if(r>s&&r<f){a={index:s,value:i},n={index:f,value:v};break}s=f,i=v}a&&n?Se(t,r,ge(r,a.index,a.value,n.index,n.value)):a&&Se(t,r,a.value)}function le(e){for(var t=e[e.length-1][0],r=new Set,i=0;i<e.length;i++){var a=e[i][0]/t;if(a>0)for(var n=7;;n++){var s=parseFloat((""+a).substring(0,n));if(!r.has(s)){a=s;break}}e[i][0]=a,r.add(a)}return e}function ue(e){return"string"==typeof e&&(se.isNumber(e)?e=parseFloat(e):0===(e=D.toPointList(e)).length&&(e="")),e}function he(e){return Array.isArray(e)?e.map(function(e){return"".concat(e.x,",").concat(e.y)}).join(" "):""+e}function ce(e,t,r){var i,a=[],n=t.element.tagName;switch(n){case"line":i=["x1","y1","x2","y2"];break;case"rect":i=["width","height","x","y"];break;case"polyline":case"polygon":i=["points"];break;case"circle":i=["cx","cy","r"];break;case"ellipse":i=["cx","cy","rx","ry"];break;default:return}for(var s=w.origin(t.element),o=0;o<e.length;o++){for(var l=e[o][0],u=e[o][1],h=[],c=Array.isArray(v=i),f=0,v=c?v:v[Symbol.iterator]();;){var p;if(c){if(f>=v.length)break;p=v[f++]}else{if((f=v.next()).done)break;p=f.value}var y=p,m=u.get(y);if(void 0===m&&(m=t.getBaseValue(y)),void 0===m)return;h.push(m)}var d=void 0;switch(n){case"line":d=fe(h);break;case"rect":d=ve(h);break;case"polygon":case"polyline":d=h[0];break;case"circle":case"ellipse":d=pe(h)}if(d){var g=void 0;switch(t.transformed&&t.transformed.length&&(d=D.applyTransforms(t.transformed,d,s)),r&&r.refitPoints(d),n){case"line":case"polyline":g=D.drawPolyline(d,!0);break;case"rect":case"polygon":g=D.drawPolygon(d,!0);break;case"circle":case"ellipse":var b=d[0];g=D.drawEllipse(b.x,b.y,b.rx,b.ry,!0)}void 0!==g&&a.push({index:l,value:g})}}return a}function fe(e){return[{x:e[0],y:e[1]},{x:e[2],y:e[4]}]}function ve(e){var t=e[0],r=e[1],i=e[2],a=e[3];return[{x:i,y:a},{x:i+t,y:a},{x:i+t,y:a+r},{x:i,y:a+r}]}function pe(e){return[{x:e[0],y:e[1],rx:e[2],ry:e[e.length-1]}]}function ye(e,t,r){for(var i=new Map,a=Array.isArray(s=t),n=0,s=a?s:s[Symbol.iterator]();;){var o;if(a){if(n>=s.length)break;o=s[n++]}else{if((n=s.next()).done)break;o=n.value}var l=o,u=new Map;for(var h in r||e){var c=void 0;e[h]?void 0===(c=e[h].get(l))&&(c=we(e[h],l)):r&&(c=r[h].value),void 0!==c&&u.set(h,c)}i.set(l,u)}return i}function me(e,t,r,i,a){return Math.round(e+(r[a]+i)*t)}function de(e,t,r,i,a){if(e.alternate&&i%2!=0&&(r=r.slice(0).reverse()),"number"==typeof t){var n=parseFloat(r[a]);if(e.additiveSum){n+=t,e.accumulateSum||(i=0);for(var s=0;s<i;s++)for(var o=0;o<r.length;o++)n+=parseFloat(r[o])}return n}if("string"==typeof t){if(e.additiveSum){var l=t.split(/\s+/).map(function(e){return parseFloat(e)}),u=r.map(function(e){return e.trim().split(/\s+/).map(function(e){return parseFloat(e)})});if(u.every(function(e){return l.length===e.length})){var h=u[a];e.accumulateSum||(i=0);for(var c=0;c<l.length;c++)h[c]+=l[c];for(var f=0;f<i;f++)for(var v=0;v<u.length;v++)for(var p=0;p<u[v].length;p++)h[p]+=u[v][p];return h.join(" ")}}return r[a]}return Array.isArray(t)?D.toPointList(r[a]):t}function ge(e,t,r,i,a){if(e>t){if("number"==typeof r&&"number"==typeof a)return X(r,a,(e-t)/(i-t));if("string"==typeof r&&"string"==typeof a){var n=r.split(" ").map(function(e){return parseFloat(e)}),s=a.split(" ").map(function(e){return parseFloat(e)});if(n.length===s.length){for(var o=[],l=0;l<n.length;l++)o.push(ge(e,t,n[l],i,s[l]));return o.join(" ")}}else if(Array.isArray(r)&&Array.isArray(a)){for(var u=[],h=0;h<Math.min(r.length,a.length);h++)u.push({x:ge(e,t,r[h].x,i,a[h].x),y:ge(e,t,r[h].y,i,a[h].y)});return u}}return r}function be(e,t,r,i,a,n,s,o,l,u,h,c){var f;n<0?(f=o-n,n=0):f=o,f=function(e){(e+1)%10==0?e++:(e-1)%10==0&&e--;return e}(f);for(var v,p=Math.max(0,Math.min((f-(n+e.duration*s))/e.duration,1)),y=-1,m=-1,d=0;d<r.length;d++){if(-1!==y&&p<=r[d]){m=d;break}p>=r[d]&&(y=d)}return Ae(e,o=Se(u,o,v=-1!==y&&-1!==m?ge(p,r[y],de(e,t,i,s,y),r[m],de(e,t,i,s,m)):de(e,t,i,s,m=-1!==y?y+1:r.length-1)),a,m,l,h,c),[o,v]}function ke(e,r,i,a,n){for(var s=e.keyTimes.slice(0),o=e.values.slice(0),l=e.keySplines?e.keySplines.slice(0):Array(o.length-1).fill(""),u=r+e.duration,h=r+e.getPartialDuration(),c=function(r){var c=n[r];if(c!==e){var v=xe(c);if(v>h){var p=function(){var p=Math.min(u,v);e:for(var y=function(r,i){for(var n=function(t){var n=me(c.delay,c.duration,c.keyTimes,r,t);if(n>=h){var u=function(u){var f;if(n===u)f=he(de(c,a,c.values,r,t));else for(var v=(n-u)/c.duration,y=1;y<c.keyTimes.length;y++)if(v>=c.keyTimes[y-1]&&v<=c.keyTimes[y]){f=he(ge(v,c.keyTimes[y-1],de(c,a,c.values,r,y-1),c.keyTimes[y],de(c,a,c.values,r,y)));break}var m=u===p?1:u%e.duration/e.duration;0===m&&t>0&&(m=1),void 0===f||m===s[s.length-1]&&f===o[o.length-1]||(u===h?m+=1/e.duration:h=u,s.push(m),o.push(f),l&&l.push(i&&c.keySplines&&c.keySplines[t]?c.keySplines[t]:""))};if(!i&&n>=h&&(u(h),i=!0,n===h))return"continue";if(i){if(u(Math.min(n,p)),n>=p||1===s[s.length-1])return d=i,{v:"break|substituteEnd"};h=n}}},u=0;u<c.keyTimes.length;u++){var f=n(u);switch(f){case"continue":continue;default:if("object"===t(f))return f.v}}d=i},m=Ge(h,c.delay,c.duration),d=!1;;m++){if("break|substituteEnd"===y(m,d))break e}if(v===p&&v<=i&&(c.addState(16),n.splice(r--,1)),p===u)return f=r,{v:"break"}}();if("object"===t(p))return p.v}else i!==1/0&&v<i&&n.splice(r--,1)}f=r},f=0;f<n.length;f++){if("break"===c(f))break}return[s,o,l]}function Se(e,t,r){if(""!==r){var i=e.get(t),a=!1;if(void 0===i&&(i=e.get(t-1),a=!0),i!==r){if("number"==typeof r&&Math.round(i)===Math.round(r))return t;for(;t>0&&e.has(t);)t++;e.set(t,r)}else a&&!e.has(t)&&(e.delete(t-1),e.set(t,r))}return t}function Ae(e,t,r,i,a,n,s){if(!Te(D.asAnimateTransform(e),a)){if(0===i)return;i--}var o=r&&r[i];o&&n.set(t,o),s&&function(e,t,r,i){D.asAnimateTransform(t)&&t.transformOrigin&&t.transformOrigin[i]&&e.set(r,t.transformOrigin[i])}(s,e,t,i)}function Te(e,t){return se.hasBit(t,e?32:4)}function Re(e){return!e.paused&&(e.element&&-1!==e.duration||e.keyTimes&&e.keyTimes.length>1&&e.duration>0)}function xe(e){return-1!==e.iterationCount?Math.min(e.delay+e.duration*e.iterationCount,e.end||1/0):1/0}function _e(e){return Math.min(e.delay+e.duration*(-1!==e.iterationCount?e.iterationCount:1),e.end||1/0)}function Ee(e){return"infinite"===e.iterationCount?1/0:e.delay+e.duration*parseInt(e.iterationCount)}function we(e,t){var r,i=0,a=e.entries(),n=Array.isArray(a),s=0;for(a=n?a:a[Symbol.iterator]();;){var o;if(n){if(s>=a.length)break;o=a[s++]}else{if((s=a.next()).done)break;o=s.value}var l=m(o,2),u=l[0],h=l[1];if(t===u)return h;if(t>i&&t<u)return r;i=u,r=h}return r}function Ve(e){return[e.keyTimes.slice(0),e.values.slice(0),e.keySplines?e.keySplines.slice(0):void 0]}function Ne(e,t,r,i){e[e.length-1]<1&&(e.push(1),t.push(i?he(i):t[0]),r&&r.push(""))}function Ge(e,t,r){return Math.floor(Math.max(0,e-t)/r)}var Me=function(e){return function(r){function i(){return a(this,i),c(this,u(i).apply(this,arguments))}return l(i,e),s(i,[{key:"getAnimateShape",value:function(e,t){void 0===t&&(t=this.animations);for(var r=[],i=Array.isArray(n=t),a=0,n=i?n:n[Symbol.iterator]();;){var s;if(i){if(a>=n.length)break;s=n[a++]}else{if((a=n.next()).done)break;s=a.value}var o=s;if(Re(o))switch(o.attributeName){case"r":case"cx":case"cy":if(V.circle(e)){r.push(o);break}case"rx":case"ry":V.ellipse(e)&&r.push(o);break;case"x1":case"x2":case"y1":case"y2":V.line(e)&&r.push(o);break;case"points":(V.polyline(e)||V.polygon(e))&&r.push(o);break;case"x":case"y":case"width":case"height":V.rect(e)&&r.push(o)}}return r}},{key:"getAnimateViewRect",value:function(e){void 0===e&&(e=this.animations);for(var t=[],r=Array.isArray(a=e),i=0,a=r?a:a[Symbol.iterator]();;){var n;if(r){if(i>=a.length)break;n=a[i++]}else{if((i=a.next()).done)break;n=i.value}var s=n;if(Re(s))switch(s.attributeName){case"x":case"y":t.push(s)}}return t}},{key:"getAnimateTransform",value:function(e){return void 0===e&&(e=this.animations),e.filter(function(e){return D.asAnimateTransform(e)&&e.duration>0})}},{key:"mergeAnimations",value:function(e,r){var i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;[e,r].forEach(function(e,r){var s=1===r;if(!(0===e.length||0===r&&se.hasBit(a,8)||s&&se.hasBit(a,64))){for(var o=[],l=[],u=[],h=0;h<e.length;h++)if(e[h].setterType)l.push(e[h]);else for(var c=e[h],f=xe(c),v=0;v<e.length;v++){var p=e[v];if(h!==v&&c.attributeName===p.attributeName&&c.group.id<p.group.id&&c.fillReplace&&!p.partialType)if(p.setterType){if(c.delay===p.delay){u[h]=c;break}}else{var y=xe(p);if(c.delay===p.delay&&(!p.fillReplace||f<=y||-1===p.iterationCount)||p.fillBackwards&&c.delay<=p.delay&&(p.fillForwards||c.fillReplace&&f<=p.delay)||c.element&&void 0===p.element&&(c.delay>=p.delay&&f<=y||p.fillForwards)){u[h]=c;break}}}for(var g=[],b=0;b<e.length;b++){var k=u[b];k?k.fillReplace?g.push(e[b]):(k.setterType=!0,l.push(k)):e[b].setterType||o.push(e[b])}i._removeAnimations(g),(0===r&&o.length+l.length>0||s&&(o.length+l.length>1||1===o.length&&(o[0].alternate||void 0!==o[0].end)))&&function(){for(var e=function(e,t,r){e&&(q.set(t,e),void 0!==r&&q.set(r,e))},r=new Set(o.map(function(e){return e.group.name})),u=0;u<o.length;u++){var h=o[u];h.group.siblings&&se.spliceArray(h.group.siblings,function(e){return!r.has(e.name)})}for(var c={},f=0,v=0;v<o.length;v++){var p=o[v],y=p.attributeName;void 0===c[y]&&(c[y]=new Map);var g=c[y].get(p.delay)||[];g.push(p),c[y].set(p.delay,g)}for(var b in c){var k=new Map,S=C(Array.from(c[b].keys())),A=Array.isArray(S),T=0;for(S=A?S:S[Symbol.iterator]();;){var R;if(A){if(T>=S.length)break;R=S[T++]}else{if((T=S.next()).done)break;R=T.value}var x=R,_=c[b].get(x);if(_){var E=se.maxArray(_.map(function(e){return _e(e)}));f=Math.max(f,E),_.reverse(),k.set(x,_)}}c[b]=k}var V,N,G,M={},P=new Map,F=s?new Map:void 0,O=new Set,B={},I=new Map,L=s?new Map:void 0,X={},j={},q=new Map,W=function(r){M[r]=new Map,s||(X[r]=i._getBaseValue(r,n));var u=[],h=[],v=o.filter(function(e){return e.attributeName===r}),p=c[r].entries(),y=Array.isArray(p),d=0;for(p=y?p:p[Symbol.iterator]();;){var g;if(y){if(d>=p.length)break;g=p[d++]}else{if((d=p.next()).done)break;g=d.value}var b=m(g,2),k=b[1];u.push(b[0]),h.push(k)}var S,A=[],T=l.filter(function(e){return e.attributeName===r}),R=v.filter(function(e){return e.fillBackwards})[0],x=-1,_=0,E=void 0,V=void 0,N=void 0,G=void 0;function I(t,i){if(O.add(t),t.addState(16),N=t,t.fillForwards){if(K(_,E,t.type,t),t.group.siblings)for(var a=Array.isArray(o=t.group.siblings),n=0,o=a?o:o[Symbol.iterator]();;){var l;if(a){if(n>=o.length)break;l=o[n++]}else{if((n=o.next()).done)break;l=n.value}if(l.name===t.group.name)return!0;if(Ee(l)>=xe(t))return!1}}else{if(t.fillFreeze&&K(_,E,t.type,t),void 0!==i){var u=x,h=z(_,_+1);void 0!==h&&t.fillReplace&&i>_&&0===A.length&&(u=Se(M[r],u,h),s&&e(t.type,u),E=h,x=u)}W()}return!1}function C(e,t,i){return void 0===t&&(t=e.delay),void 0===i&&(i=e.to),Se(M[r],t,s?i:ue(i))}function L(e){e&&T.push(e),T.sort(function(e,t){return e.delay===t.delay?e.group.id<t.group.id?-1:1:e.delay<t.delay?-1:1});for(var t=0;t<T.length-1;t++)T[t].delay===T[t+1].delay&&T.splice(t--,1)}function z(e,t){var i=j[r]&&j[r].value;return se.spliceArray(T,function(r){return r.delay>=e&&r.delay<t},function(t){t.element&&H(),0===A.length&&(E=t.to),K(t.delay,t.to,t.type,t),t.delay===e?i=s?t.to:ue(t.to):(x=C(t),_=t.delay)}),i}function W(e,t){A.length&&se.spliceArray(A,function(e){return xe(e)<=_},function(r){if(r.addState(16),r.fillForwards&&(K(xe(r),r.valueTo,r.type,r),void 0!==e&&void 0!==t))for(var i=e;i<u.length;i++){i!==e&&(t=-1);for(var a=t+1;a<h[i].length;a++){var n=h[i][a];r.group.id>n.group.id&&n.addState(16)}}})}function U(e){e.hasState(16,64)||(e.addState(4),A.push(e))}function Y(){A.sort(function(e,t){return e.element&&t.element&&e.delay!==t.delay?e.delay<t.delay?1:-1:e.group.id<=t.group.id?1:-1})}function H(e){se.spliceArray(A,e?function(t){return t===e}:function(e){return void 0!==e.element})}function K(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0;if(s||(t=ue(t)),""!==t&&(void 0===j[r]||e>=j[r].time)&&(j[r]={time:e,value:t,index:i}),a&&D.asAnimate(a)&&!a.fillReplace)if(a.fillForwards){se.spliceArray(T,function(t){return t.group.id<a.group.id||t.delay<e}),A.length=0;for(var n=0;n<h.length;n++)for(var o=Array.isArray(u=h[n]),l=0,u=o?u:u[Symbol.iterator]();;){var c;if(o){if(l>=u.length)break;c=u[l++]}else{if((l=u.next()).done)break;c=l.value}c.group.id<a.group.id&&c.addState(16)}}else a.fillFreeze&&H()}function Z(t,i,a){V&&!t&&(void 0===a&&(a=w.typeAsValue(V.type)),i!==(x=Se(M[r],i,a))&&e(V.type,x)),V=void 0}if(R){E=de(R,s?"":X[r],R.values,0,0),x=Se(M[r],0,E),s&&(e(R.type,0),V=R);for(var $=!0,Q=Array.isArray(ee=v),J=0,ee=Q?ee:ee[Symbol.iterator]();;){var te;if(Q){if(J>=ee.length)break;te=ee[J++]}else{if((J=ee.next()).done)break;te=J.value}if(te.group.id>R.group.id&&te.delay<=R.delay){$=!1;break}}for(var re=xe(R),ie=[],ae=0;ae<u.length;ae++)for(var ne=0;ne<h[ae].length;ne++){var oe=h[ae][ne];if($){if(oe===R&&(0!==ae||0!==ne)){h[ae].splice(ne--,1),u.unshift(R.delay),h.unshift([R]);continue}if(oe.group.id<R.group.id&&(R.fillForwards||xe(oe)<=re)){oe.fillForwards&&(oe.setterType=!0,T.push(oe)),ie.push(oe);continue}}oe.element&&oe.delay<=R.delay&&(h[ae].splice(ne--,1),U(oe))}!function(e){for(var t=0;t<u.length;t++){if(e.length)for(var r=0;r<h[t].length;r++)e.includes(h[t][r])&&h[t].splice(r--,1);0===h[t].length&&(h.splice(t,1),u.splice(t--,1))}}(ie),R.addState(2)}s||(void 0===j[r]&&K(0,X[r],0),void 0===E&&(E=j[r].value)),L(),se.spliceArray(T,function(e){return e.delay<=u[0]},function(e){var t=D.asAnimate(e)&&e.fillForwards;if(e.delay<u[0]&&(void 0===R||t))if(R&&t)K(e.delay,e.to,e.type);else{var i=e.delay-1;void 0===S?M[r].has(0)?C(e,i,E):(C(e,0,X[r]),C(e,i,X[r])):C(S,i),x=C(e),_=e.delay,S=e}}),S&&C(S,u[0]-1);e:{for(var le,he,ce=function(i){for(var n=u[i],o=function(t){var o=h[i][t];if(o.hasState(16,64))return l=t,"continue";var c=-1===o.iterationCount,v=o.duration,p=o.iterationCount,y=void 0;if(c)y=n+v;else if((y=xe(o))<=x)return o.fillReplace?o.addState(64):U(o),l=t,"continue";var d=void 0,g=void 0;if(c?(d=Math.ceil((f-n)/v),g=0):(d=Math.ceil(p),g=p-Math.floor(p)),T.length&&_>0&&_<n&&z(_,n),-1!==x&&x<n&&(x=Se(M[r],n-1,E),_=n),G=void 0,o.group.siblings&&o.group.siblings.length>1){for(var b=!0,k=Array.isArray(R=o.group.siblings),S=0,R=k?R:R[Symbol.iterator]();;){var N;if(k){if(S>=R.length)break;N=R[S++]}else{if((S=R.next()).done)break;N=S.value}var O=N;if(O.name===o.group.name){b=!1;break}if(!O.paused&&_<=O.delay&&O.attributes.includes(r))break}if(b)t:for(var q=i+1;q<u.length;q++)for(var D=0;D<h[q].length;D++){var $=h[q][D];if($.group.siblings){G=$.delay;break t}xe($)<=y?($.fillFreeze&&L($),$.addState(16)):$.delay<y&&U($)}}else for(var Q=i+1;Q<u.length;Q++)if(u[Q]!==1/0&&h[Q].length&&!h[Q].every(function(e){return e.hasState(16,64)})){G=u[Q];break}var J=_,ee=x+1,te=Math.min(G||1/0,o.end||1/0),re=void 0;if(T.length&&o.element){var ie=Math.min(G||1/0,y,te);if(re=T.find(function(e){return e.delay>=_&&e.delay<=ie})){switch(re.delay){case _:K(_,E=re.to,re.type,re),re.group.id>o.group.id&&(s&&V&&Z(o.additiveSum,Math.max(n-1,x)),x=C(re,Math.max(re.delay,x),E),te=-1);break;case G:re.addState(32);break;default:te=re.delay,re.addState(32)}se.spliceArray(T,function(e){return e!==re}),o.addState(4)}}var ae=!1,ne=void 0;if(te>x){s&&(V&&(Z(o.additiveSum,Math.max(n-1,x)),ee=x+1),E=w.typeAsValue(o.type),K(_,E,o.type));var oe=u[i]===1/0||(-1!==x||o.hasState(2))&&!(0===i&&0===t);ae=!0;t:for(var le=function(e){var s=void 0,l=void 0,u=void 0;if(o.partialType){if(_+o.getPartialDuration(e)<te&&(A.length||t<h[i].length-1)){for(var c=t+1;c<h[i].length;c++)U(h[i][c]);h[i].length=0,Y();var f=m(ke(o,0===_?n:_,te,E,A),3);s=f[0],l=f[1],u=f[2]}else{var p=m(Ve(o),3);s=p[0],l=p[1],u=p[2]}Ne(s,l,u,X[r])}else s=o.keyTimes,l=o.values,u=o.keySplines;for(var b=0;b<s.length;b++){var k=s[b],S=void 0,T=de(o,E,l,e,b);if(e===d-1&&g>0)if(g===k)g=-1;else if(b===s.length-1)_=S=y,T=ge(g,s[b-1],de(o,E,l,e,b-1),k,T),g=-1;else if(g>k)for(var R=b+1;R<s.length;R++)if(g<=s[R]){_=S=y,T=ge(g,k,T,s[R],de(o,E,l,e,R)),g=-1;break}if(void 0===S){if((S=me(n,v,s,e,b))<0||S<x)continue;if(S===te)ae=e===d-1&&b===s.length-1,_=S;else{var w=function(t){var i=m(be(o,E,s,l,u,n,e,t,a,M[r],P,F),2);x=i[0],ne=i[1]};if(n<0&&-1===x)S>0&&(_=0,w(0));else{if(S>te)return oe&&x+1<te&&w(x),_=te,w(te+(te!==G||M[r].has(te-1)?0:-1)),ae=!1,"break|threadTimeExceeded";if(oe)o.hasState(2)&&(_=J),n>=x?(S=Math.max(n,x+1),_=n):S===x?(_=S,S=x+1):(w(x),_=Math.max(S,x)),oe=!1;else{if(_=S,e>0&&0===b&&o.accumulateSum){Ae(o,S,u,b,a,P,F),x=S;continue}S=Math.max(S,x+1)}}}}if(S>x&&(b===s.length-1&&(e<d-1||o.fillReplace&&T!==j[r].value)&&!o.accumulateSum&&S--,x=Se(M[r],S,T),Ae(o,x,u,b,a,P,F),ne=T),!ae||-1===g)return"break|threadTimeExceeded"}},ue=Ge(_,n,v);ue<d;ue++){if("break|threadTimeExceeded"===le(ue))break t}W(i,t)}if(void 0!==ne&&(E=ne,s&&(e(o.type,ee,x),V=o)),re&&(re.hasState(32)?(x=C(re,re.delay,ne=re.to),K(_=re.delay,ne,re.type,re)):o.hasState(64)&&e(x,re.type),H(),ae=!0),se.spliceArray(T,function(e){return e.delay>=J&&e.delay<=_},function(e){K(e.delay,e.to,e.type,e),e.element&&H()}),c){if(!ae)return A.length=0,A.push(o),l=t,"continue";if(void 0===re)return B[r]=o,l=t,{v:"break|attributeEnd"}}if(ae){if(G=G||1/0,!c&&I(o,G))return l=t,{v:"break|attributeEnd"};for(var he=i;he<u.length;he++)if(u[he]<_){for(var ce=0;ce<h[he].length;ce++){var fe=h[he][ce],ve=xe(fe);ve>_&&!fe.hasState(4,16,64)?U(fe):fe.fillReplace||K(ve,fe.valueTo,fe.type,fe)}u[he]=1/0,h[he].length=0}if(A.length&&_<G){Y();var pe=A.filter(function(e){return e.delay<=_})[0];pe&&(pe.removeState(4,2),pe.addState(8),H(pe),n=pe.delay,h[i]=[pe],t=-1)}}else U(o);l=t},l=0;l<h[i].length;l++){var c=o(l);switch(c){case"continue":continue;default:if("object"===t(c))return c.v}}},fe=0;fe<u.length;fe++){if("break|attributeEnd"===ce(fe))break e}if(A.length){Y();for(var ve=function(t){var i=A[t],n=i.delay,o=i.duration,l=x-n,u=1/0;function h(){var h,c,f;if(i.partialType){if(_+i.getPartialDuration()<u&&t<A.length-1){var v=m(ke(i,_,u,E,A),3);h=v[0],c=v[1],f=v[2]}else{var p=m(Ve(i),3);h=p[0],c=p[1],f=p[2]}Ne(h,c,f,X[r])}else h=i.keyTimes,c=i.values,f=i.keySplines;var y=x+1,d=Math.floor(l/o),g=!1;do{for(var b=0;b<h.length;b++){var k=me(n,o,h,d,b);if(!g&&k>=x){var S=m(be(i,E,h,c,f,n,d,x,a,M[r],P,F),2);x=S[0],E=S[1],g=!0}if(g)if(k>=u){if(u>x){var T=m(be(i,E,h,c,f,n,d,u,a,M[r],P,F),2);x=T[0],E=T[1],_=u}}else k>x&&(_=k,b===h.length-1&&k<u&&k--,E=de(i,E,c,d,b),x=Se(M[r],k,E),Ae(i,x,f,b,a,P,F))}}while(x<u&&++d);s&&e(i.type,y,x)}return-1===i.iterationCount?(l>0&&l%i.duration!=0&&(u=n+i.duration*Math.ceil(l/o),h()),B[r]=i,"break|attributeEnd"):(u=Math.min(n+i.duration*i.iterationCount,i.end||1/0))>x&&(h(),I(i))?"break|attributeEnd":void 0},pe=0;pe<A.length;pe++){if("break|attributeEnd"===ve(pe))break e}}if(N&&N.fillReplace&&void 0===B[r])j[r]?(le=j[r].index,he=j[r].value):s?(le=Array.from(q.values()).pop(),he=w.typeAsValue(le)):he=i._getBaseValue(r,n),void 0!==he&&JSON.stringify(M[r].get(x))!==JSON.stringify(he)&&(x=Se(M[r],x,he),e(le,x))}};for(var U in c)W(U);var Y=[];for(var H in M)Y.push.apply(Y,d(M[H].keys()));var K=se.maxArray(Y);if(Object.keys(B).length){var Z=[],$=[];for(var Q in B)Z.push(B[Q].delay),$.push(B[Q].duration);0===O.size&&Z[0]===Y[0]&&1===new Set(Z).size&&1===new Set($).size?N=Z[0]<=0?0:Z[0]:$.length>1?K=z($,Z):(K-Z[0])%$[0]!=0&&(K=$[0]*Math.ceil(K/$[0]))}if(void 0===N)for(var J in M)if(B[J]){var ee=Array.from(M[J].keys()).pop();if(ee<K){var te=B[J],re=te.delay,ae=ee+1,he=Array.from(M[J].values()).pop(),fe=Math.floor((ee-re)/te.duration);do{for(var ve=!1,pe=0;pe<te.keyTimes.length;pe++){var Re=me(re,te.duration,te.keyTimes,fe,pe);if(!ve&&Re>=ee){var we=m(be(te,he,te.keyTimes,te.values,te.keySplines,re,fe,ee,a,M[J],P,F),2);he=we[1],Y.push(ee=we[0]),ve=!0}ve&&Re>ee&&(pe===te.keyTimes.length-1&&Re<K&&Re--,he=de(te,he,te.values,fe,pe),ee=Se(M[J],Re,he),Ae(te,Re,te.keySplines,pe,a,P,F),Y.push(ee))}}while(ee<K&&++fe);s&&e(te.type,ae,ee)}}var Me=C(Array.from(new Set(Y)));if(n||s)for(var Pe in M)if(!M[Pe].has(0)&&void 0!==X[Pe]){var Fe=M[Pe].keys().next().value-1;M[Pe].set(0,X[Pe]),M[Pe].set(Fe,X[Pe]),Me.includes(0)||Me.push(0),Me.includes(Fe)||Me.push(Fe),C(Me)}var Oe={};for(var Be in M){for(var Ie=new Map,Ce=se.maxArray(Array.from(M[Be].keys())),Le=0;Le<Me.length;Le++){var Xe=Me[Le];if(Xe<=Ce){var ze=M[Be].get(Xe);void 0===ze?oe(M[Be],Ie,Xe):Ie.set(Xe,ze)}}Oe[Be]=Ie}if(V=ye(Oe,Me),void 0===N&&Object.keys(B).length){var je={},qe=[],We=[];for(var De in B)qe.push(B[De]);for(var Ue=z(qe.map(function(e){return e.duration})),Ye=0;Ye<qe.length;Ye++){var He=qe[Ye],Ke=He.attributeName;je[Ke]=new Map;var Ze=Array.from(M[Ke].values()).pop(),$e=0,Qe=0;do{for(var Je=0;Je<He.keyTimes.length;Je++){var et=me(0,He.duration,He.keyTimes,Qe,Je);Je===He.keyTimes.length-1&&et<Ue&&et--,Ze=de(He,Ze,He.values,Qe,Je),Ae(He,$e=Se(je[Ke],et,Ze),He.keySplines,Je,a,I,L),We.push($e)}}while($e<Ue&&++Qe)}if(qe.every(function(e){return e.alternate})){var tt=-1;for(var rt in B)for(var it=Array.from(je[rt].keys()),at=Array.from(je[rt].values()).reverse(),nt=0;nt<it.length;nt++)if(0!==it[nt]){tt=Ue+it[nt];var st=I.get(it[nt]);st&&I.set(tt,st),tt=Se(je[rt],tt,at[nt]),We.push(tt)}}for(var ot in We=C(Array.from(new Set(We))),je)for(var lt=Array.isArray(ht=We),ut=0,ht=lt?ht:ht[Symbol.iterator]();;){var ct;if(lt){if(ut>=ht.length)break;ct=ht[ut++]}else{if((ut=ht.next()).done)break;ct=ut.value}var ft=ct;je[ot].has(ft)||oe(je[ot],je[ot],ft)}G=ye(je,We,j)}if(V||G){i._removeAnimations(o);var vt=Array.from(q.entries()),pt=Array.from(o.map(function(e){return D.asAnimateTransform(e)?w.typeAsName(e.type):e.attributeName})).join("-");[V,G].forEach(function(e){if(e){var t=e===V,r=t?P:I,o=t?F:L;if(Te(s,a)){var l=[];if(s){var u=[];if(t)for(var h=Array.from(e.entries()),c=vt[0][1],f=0,v=0,p=0;f<vt.length;f++){var y=f<vt.length-1?vt[f+1][1]:-1;if(c!==y){for(var d=new Map,g=p;g<h.length;g++){var b=h[g][0];if(b>=vt[v][0]&&b<=vt[f][0])d.set(b,new Map([[c,h[g][1].values().next().value]])),p=g;else if(b>vt[f][0])break}u.push(d),c=y,v=f+1}}else{if(!B.transform)return;for(var k=Array.from(e.entries()),S=new Map,A=0;A<k.length;A++){var T=k[A];S.set(T[0],new Map([[B.transform.type,T[1].values().next().value]]))}u.push(S)}for(var R=0,x=0;x<u.length;x++){var _=Array.from(u[x].entries()),E=_[0][0];1===_.length&&_.push(x<u.length-1?[u[x+1].keys().next().value,_[0][1]]:[E+1,_[0][1]]);var w=_[_.length-1][0],G=w-E,M=new ne;M.attributeName="transform",M.type=_[0][1].keys().next().value;for(var O=0;O<_.length;O++){var C=_[O];if(l.push(r.get(C[0])||""),M.type!==SVGTransform.SVG_TRANSFORM_ROTATE){var X=o.get(C[0]);X&&(void 0===M.transformOrigin&&(M.transformOrigin=[]),M.transformOrigin[O]=X)}C[0]-=E}var z=le(_),j=Array.isArray(z),q=0;for(z=j?z:z[Symbol.iterator]();;){var W;if(j){if(q>=z.length)break;W=z[q++]}else{if((q=z.next()).done)break;W=q.value}var D=m(W,2),U=D[1];M.keyTimes.push(D[0]),M.values.push(U.values().next().value)}(E-=R)>1?M.delay=E:1===E&&(G+1)%10==0&&G++,M.duration=G,M.keySplines=l,M.synchronized={index:x,value:""},R=w,i._insertAnimate(M,t)}}else{for(var Y,H=Array.from(e.entries()),K=N||0,Z=0;Z<H.length;Z++){var $=H[Z];l.push(r.get($[0])||""),$[0]-=K}if(n){var Q=ce(le(H),n,i.parent);if(!Q)return;(Y=new ie).attributeName="d";for(var J=Array.isArray(te=Q),ee=0,te=J?te:te[Symbol.iterator]();;){var re;if(J){if(ee>=te.length)break;re=te[ee++]}else{if((ee=te.next()).done)break;re=ee.value}var ae=re;Y.keyTimes.push(ae.index),Y.values.push(""+ae.value)}}else{var oe=new ne;oe.attributeName="transform",oe.type=SVGTransform.SVG_TRANSFORM_TRANSLATE;var ue=e.entries(),he=Array.isArray(ue),fe=0;for(ue=he?ue:ue[Symbol.iterator]();;){var ve;if(he){if(fe>=ue.length)break;ve=ue[fe++]}else{if((fe=ue.next()).done)break;ve=fe.value}var pe=m(ve,2),ye=pe[0],me=(U=pe[1]).get("x")||0,de=U.get("y")||0;oe.keyTimes.push(ye),oe.values.push(i.parent?"".concat(i.parent.refitX(me)," ").concat(i.parent.refitX(de)):"".concat(me," ").concat(de))}Y=oe}Y.delay=K,Y.keySplines=l,Y.duration=H[H.length-1][0],i._insertAnimate(Y,t)}}else if(function(e,t){return se.hasBit(t,e?16:2)}(s,a))for(var ge=Array.from(e.entries()),be=0;be<ge.length-1;be++){var ke=m(ge[be],2),Se=ke[0],Ae=ke[1],Re=m(ge[be+1],2),xe=Re[0],_e=Re[1],Ee=void 0,we=pt;if(s){var Ve=new ne;if(Ve.attributeName="transform",t)for(var Ne=0;Ne<vt.length-1;Ne++){var Ge=vt[Ne],Me=vt[Ne+1];if(Ge[1]===Me[1]&&Se>=Ge[0]&&xe<=Me[0]){Ve.type=Ge[1];break}if(xe-Se==1&&xe===Me[0]){Ve.type=Me[1];break}}else B.transform&&(Ve.type=B.transform.type);if(0===Ve.type)continue;Ve.values=[Ae.values().next().value,_e.values().next().value];var Pe=o.get(xe);Pe&&(Ve.transformOrigin=[Pe]),Ee=Ve}else if(n){var Fe=ce([[Se,Ae],[xe,_e]],n,i.parent);if(!Fe)continue;(Ee=new ie).attributeName="d",Ee.values=Fe.map(function(e){return""+e.value})}else{var Oe=new ne;Oe.attributeName="transform",Oe.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,Oe.values=[Ae,_e].map(function(e){var t=e.get("x")||0,r=e.get("y")||0;return i.parent?"".concat(i.parent.refitX(t)," ").concat(i.parent.refitX(r)):"".concat(t," ").concat(r)}),we+=be,Ee=Oe}t&&(Ee.delay=0===be?Se:0),Ee.duration=xe-Se,Ee.keyTimes=[0,1],Ee.synchronized={index:be,value:we};var Be=r.get(xe);Be&&(Ee.keySplines=[Be]),i._insertAnimate(Ee,t)}}})}}()}})}},{key:"_removeAnimations",value:function(e){e.length&&se.retainArray(this.animations,function(t){return!e.includes(t)})}},{key:"_insertAnimate",value:function(e,t){t||(e.iterationCount=-1),e.from=e.valueFrom,e.to=e.valueTo,this.animations.push(e)}},{key:"_getBaseValue",value:function(e,t){var r;try{r=(t||this).getBaseValue(e)}catch(e){}return null!=r?r:"points"===e?[{x:0,y:0}]:0}}]),i}()},Pe=squared.lib.dom,Fe=squared.lib.util,Oe=function(e){function t(e){var r;if(a(this,t),(r=c(this,u(t).call(this,e))).path="",r.mpath=null,r.rotate=0,r.rotateAuto=!1,r.rotateAutoReverse=!1,e){r.setAttribute("path");var i=Pe.getNamedItem(e,"rotate");switch(i){case"auto":r.rotateAuto=!0;break;case"auto-reverse":r.rotateAutoReverse=!0;break;default:r.rotate=Fe.convertInt(i)}if(r.keyTimes.length){var n=Pe.getNamedItem(e,"keyPoints");if(""!==n){var s=ie.toFractionList(n);s.length===r.keyTimes.length&&(r.keyPoints=s)}}for(var o=0;o<e.children.length;o++){var l=e.children[o];if("mpath"===l.tagName){var h=B(l);if(h&&(V.shape(h)||V.use(h))){r.mpath=h;break}}}}return r}return l(t,ie),s(t,[{key:"instanceType",get:function(){return 49160}}]),t}(),Be=squared.lib.dom,Ie=squared.lib.util,Ce=Be.getKeyframeRules(),Le={"animation-delay":"0s","animation-duration":"0s","animation-iteration-count":"1","animation-play-state":"running","animation-direction":"normal","animation-fill-mode":"none","animation-timing-function":"ease"},Xe=RegExp("cubic-bezier\\(".concat(x.ZERO_ONE,", ").concat(Ie.REGEXP_STRING.DECIMAL,", ").concat(x.ZERO_ONE,", ").concat(Ie.REGEXP_STRING.DECIMAL,"\\)"));function ze(e,t){var r=Be.cssAttribute(e,t);if("animation-timing-function"===t){for(var i=[];""!==r;){var a=r.indexOf(",");if(-1===a){i.push(r);break}var n=r.substring(0,a);if(n.startsWith("steps")||n.startsWith("cubic-bezier")){var s=r.indexOf(")",a)+1;n+=r.substring(a,s),a=s}i.push(n),r=r.substring(a+1).trim()}return i}return Ie.flatMap(r.split(/,/),function(e){return e.trim()})}function je(e){return e.sort(function(e,t){return e.index>=t.index?1:-1})}var qe=function(e){return function(t){function r(){var e;return a(this,r),(e=c(this,u(r).apply(this,arguments))).transformed=null,e}return l(r,e),s(r,[{key:"getTransforms",value:function(e){var t=e||this.element;return D.filterTransforms(w.parse(t)||D.convertTransforms(t.transform.baseVal))}},{key:"getAnimations",value:function(e){var t=e||this.element,r=[],i=0;function a(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";""===a&&i++,e.delay=t,e.group={id:i,name:a},r.push(e)}for(var n=0;n<t.children.length;n++){var s=t.children[n];if(s instanceof SVGAnimationElement){var o=s.attributes.getNamedItem("begin");if(o&&/^[a-zA-Z]+$/.test(o.value.trim()))continue;var l=o?C(o.value.split(";").map(function(e){return M(e)})):[0];if(l.length)switch(s.tagName){case"set":for(var u=Array.isArray(c=l),h=0,c=u?c:c[Symbol.iterator]();;){var f;if(u){if(h>=c.length)break;f=c[h++]}else{if((h=c.next()).done)break;f=h.value}var v=f;a(new Z(s),v)}break;case"animate":for(var p=Array.isArray(m=l),y=0,m=p?m:m[Symbol.iterator]();;){var g;if(p){if(y>=m.length)break;g=m[y++]}else{if((y=m.next()).done)break;g=y.value}var b=g;a(new ie(s),b)}break;case"animateTransform":for(var k=Array.isArray(A=l),S=0,A=k?A:A[Symbol.iterator]();;){var T;if(k){if(S>=A.length)break;T=A[S++]}else{if((S=A.next()).done)break;T=S.value}var R=T,x=new ne(s);D.isShape(this)&&this.path&&(x.transformFrom=this.path.draw(void 0,void 0,!0)),a(x,R)}break;case"animateMotion":for(var _=Array.isArray(V=l),E=0,V=_?V:V[Symbol.iterator]();;){var P;if(_){if(E>=V.length)break;P=V[E++]}else{if((E=V.next()).done)break;P=E.value}var F=P;a(new Oe(s),F)}}}}var O=ze(t,"animation-name");if(O.length){var B={},I=[],L=[];for(var X in Le){var z=ze(t,X);for(0===z.length&&z.push(Le[X]);z.length<O.length;)z.push.apply(z,d(z.slice(0)));z.length=O.length,B[X]=z}for(var j=0;j<O.length;j++){var q=Ce.get(O[j]),W=M(B["animation-duration"][j]);q&&W>0&&function(){i++;var e={},r={},n="paused"===B["animation-play-state"][j],s=M(B["animation-delay"][j]),o=B["animation-iteration-count"][j],l=B["animation-fill-mode"][j],u="".concat(O[j],"_").concat(j),h=[];for(var c in L.push({name:u,attributes:h,paused:n,delay:s,duration:W,iterationCount:o,fillMode:l}),q){var f=parseInt(c)/100;for(var v in q[c]){var p=Le[v]?r:e;void 0===p[v]&&(p[v]=[]),p[v].push({index:f,value:q[c][v]})}}if(e.transform){var y=function(){if(g){if(b>=m.length)return"break";k=m[b++]}else{if((b=m.next()).done)return"break";k=b.value}var r=k,i=w.parse(t,r.value);if(i){var a=function(r){var i=e["transform-origin"]&&e["transform-origin"].find(function(e){return e.index===r});if(i)return w.origin(t,i.value)}(r.index);i.forEach(function(t){var i,n,s,o=t.matrix;switch(t.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:i="translate",n="".concat(o.e," ").concat(o.f);break;case SVGTransform.SVG_TRANSFORM_SCALE:i="scale",n="".concat(o.a," ").concat(o.d," ").concat(a?"".concat(a.x," ").concat(a.y):"0 0"),!a||0===r.index&&0===a.x&&0===a.y||(s={x:a.x*(1-o.a),y:a.y*(1-o.d)});break;case SVGTransform.SVG_TRANSFORM_ROTATE:i="rotate",n="".concat(t.angle," ").concat(a?"".concat(a.x," ").concat(a.y):"0 0");break;case SVGTransform.SVG_TRANSFORM_SKEWX:i="skewX",n=""+t.angle,!a||0===r.index&&0===a.y||(s={x:a.y*o.c*-1,y:0});break;case SVGTransform.SVG_TRANSFORM_SKEWY:i="skewY",n=""+t.angle,!a||0===r.index&&0===a.x||(s={x:0,y:a.x*o.b*-1});break;default:return}void 0===e[i]&&(e[i]=[]);var l=e[i].findIndex(function(e){return e.index===r.index});-1!==l?(e[i][l].value=n,e[i][l].transformOrigin=s):e[i].push({index:r.index,value:n,transformOrigin:s})})}},m=je(e.transform),g=Array.isArray(m),b=0;for(m=g?m:m[Symbol.iterator]();;){var k;if("break"===y())break}}delete e.transform,delete e["transform-origin"];var S=function(i){h.push(i);var c=e[i],f=void 0;switch(i){case"rotate":case"scale":case"skewX":case"skewY":case"translate":(f=new ne).attributeName="transform",f.baseFrom=w.typeAsValue(i),f.setType(i);break;default:(f=new ie).attributeName=i,f.baseFrom=Ie.optionalAsString(t,"".concat(i,".baseVal.valueAsString"))||Be.cssAttribute(t,i)}var v=B["animation-timing-function"][j],p=B["animation-direction"][j],y=[],m=[],g=[];je(c);for(var b=function(e){if(y.push(c[e].index),m.push(c[e].value),e<c.length-1){var t=r["animation-timing-function"]&&r["animation-timing-function"].find(function(t){return t.index===c[e].index});g.push(t?t.value:v)}var i=c[e].transformOrigin;i&&D.asAnimateTransform(f)&&(void 0===f.transformOrigin&&(f.transformOrigin=[]),f.transformOrigin[e]=i)},k=0;k<c.length;k++)b(k);a(f,s,u),f.paused=n,f.duration=W,g.every(function(e){return"linear"===e})?(f.values=m,f.keyTimes=y):function(){for(var e=[],r=[],a=[],n=0;n<g.length;n++){if($[g[n]])g[n]=$[g[n]];else if(g[n].startsWith("step")){0===n&&""===m[n]&&f.baseFrom&&(m[n]=f.baseFrom);var s=ie.toStepFractionList(i,y,m,g[n],n,N(),G(t));if(s){e.push.apply(e,d(s[0])),r.push.apply(r,d(s[1])),s[0].forEach(function(){return a.push($.step)});continue}g[n]=$.linear}else{var o=Xe.exec(g[n]);g[n]=o?"".concat(o[1]," ").concat(o[2]," ").concat(o[3]," ").concat(o[4]):$.ease}e.push(y[n]),r.push(m[n]),a.push(g[n])}e.push(y.pop()),r.push(m.pop()),f.values=r,f.keyTimes=e,f.keySplines=a}(),0!==f.keyTimes[0]&&Ie.isString(f.baseFrom)&&(f.keyTimes.unshift(0),f.values.unshift(f.baseFrom),f.keySplines&&f.keySplines.unshift(v)),f.iterationCount="infinite"!==o?parseFloat(o):-1,f.fillForwards="forwards"===l||"both"===l,f.fillBackwards="backwards"===l||"both"===l,f.reverse=p.endsWith("reverse"),f.alternate=(-1===f.iterationCount||f.iterationCount>1)&&p.startsWith("alternate"),I.push(f)};for(var A in e)S(A)}()}L.reverse();for(var U=0;U<I.length;U++){I[U].setGroupSiblings(L)}}for(var Y=0;Y<r.length;Y++){r[Y].parent=this}return r}},{key:"name",set:function(e){this._name=e},get:function(){return void 0===this._name&&(this._name=D.setName(this.element)),this._name}},{key:"transforms",get:function(){return void 0===this._transforms&&(this._transforms=this.getTransforms()),this._transforms}},{key:"animations",get:function(){return void 0===this._animations&&(this._animations=this.getAnimations()),this._animations}},{key:"visible",set:function(e){F(this.element,e)},get:function(){return P(this.element)}},{key:"opacity",set:function(e){O(this.element,e)},get:function(){return Be.cssAttribute(this.element,"opacity")||"1"}}]),r}()},We=squared.lib.dom;function De(e){var t=e.parentElement instanceof HTMLElement;return"svg"===e.tagName&&(We.isUserAgent(4)&&!t||We.isUserAgent(16)&&t)}var Ue=function(e){return function(t){function r(){return a(this,r),c(this,u(r).apply(this,arguments))}return l(r,e),s(r,[{key:"setRect",value:function(){var e=this.x,t=this.y,r=this.width,i=this.height,a=this.parent;a&&(e=a.refitX(e),t=a.refitY(t),r=a.refitSize(r),i=a.refitSize(i)),this.setBaseValue("x",e),this.setBaseValue("y",t),this.setBaseValue("width",r),this.setBaseValue("height",i)}},{key:"_getElement",value:function(){switch(this.element.tagName){case"svg":case"use":case"image":return this.element;default:return null}}},{key:"x",set:function(e){this._x=e},get:function(){if(void 0!==this._x)return this._x;var e=this._getElement();return e?e.x.baseVal.value:0}},{key:"y",set:function(e){this._y=e},get:function(){if(void 0!==this._y)return this._y;var e=this._getElement();return e?e.y.baseVal.value:0}},{key:"width",set:function(e){this._width=e},get:function(){if(void 0!==this._width)return this._width;var e=this._getElement();return e?De(e)?e.getBoundingClientRect().width:e.width.baseVal.value:0}},{key:"height",set:function(e){this._height=e},get:function(){if(void 0!==this._height)return this._height;var e=this._getElement();return e?De(e)?e.getBoundingClientRect().height:e.height.baseVal.value:0}}]),r}()},Ye=squared.lib.dom,He=squared.lib.util;function Ke(e,t){var r=x.URL.exec(Ye.cssInheritAttribute(e,"fill"));if(r){if(t&&t.definitions.pattern.has(r[1]))return t.definitions.pattern.get(r[1]);var i=document.getElementById(r[1].substring(1));if(i instanceof SVGPatternElement)return i}}var Ze=function(e){function t(e){var r;return a(this,t),(r=c(this,u(t).call(this))).element=e,r.aspectRatio={x:0,y:0,width:0,height:0,position:{x:0,y:0},parent:{x:0,y:0},unit:1},r._clipRegion=[],r}return l(t,squared.lib.base.Container),s(t,[{key:"append",value:function(e,r){return e.parent=this,e.viewport=r||this.getViewport(),v(u(t.prototype),"append",this).call(this,e)}},{key:"build",value:function(e,t,r){void 0===r&&(r=this.element),this.clear();for(var i=this.getViewport(),a=!1,n=0;n<r.children.length;n++){var s=r.children[n],o=void 0;if(V.svg(s))o=new squared.svg.Svg(s,!1),this.setAspectRatio(o,s.viewBox.baseVal),a=!0;else if(V.g(s))o=new squared.svg.SvgG(s),this.setAspectRatio(o);else if(V.use(s)){var l=B(s);if(l)if(V.symbol(l))o=new squared.svg.SvgUseSymbol(s,l),this.setAspectRatio(o,l.viewBox.baseVal),a=!0;else if(V.image(l))o=new squared.svg.SvgImage(s,l);else if(V.shape(l)){var u=Ke(s,i);u?(o=new squared.svg.SvgUsePattern(s,l,u),this.setAspectRatio(o)):o=new squared.svg.SvgUse(s,l)}}else if(V.image(s))o=new squared.svg.SvgImage(s);else if(V.shape(s)){var h=Ke(s,i);h?(o=new squared.svg.SvgShapePattern(s,h),this.setAspectRatio(o)):o=new squared.svg.SvgShape(s)}o&&(this.append(o,i),o.build(e,t))}if(D.asSvg(this)&&this.documentRoot)(this.aspectRatio.x<0||this.aspectRatio.y<0)&&this.clipViewBox(this.aspectRatio.x,this.aspectRatio.y,this.aspectRatio.width,this.aspectRatio.height,!0);else if(a&&this.hasViewBox()&&(0!==this.aspectRatio.x||0!==this.aspectRatio.y)){var c=D.toBoxRect(this.getPathAll(!1)),f=this.refitX(this.aspectRatio.x),v=this.refitY(this.aspectRatio.y);(c.left<f||c.top<v)&&this.clipViewBox(c.left,c.top,this.refitSize(this.aspectRatio.width),this.refitSize(this.aspectRatio.height))}}},{key:"hasViewBox",value:function(){return D.asSvg(this)&&!!this.element.viewBox.baseVal||D.asUseSymbol(this)&&!!this.symbolElement.viewBox.baseVal}},{key:"clipViewBox",value:function(e,t,r,i){this.clipRegion=arguments.length>4&&void 0!==arguments[4]&&arguments[4]?D.drawRect(r-e,i-t,e<0?-1*e:0,t<0?-1*t:0):D.drawRect(r,i,e,t)}},{key:"synchronize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.each(function(t){return t.synchronize(e)})}},{key:"refitX",value:function(e){return(e-this.aspectRatio.x)*this.aspectRatio.unit-this.aspectRatio.parent.x+this.aspectRatio.position.x}},{key:"refitY",value:function(e){return(e-this.aspectRatio.y)*this.aspectRatio.unit-this.aspectRatio.parent.y+this.aspectRatio.position.y}},{key:"refitSize",value:function(e){return e*this.aspectRatio.unit}},{key:"refitPoints",value:function(e){for(var t=Array.isArray(i=e),r=0,i=t?i:i[Symbol.iterator]();;){var a;if(t){if(r>=i.length)break;a=i[r++]}else{if((r=i.next()).done)break;a=r.value}var n=a;n.x=this.refitX(n.x),n.y=this.refitY(n.y),void 0!==n.rx&&void 0!==n.ry&&(n.rx*=this.aspectRatio.unit,n.ry*=this.aspectRatio.unit)}return e}},{key:"requireRefit",value:function(){return 0!==this.aspectRatio.x||0!==this.aspectRatio.y||0!==this.aspectRatio.position.x||0!==this.aspectRatio.position.y||0!==this.aspectRatio.parent.x||0!==this.aspectRatio.parent.y||1!==this.aspectRatio.unit}},{key:"getPathAll",value:function(){var e=[],t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.cascade():this,r=Array.isArray(t),i=0;for(t=r?t:t[Symbol.iterator]();;){var a;if(r){if(i>=t.length)break;a=t[i++]}else{if((i=t.next()).done)break;a=i.value}var n=a;D.isShape(n)&&n.path&&n.path.value&&e.push(n.path.value)}return e}},{key:"getViewport",value:function(){return this.viewport||(D.asSvg(this)?this:void 0)}},{key:"setAspectRatio",value:function(e,t){var r=function(e){for(;e;){if(e.hasViewBox())return e;e=e.parent}}(this);if(r){var i=e.aspectRatio;if(t&&(He.cloneObject(t,i),i.width>0&&i.height>0)){var a=i.width/i.height,n=r.aspectRatio.width||r.viewBox.width,s=r.aspectRatio.height||r.viewBox.height,o=n/s;o>a?i.position.x=(n-s*a)/2:o<a&&(i.position.y=(s-n*(1/a))/2),i.unit=Math.min(n/i.width,s/i.height)}i.parent.x=r.aspectRatio.x+r.aspectRatio.x*(r.aspectRatio.unit-1),i.position.x*=r.aspectRatio.unit,i.position.x+=r.aspectRatio.position.x-r.aspectRatio.parent.x,i.parent.y=r.aspectRatio.y+r.aspectRatio.y*(r.aspectRatio.unit-1),i.position.y*=r.aspectRatio.unit,i.position.y+=r.aspectRatio.position.y-r.aspectRatio.parent.y,i.unit*=r.aspectRatio.unit}}},{key:"clipRegion",set:function(e){""!==e?this._clipRegion.push(e):this._clipRegion.length=0},get:function(){return this._clipRegion.length?this._clipRegion.join(";"):""}},{key:"instanceType",get:function(){return 2}}]),t}(),$e=squared.lib.color,Qe=squared.lib.dom,Je=squared.lib.util;function et(e){var t=[];return Array.from(e.getElementsByTagName("stop")).forEach(function(e){var r=$e.parseRGBA(Qe.cssAttribute(e,"stop-color"),Qe.cssAttribute(e,"stop-opacity"));r&&t.push({color:r.valueRGBA,offset:Qe.cssAttribute(e,"offset"),opacity:r.alpha})}),t}function tt(e){for(var t={},r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];for(var n=0;n<i.length;n++){var s=i[n];e[s]&&e[s].baseVal&&(t[s]=e[s].baseVal.value,t["".concat(s,"AsString")]=e[s].baseVal.valueAsString)}return t}var rt=function(e){function t(e){var r,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return a(this,t),(r=c(this,u(t).call(this,e))).element=e,r.documentRoot=i,r.definitions={clipPath:new Map,pattern:new Map,gradient:new Map},r.init(),r}return l(t,Me(Ue(Y(qe(Ze))))),s(t,[{key:"build",value:function(e,r){this.setRect(),v(u(t.prototype),"build",this).call(this,e,r)}},{key:"synchronize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;!this.documentRoot&&this.animations.length&&this.mergeAnimations(this.getAnimateViewRect(),this.getAnimateTransform(),e),v(u(t.prototype),"synchronize",this).call(this,e)}},{key:"init",value:function(){var e=this;this.documentRoot&&Je.cloneObject(this.element.viewBox.baseVal,this.aspectRatio);[this.element].concat(d(Array.from(this.element.querySelectorAll("defs")))).forEach(function(t){t.querySelectorAll(":scope > set, :scope > animate, :scope > animateTransform, :scope > animateMotion").forEach(function(t){var r=B(t,e.documentRoot?e.element:void 0);r&&(t.parentElement&&t.parentElement.removeChild(t),r.appendChild(t))}),t.querySelectorAll("clipPath, pattern, linearGradient, radialGradient").forEach(function(t){if(t.id){var r="#".concat(t.id);V.clipPath(t)?e.definitions.clipPath.set(r,t):V.pattern(t)?e.definitions.pattern.set(r,t):V.linearGradient(t)?e.definitions.gradient.set(r,Object.assign({type:"linear",element:t,spreadMethod:t.spreadMethod.baseVal,colorStop:et(t)},tt(t,"x1","x2","y1","y2"))):V.radialGradient(t)&&e.definitions.gradient.set(r,Object.assign({type:"radial",element:t,spreadMethod:t.spreadMethod.baseVal,colorStop:et(t)},tt(t,"cx","cy","r","fx","fy","fr")))}})})}},{key:"viewBox",get:function(){return this.element.viewBox.baseVal?this.element.viewBox.baseVal:Qe.getDOMRect(this.element)}},{key:"instanceType",get:function(){return 18}}]),t}(),it=function(){function e(t){a(this,e),this.element=t}return s(e,[{key:"build",value:function(e,t,r){}},{key:"synchronize",value:function(e){}},{key:"instanceType",get:function(){return 4}}]),e}(),at=squared.lib.color,nt=squared.lib.dom,st=squared.lib.util,ot={url:x.URL,inset:RegExp("inset\\(".concat(st.REGEXP_STRING.LENGTH,"\\s?").concat(st.REGEXP_STRING.LENGTH,"?\\s?").concat(st.REGEXP_STRING.LENGTH,"?\\s?").concat(st.REGEXP_STRING.LENGTH,"?\\)")),polygon:/polygon\(([^)]+)\)/,circle:RegExp("circle\\(".concat(st.REGEXP_STRING.LENGTH,"(?: at ").concat(st.REGEXP_STRING.LENGTH," ").concat(st.REGEXP_STRING.LENGTH,")?\\)")),ellipse:RegExp("ellipse\\(".concat(st.REGEXP_STRING.LENGTH," ").concat(st.REGEXP_STRING.LENGTH,"(?: at ").concat(st.REGEXP_STRING.LENGTH," ").concat(st.REGEXP_STRING.LENGTH,")?\\)"))},lt=function(e){return function(r){function i(){return a(this,i),c(this,u(i).apply(this,arguments))}return l(i,e),s(i,[{key:"setPaint",value:function(e){var r=this;this.resetPaint(),this.setAttribute("color",!0),this._setColor("fill"),this.setAttribute("fill-opacity"),this.setAttribute("fill-rule"),this._setColor("stroke"),this.setAttribute("stroke-opacity"),this.setAttribute("stroke-width"),this.setAttribute("stroke-linecap"),this.setAttribute("stroke-linejoin"),this.setAttribute("stroke-miterlimit"),this.setAttribute("stroke-dasharray"),this.setAttribute("stroke-dashoffset"),this.setAttribute("clip-rule");var i=this._getAttribute("clip-path",!1,!1);if(""!==i)for(var a in ot){var n=ot[a].exec(i);if(n){if("url"===a)return void(this.clipPath=n[1]);if(e&&e.length){var s=function(){var t=function(e,t){return st.convertPercentPX(e,0===t?l:u,i,s)},i=N(),s=G(r.element),o=D.toBoxRect(e),l=o.right-o.left,u=o.bottom-o.top,h=r.parent;switch(a){case"inset":var c=0,f=0,v=t(n[1],1),p=0;n[4]?(c=o.left+t(n[4],0),f=o.right-t(n[2],0),p=o.bottom-t(n[3],1)):n[2]?(c=t(n[2],0),f=o.right-c,p=o.bottom-(n[3]?t(n[3],1):v),c+=o.left):(c=o.left+v,f=o.right-v,p=o.bottom-v);var y=[{x:c,y:v+=o.top},{x:f,y:v},{x:f,y:p},{x:c,y:p}];return h&&h.refitPoints(y),r.clipPath=D.drawPolygon(y),{v:void 0};case"polygon":var d=n[1].split(",").map(function(e){var r=m(e.trim().split(" ").map(function(e,r){return t(e,r)}),2),i=r[0],a=r[1];return{x:i+=o.left,y:a+=o.top}});return h&&h.refitPoints(d),r.clipPath=D.drawPolygon(d),{v:void 0};default:if("circle"===a||"ellipse"===a){var g,b;"circle"===a?b=g=t(n[1],l<u?0:1):(g=t(n[1],0),b=t(n[2],1));var k=o.left,S=o.top;if(n.length>=4){var A=l<u?0:1;k+=t(n[n.length-2],A),S+=t(n[n.length-1],A)}h&&(k=h.refitX(k),S=h.refitX(S),g=h.refitSize(g),b=h.refitSize(b)),r.clipPath=D.drawEllipse(k,S,g,b)}return{v:void 0}}}();if("object"===t(s))return s.v}}}}},{key:"setAttribute",value:function(e){var t=this._getAttribute(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]);st.isString(t)&&(this[st.convertCamelCase(e)]=t)}},{key:"resetPaint",value:function(){this.fill="black",this.fillPattern="",this.fillOpacity="1",this.fillRule="nonzero",this.stroke="",this.strokeWidth="1",this.strokePattern="",this.strokeOpacity="1",this.strokeLinecap="butt",this.strokeLinejoin="miter",this.strokeMiterlimit="4",this.strokeDashArray="",this.strokeDashOffset="0",this.color="",this.clipPath="",this.clipRule=""}},{key:"_setColor",value:function(e){var t=this._getAttribute(e),r=x.URL.exec(t);if(r)this["".concat(e,"Pattern")]=r[1];else if(""!==t){var i;switch(t.toLowerCase()){case"none":case"transparent":case"rgba(0, 0, 0, 0)":this[e]="";break;case"currentcolor":i=at.parseRGBA(this.color||nt.cssAttribute(this.element,e,!0));break;default:i=at.parseRGBA(t)}i&&(this[e]=i.valueRGB)}}},{key:"_getAttribute",value:function(e){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=nt.cssAttribute(this.element,e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]);if(t&&!st.isString(r)){if(this.patternParent)switch(e){case"fill-opacity":case"stroke-opacity":break;default:return r}for(var i=this.useParent||this.parent;i&&(r=nt.cssAttribute(i.element,e),!st.isString(r));)i=i.parent}return r}}]),i}()},ut=function(e){function t(e){var r;return a(this,t),(r=c(this,u(t).call(this,e))).element=e,r}return l(t,lt(qe(Ze))),s(t,[{key:"build",value:function(e,r){v(u(t.prototype),"build",this).call(this,e,r),this.setPaint(this.getPathAll())}},{key:"instanceType",get:function(){return 34}}]),t}(),ht=squared.lib.util,ct=function(e){function t(e,r){var i;return a(this,t),(i=c(this,u(t).call(this,e))).element=e,i.imageElement=null,i.__get_transforms=!1,i.__get_animations=!1,r&&(i.imageElement=r),i}return l(t,Ue(Y(qe(it)))),s(t,[{key:"build",value:function(){this.setRect()}},{key:"extract",value:function(e){var t=e?D.filterTransforms(this.transforms,e):this.transforms,r=this.x,i=this.y,a=this.width,n=this.height;if(t.length){t.reverse();for(var s=0;s<t.length;s++){var o=t[s],l=o.matrix,u=r;switch(r=E.applyX(l,u,i),i=E.applyY(l,u,i),o.type){case SVGTransform.SVG_TRANSFORM_SCALE:a*=l.a,n*=l.d;break;case SVGTransform.SVG_TRANSFORM_ROTATE:0!==o.angle&&(l.a<0&&(r+=l.a*a),l.c<0&&(r+=l.c*a),l.b<0&&(i+=l.b*n),l.d<0&&(i+=l.d*n),void 0!==this.rotateAngle?this.rotateAngle+=o.angle:this.rotateAngle=o.angle)}}this.transformed=t}this.parent&&(r=this.parent.refitX(r),i=this.parent.refitY(i),a=this.parent.refitSize(a),n=this.parent.refitSize(n)),this.translationOffset&&(r+=this.translationOffset.x,i+=this.translationOffset.y),this.setBaseValue("x",r),this.setBaseValue("y",i),this.setBaseValue("width",a),this.setBaseValue("height",n)}},{key:"x",set:function(e){y(u(t.prototype),"x",e,this,!0)},get:function(){var e=v(u(t.prototype),"x",this);return 0===e&&this.imageElement?this.imageElement.x.baseVal.value:e}},{key:"y",set:function(e){y(u(t.prototype),"y",e,this,!0)},get:function(){var e=v(u(t.prototype),"y",this);return 0===e&&this.imageElement?this.imageElement.y.baseVal.value:e}},{key:"width",set:function(e){y(u(t.prototype),"width",e,this,!0)},get:function(){var e=v(u(t.prototype),"width",this);return 0===e&&this.imageElement?this.imageElement.width.baseVal.value:e}},{key:"height",set:function(e){y(u(t.prototype),"height",e,this,!0)},get:function(){var e=v(u(t.prototype),"height",this);return 0===e&&this.imageElement?this.imageElement.height.baseVal.value:e}},{key:"href",get:function(){var e=this.imageElement||this.element;return V.image(e)?ht.resolvePath(e.href.baseVal):""}},{key:"transforms",get:function(){var e=v(u(t.prototype),"transforms",this);return this.__get_transforms||(this.imageElement&&e.push.apply(e,d(this.getTransforms(this.imageElement))),this.__get_transforms=!0),e}},{key:"animations",get:function(){var e=v(u(t.prototype),"animations",this);return this.__get_animations||(this.imageElement&&e.push.apply(e,d(this.getAnimations(this.imageElement))),this.__get_animations=!0),e}},{key:"instanceType",get:function(){return 4100}}]),t}(),ft=function(e){function t(e){var r;return a(this,t),(r=c(this,u(t).call(this,e))).element=e,r.name="",r.value="",r.transformed=null,r.init(),r}return l(t,lt(Y(it))),s(t,[{key:"draw",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r||(this.transformed=null);var i=this.parent,a=this.patternParent,n=this.element,s=!!i&&i.requireRefit(),o=!!this.patternParent&&2===this.patternParent.patternContentUnits,l="";if(V.path(n)){if(l=this.getBaseValue("d"),e&&e.length||s||o){var u=D.getPathCommands(l);if(u.length){var h=D.getPathPoints(u);if(h.length){if(o&&a.patternRefitPoints(h),e&&e.length){if("function"==typeof t){var c=m(t.call(this,n,e),2);this.transformResidual=c[0],e=c[1]}e.length&&(h=this.transformPoints(e,h),this.transformed=e)}s&&i.refitPoints(h),l=D.drawPath(D.setPathPoints(u,h))}}}}else if(V.line(n)){var f=[{x:this.getBaseValue("x1"),y:this.getBaseValue("y1")},{x:this.getBaseValue("x2"),y:this.getBaseValue("y2")}];if(o&&a.patternRefitPoints(f),e&&e.length){if("function"==typeof t){var v=m(t.call(this,n,e),2);this.transformResidual=v[0],e=v[1]}e.length&&(f=this.transformPoints(e,f),this.transformed=e)}s&&i.refitPoints(f),l=D.drawPolyline(f)}else if(V.circle(n)||V.ellipse(n)){var p,y;V.ellipse(n)?(p=this.getBaseValue("rx"),y=this.getBaseValue("ry")):y=p=this.getBaseValue("r");var d=[{x:this.getBaseValue("cx"),y:this.getBaseValue("cy"),rx:p,ry:y}];if(o&&a.patternRefitPoints(d),e&&e.length){if("function"==typeof t){var g=m(t.call(this,n,e,p,y),2);this.transformResidual=g[0],e=g[1]}e.length&&(d=this.transformPoints(e,d),this.transformed=e)}s&&i.refitPoints(d);var b=d[0];l=D.drawEllipse(b.x,b.y,b.rx,b.ry)}else if(V.rect(n)){var k=this.getBaseValue("x"),S=this.getBaseValue("y"),A=this.getBaseValue("width"),T=this.getBaseValue("height");if(e&&e.length){var R=[{x:k,y:S},{x:k+A,y:S},{x:k+A,y:S+T},{x:k,y:S+T}];if(o&&a.patternRefitPoints(R),"function"==typeof t){var x=m(t.call(this,n,e),2);this.transformResidual=x[0],e=x[1]}e.length&&(R=this.transformPoints(e,R),this.transformed=e),s&&i.refitPoints(R),l=D.drawPolygon(R)}else o&&(k=a.patternRefitX(k),S=a.patternRefitY(S),A=a.patternRefitX(A),T=a.patternRefitY(T)),s&&(k=i.refitX(k),S=i.refitY(S),A=i.refitSize(A),T=i.refitSize(T)),l=D.drawRect(A,T,k,S)}else if(V.polygon(n)||V.polyline(n)){var _=this.getBaseValue("points");if(o&&a.patternRefitPoints(_),e&&e.length){if("function"==typeof t){var E=m(t.call(this,n,e),2);this.transformResidual=E[0],e=E[1]}e.length&&(_=this.transformPoints(e,_),this.transformed=e)}s&&(null===this.transformed&&(_=D.clonePoints(_)),i.refitPoints(_)),l="polygon"===n.tagName?D.drawPolygon(_):D.drawPolyline(_)}return r||(this.value=l,this.setPaint([l])),l}},{key:"transformPoints",value:function(e,t,r){return D.applyTransforms(e,t,w.origin(this.element),r)}},{key:"init",value:function(){var e=this.element;V.path(e)?this.setBaseValue("d"):V.line(e)?(this.setBaseValue("x1"),this.setBaseValue("y1"),this.setBaseValue("x2"),this.setBaseValue("y2")):V.rect(e)?(this.setBaseValue("x"),this.setBaseValue("y"),this.setBaseValue("width"),this.setBaseValue("height")):V.circle(e)?(this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("r")):V.ellipse(e)?(this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("rx"),this.setBaseValue("ry")):(V.polygon(e)||V.polyline(e))&&this.setBaseValue("points",D.clonePoints(e.points))}},{key:"transforms",get:function(){return void 0===this._transforms&&(this._transforms=D.filterTransforms(w.parse(this.element)||D.convertTransforms(this.element.transform.baseVal))),this._transforms}},{key:"instanceType",get:function(){return 1028}}],[{key:"build",value:function(e,t,r,i){return r&&r[e.element.tagName]&&(t=D.filterTransforms(t,r[e.element.tagName])),e.draw(t,i),e}},{key:"getCenter",value:function(e){for(var t=e[0].x,r=e[0].y,i=t,a=r,n=1;n<e.length;n++){var s=e[n];s.x<t?t=s.x:s.x>i&&(i=s.x),s.y<r?r=s.y:s.y>i&&(a=s.y)}return{x:(t+i)/2,y:(r+a)/2}}}]),t}(),vt=function(e){function t(e,r){var i;return a(this,t),(i=c(this,u(t).call(this,e))).element=e,i.patternElement=r,i}return l(t,qe(Ze)),s(t,[{key:"build",value:function(e,r){v(u(t.prototype),"build",this).call(this,e,r,this.patternElement)}},{key:"animations",get:function(){return[]}},{key:"instanceType",get:function(){return 130}}]),t}(),pt=function(e){function t(e){var r,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return a(this,t),r=c(this,u(t).call(this,e)),i&&r.setPath(),r}return l(t,Me(qe(it))),s(t,[{key:"setPath",value:function(){this.path=new ft(this.element)}},{key:"build",value:function(e,t){this.path&&(this.path.parent=this.parent,ft.build(this.path,this.transforms,e,t))}},{key:"synchronize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;this.path&&this.animations.length&&this.mergeAnimations(this.getAnimateShape(t||this.element),t?[]:this.getAnimateTransform(),e,this.path)}},{key:"path",set:function(e){this._path=e,e&&(e.name=this.name)},get:function(){return this._path}},{key:"instanceType",get:function(){return 2052}}]),t}(),yt=squared.lib.util;function mt(e){return yt.isPercent(e)?parseFloat(e)/100:parseFloat(e)}var dt=function(e){function t(e,r){var i;a(this,t),(i=c(this,u(t).call(this,e))).element=e,i.patternElement=r,i.__get_transforms=!1;var n=i.patternElement.attributes.getNamedItem("patternUnits"),s=i.patternElement.attributes.getNamedItem("patternContentUnits");return i.patternUnits=n&&"userSpaceOnUse"===n.value?1:2,i.patternContentUnits=s&&"objectBoundingBox"===s.value?2:1,i}return l(t,lt(Y(qe(Ze)))),s(t,[{key:"build",value:function(e,t,r){void 0===r&&(r=this.element);var i=ft.build(new ft(r),[],e);if(i.value){this.clipRegion=i.value,i.clipPath&&(this.clipRegion=i.clipPath);var a=[i.value];this.setPaint(a),this.drawRegion=D.toBoxRect(a);var n=2===this.patternUnits,s=this.patternWidth,o=this.patternHeight,l=this.tileWidth,u=this.tileHeight,h=n?this.drawRegion.left:0,c=n?this.drawRegion.top:0,f=this.offsetX%l,v=this.offsetY%u,p=this.drawRegion.right-(n?this.drawRegion.left:0),y=this.drawRegion.bottom-(n?this.drawRegion.top:0),m=0;for(0!==f&&(f=l-f,p+=l),0!==v&&(v=u-v,y+=u);y>0;){var d=c+m*u-v,g=p,b=0;do{var k=h+b*l-f,S=new vt(r,this.patternElement);S.build(e,t);var A=S.cascade(),T=Array.isArray(A),R=0;for(A=T?A:A[Symbol.iterator]();;){var x;if(T){if(R>=A.length)break;x=A[R++]}else{if((R=A.next()).done)break;x=R.value}var _=x;D.isShape(_)&&_.path&&(_.path.patternParent=this,2===this.patternContentUnits?_.path.refitBaseValue(k/s,d/o):_.path.refitBaseValue(k,d),ft.build(_.path,_.transforms,e,t),_.path.fillOpacity=""+parseFloat(_.path.fillOpacity)*parseFloat(this.fillOpacity),_.path.clipPath=D.drawRect(l,u,k,d)+(""!==_.path.clipPath?";".concat(_.path.clipPath):""))}this.append(S),g-=l,b++}while(g>0);m++,y-=u}if(""!==this.stroke&&parseFloat(this.strokeWidth)>0){i.fill="",i.fillOpacity="0",i.stroke=this.stroke,i.strokeWidth=this.strokeWidth;var E=new pt(r,!1);E.path=i,this.append(E)}}}},{key:"patternRefitX",value:function(e){return this.drawRegion?e*this.patternWidth:e}},{key:"patternRefitY",value:function(e){return this.drawRegion?e*this.patternHeight:e}},{key:"patternRefitPoints",value:function(e){if(this.drawRegion)for(var t=this.patternWidth,r=this.patternHeight,i=Array.isArray(n=e),a=0,n=i?n:n[Symbol.iterator]();;){var s;if(i){if(a>=n.length)break;s=n[a++]}else{if((a=n.next()).done)break;s=a.value}var o=s;if(o.x*=t,o.y*=r,void 0!==o.rx&&void 0!==o.ry)if(o.rx===o.ry){var l=Math.min(t,r);o.rx*=l,o.ry*=l}else o.rx*=t,o.ry*=r}return e}},{key:"patternWidth",get:function(){return this.drawRegion?this.drawRegion.right-this.drawRegion.left:0}},{key:"patternHeight",get:function(){return this.drawRegion?this.drawRegion.bottom-this.drawRegion.top:0}},{key:"transforms",get:function(){if(!this.__get_transforms){var e=D.convertTransforms(this.patternElement.patternTransform.baseVal);if(e.length){for(var r,i=w.rotateOrigin(this.patternElement,"patternTransform"),a=this.patternWidth/2,n=this.patternHeight/2,s=Array.isArray(l=e),o=0,l=s?l:l[Symbol.iterator]();;){var h;if(s){if(o>=l.length)break;h=l[o++]}else{if((o=l.next()).done)break;h=o.value}var c=h;switch(c.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:break;case SVGTransform.SVG_TRANSFORM_ROTATE:for(;i.length;){var f=i.shift();if(f.angle===c.angle){c.origin={x:a+f.x,y:n+f.y};break}}if(c.origin)break;default:c.origin={x:a,y:n}}}(r=v(u(t.prototype),"transforms",this)).push.apply(r,d(D.filterTransforms(e)))}this.__get_transforms=!0}return v(u(t.prototype),"transforms",this)}},{key:"offsetX",get:function(){var e;return 2===this.patternUnits&&(e=this.patternWidth*mt(this.patternElement.x.baseVal.valueAsString)),e||this.patternElement.x.baseVal.value}},{key:"offsetY",get:function(){var e;return 2===this.patternUnits&&(e=this.patternHeight*mt(this.patternElement.y.baseVal.valueAsString)),e||this.patternElement.y.baseVal.value}},{key:"tileWidth",get:function(){var e;return 2===this.patternUnits&&(e=this.patternWidth*mt(this.patternElement.width.baseVal.valueAsString)),e||this.patternElement.width.baseVal.value}},{key:"tileHeight",get:function(){var e;return 2===this.patternUnits&&(e=this.patternHeight*mt(this.patternElement.height.baseVal.valueAsString)),e||this.patternElement.height.baseVal.value}},{key:"instanceType",get:function(){return 258}}]),t}(),gt=function(e){function t(e,r){var i;return a(this,t),(i=c(this,u(t).call(this,e,!1))).element=e,i.shapeElement=r,i.__get_transforms=!1,i.__get_animations=!1,i.setPath(),i}return l(t,lt(Ue(Y(pt)))),s(t,[{key:"setPath",value:function(){this.path=new ft(this.shapeElement),this.path.useParent=this}},{key:"build",value:function(e,r){v(u(t.prototype),"build",this).call(this,e,r),this.setPaint(this.path?[this.path.value]:void 0)}},{key:"synchronize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.animations.length&&this.mergeAnimations(this.getAnimateViewRect(),this.getAnimateTransform(),e),v(u(t.prototype),"synchronize",this).call(this,e,this.shapeElement)}},{key:"transforms",get:function(){var e=v(u(t.prototype),"transforms",this);return this.__get_transforms||(e.push.apply(e,d(this.getTransforms(this.shapeElement))),this.__get_transforms=!0),e}},{key:"animations",get:function(){var e=v(u(t.prototype),"animations",this);return this.__get_animations||(e.push.apply(e,d(this.getAnimations(this.shapeElement))),this.__get_animations=!0),e}},{key:"instanceType",get:function(){return 10244}}]),t}(),bt=function(e){function t(e,r,i){var n;return a(this,t),(n=c(this,u(t).call(this,e,i))).element=e,n.shapeElement=r,n}return l(t,Me(Ue(dt))),s(t,[{key:"build",value:function(e,r){v(u(t.prototype),"build",this).call(this,e,r,this.shapeElement)}},{key:"synchronize",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=[this.animations.filter(function(t){return void 0===e.validateBaseValue(t.attributeName,0)||"x"===t.attributeName||"y"===t.attributeName}),this.getAnimateTransform()],a=i[0],n=i[1];(a.length||n.length)&&this.mergeAnimations(this.getAnimateViewRect(a),n,r),v(u(t.prototype),"synchronize",this).call(this,r)}},{key:"instanceType",get:function(){return 514}}]),t}(),kt=squared.lib.dom,St=function(e){function t(e,r){var i;return a(this,t),(i=c(this,u(t).call(this,e))).element=e,i.symbolElement=r,i}return l(t,lt(Me(Ue(Y(qe(Ze)))))),s(t,[{key:"build",value:function(e,r){this.setRect(),v(u(t.prototype),"build",this).call(this,e,r,this.symbolElement);var i=this.getBaseValue("x",0),a=this.getBaseValue("y",0);if(0!==i||0!==a){var n={x:i,y:a};this.cascade().forEach(function(e){return e.translationOffset=n})}this.setPaint(this.getPathAll())}},{key:"synchronize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.animations.length&&this.mergeAnimations(this.getAnimateViewRect(),this.getAnimateTransform(),e),v(u(t.prototype),"synchronize",this).call(this,e)}},{key:"viewBox",get:function(){return this.symbolElement.viewBox.baseVal?this.symbolElement.viewBox.baseVal:kt.getDOMRect(this.element)}},{key:"instanceType",get:function(){return 66}}]),t}(),At={constant:Q,util:j};e.Svg=rt,e.SvgAnimate=ie,e.SvgAnimateMotion=Oe,e.SvgAnimateTransform=ne,e.SvgAnimation=Z,e.SvgBaseVal=Y,e.SvgBuild=D,e.SvgContainer=Ze,e.SvgElement=it,e.SvgG=ut,e.SvgImage=ct,e.SvgPaint=lt,e.SvgPath=ft,e.SvgPattern=vt,e.SvgShape=pt,e.SvgShapePattern=dt,e.SvgSynchronize=Me,e.SvgUse=gt,e.SvgUsePattern=bt,e.SvgUseSymbol=St,e.SvgView=qe,e.SvgViewRect=Ue,e.lib=At,Object.defineProperty(e,"__esModule",{value:!0})});
