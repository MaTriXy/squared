!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e=e||self).squared=e.squared||{},e.squared.svg={}))}(this,function(e){"use strict";function t(e){this.wrapped=e}function a(e){var a,n;function i(a,n){try{var s=e[a](n),o=s.value,l=o instanceof t;Promise.resolve(l?o.wrapped:o).then(function(e){l?i("next",e):r(s.done?"return":"normal",e)},function(e){i("throw",e)})}catch(e){r("throw",e)}}function r(e,t){switch(e){case"return":a.resolve({value:t,done:!0});break;case"throw":a.reject(t);break;default:a.resolve({value:t,done:!1})}(a=a.next)?i(a.key,a.arg):n=null}this._invoke=function(e,t){return new Promise(function(r,s){var o={key:e,arg:t,resolve:r,reject:s,next:null};n?n=n.next=o:(a=n=o,i(e,t))})},"function"!=typeof e.return&&(this.return=void 0)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,a){return t&&i(e.prototype,t),a&&i(e,a),e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}"function"==typeof Symbol&&Symbol.asyncIterator&&(a.prototype[Symbol.asyncIterator]=function(){return this}),a.prototype.next=function(e){return this._invoke("next",e)},a.prototype.throw=function(e){return this._invoke("throw",e)},a.prototype.return=function(e){return this._invoke("return",e)};function c(e,t){return h(e)||function(e,t){var a=[],n=!0,i=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return a}(e,t)||d()}function f(e){return function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(e){if(Array.isArray(e))return e}function v(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var m=squared.lib.dom,b=squared.lib.util;function p(e){switch(e.tagName){case"path":case"circle":case"ellipse":case"line":case"rect":case"polygon":case"polyline":return!0}return!1}function y(e){return"image"===e.tagName}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=m.cssAttribute(e,"transform-origin");if(""!==a){var n,i,r=e.parentElement;if(r instanceof SVGSVGElement)n=r.viewBox.baseVal.width,i=r.viewBox.baseVal.height;else{if(!(r instanceof SVGGElement&&r.viewportElement instanceof SVGSVGElement))return;n=r.viewportElement.viewBox.baseVal.width,i=r.viewportElement.viewBox.baseVal.height}var s=a.split(" ");1===s.length&&s.push("center"),s=s.slice(0,2);var o={x:null,y:null};if(s.includes("left")?o.x=0:s.includes("right")&&(o.x=n),s.includes("top")?o.y=0:s.includes("bottom")&&(o.y=i),["x","y"].forEach(function(a){if(null===o[a])for(var r=0;r<s.length;r++){var l=s[r];if(""!==l&&("center"===l&&(l="50%"),b.isUnit(l)?o[a]=parseInt(l.endsWith("px")?l:b.convertPX(l,t,b.convertInt(m.getStyle(e).fontSize))):b.isPercent(l)&&(o[a]=("x"===a?n:i)*(parseInt(l)/100)),null!==o[a])){s[r]="";break}}}),o.x||o.y)return o.x=o.x||0,o.y=o.y||0,o}}function S(e,t,a){return e.a*t+e.c*a+e.e}function k(e,t,a){return e.b*t+e.d*a+e.f}function V(e,t){return t*Math.cos(e*Math.PI/180)*-1}function A(e){var t=m.cssAttribute(e,"visibility",!0);return"hidden"!==t&&"collapse"!==t&&"none"!==m.cssAttribute(e,"display",!0)}var x=Object.freeze({isSvgShape:p,isSvgImage:y,createTransformData:function(e){for(var t={operations:[],translateX:0,translateY:0,scaleX:1,scaleY:1,rotateAngle:0,skewX:0,skewY:0,origin:g(e)},a=0;a<e.transform.baseVal.numberOfItems;a++){var n=e.transform.baseVal.getItem(a);if(!t.operations.includes(n.type))switch(n.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:0===n.matrix.e&&0===n.matrix.f||(t.translateX=n.matrix.e,t.translateY=n.matrix.f,t.operations.push(n.type));break;case SVGTransform.SVG_TRANSFORM_SCALE:1===n.matrix.a&&1===n.matrix.d||(t.scaleX=n.matrix.a,t.scaleY=n.matrix.d,t.operations.push(n.type));break;case SVGTransform.SVG_TRANSFORM_ROTATE:if(0!==n.angle){t.rotateAngle=n.angle;var i=e.attributes.getNamedItem("transform");if(i&&i.nodeValue){var r=/rotate\((\d+), (\d+), (\d+)\)/.exec(i.nodeValue);r&&(t.rotateOriginX=parseInt(r[2]),t.rotateOriginY=parseInt(r[3]))}t.matrixRotate=n.matrix,t.operations.push(n.type)}break;case SVGTransform.SVG_TRANSFORM_SKEWX:0!==n.angle&&(t.skewX+=n.angle,t.matrixSkewX=n.matrix,t.operations.push(n.type));break;case SVGTransform.SVG_TRANSFORM_SKEWY:0!==n.angle&&(t.skewY+=n.angle,t.matrixSkewY=n.matrix,t.operations.push(n.type))}}return t},getTransformOrigin:g,applyMatrixX:S,applyMatrixY:k,getRadiusX:function(e,t){return t*Math.sin(e*Math.PI/180)},getRadiusY:V,isVisible:A}),w=squared.lib.color,R=squared.lib.dom,T={},N=function(){function e(){n(this,e)}return r(e,null,[{key:"setName",value:function(e){var t,a="";return e.id?(void 0===T[e.id]&&(a=e.id),t=e.id):t=e.tagName,void 0===T[t]&&(T[t]=0),""!==a?a:"".concat(t,"_").concat(++T[t])}},{key:"applyTransforms",value:function(e,t,a){for(var n=[],i=Array.isArray(s=t),r=0,s=i?s:s[Symbol.iterator]();;){var o;if(i){if(r>=s.length)break;o=s[r++]}else{if((r=s.next()).done)break;o=r.value}n.push({x:o.x,y:o.y})}for(var l=e.numberOfItems-1;l>=0;l--){var u=e.getItem(l),c=0,f=0,h=0,v=0,d=0,m=0;if(a)switch(u.type){case SVGTransform.SVG_TRANSFORM_SCALE:c+=a.x,v+=a.y;break;case SVGTransform.SVG_TRANSFORM_SKEWX:f-=a.y;break;case SVGTransform.SVG_TRANSFORM_SKEWY:h-=a.x;break;case SVGTransform.SVG_TRANSFORM_ROTATE:h-=a.x,f-=a.y,d=a.x+V(u.angle,a.x),m=a.y+V(u.angle,a.y)}for(var b=0;b<n.length;b++){var p=n[b],y=p.x,g=p.y;p.x=S(u.matrix,y+c,g+f)+d,p.y=k(u.matrix,y+h,g+v)+m}}return n}},{key:"toPointList",value:function(e){for(var t=[],a=0;a<e.numberOfItems;a++){var n=e.getItem(a);t.push({x:n.x,y:n.y})}return t}},{key:"toCoordinateList",value:function(e){for(var t,a=[],n=/-?[\d.]+/g;null!==(t=n.exec(e));){var i=parseFloat(t[0]);isNaN(i)||a.push(i)}return a}},{key:"toPathCommandList",value:function(e){var t,a=[],n=/([A-Za-z])([^A-Za-z]+)?/g;for(e=e.trim();null!==(t=n.exec(e))&&(0!==a.length||"M"===t[1].toUpperCase());){t[2]=(t[2]||"").trim();var i=this.toCoordinateList(t[2]),r=a[a.length-1],s=r?r.command.toUpperCase():"",o=r?r.points[r.points.length-1]:void 0,l=void 0,u=void 0,h=void 0,v=void 0,d=void 0;switch(t[1].toUpperCase()){case"M":case"L":if(i.length>=2){i.length=2;break}continue;case"H":if(o&&i.length){i[1]="h"===t[1]?0:o.y,i.length=2;break}continue;case"V":if(o&&i.length){var m=i[0];i[0]="v"===t[1]?0:o.x,i[1]=m,i.length=2;break}continue;case"Z":if(a.length){i.push.apply(i,f(a[0].coordinates)),t[1]="Z";break}continue;case"C":if(i.length>=6){i.length=6;break}continue;case"S":if(i.length>=4&&("C"===s||"S"===s)){i.length=4;break}continue;case"Q":if(i.length>=4){i.length=4;break}continue;case"T":if(i.length>=2&&("Q"===s||"T"===s)){i.length=2;break}continue;case"A":if(i.length>=7){var b=c(i.splice(0,5),5);l=b[0],u=b[1],h=b[2],v=b[3],d=b[4],i.length=2;break}continue;default:continue}if(i.length>1){for(var p=[],y=/[a-z]/.test(t[1]),g=0;g<i.length;g+=2){var S=i[g],k=i[g+1];y&&o&&(S+=o.x,k+=o.y),p.push({x:S,y:k})}a.push({command:t[1],relative:y,coordinates:i,points:p,radiusX:l,radiusY:u,xAxisRotation:h,largeArcFlag:v,sweepFlag:d})}}return a}},{key:"createColorStops",value:function(e){for(var t=[],a=Array.from(e.getElementsByTagName("stop")),n=0;n<a.length;n++){var i=a[n],r=w.parseRGBA(R.cssAttribute(i,"stop-color"),R.cssAttribute(i,"stop-opacity"));r&&r.visible&&t.push({color:r.valueRGBA,offset:R.cssAttribute(i,"offset"),opacity:r.alpha})}return t}},{key:"fromCoordinateList",value:function(e){for(var t=[],a=0;a<e.length;a+=2)t.push({x:e[a],y:e[a+1]});return t.length%2==0?t:[]}},{key:"fromPathCommandList",value:function(e){for(var t="",a=Array.isArray(i=e),n=0,i=a?i:i[Symbol.iterator]();;){var r;if(a){if(n>=i.length)break;r=i[n++]}else{if((n=i.next()).done)break;r=n.value}var s=r;switch(t+=(""!==t?" ":"")+s.command,s.command.toUpperCase()){case"M":case"L":case"C":case"S":case"Q":case"T":t+=s.coordinates.join(",");break;case"H":t+=s.coordinates[0];break;case"V":t+=s.coordinates[1];break;case"A":t+="".concat(s.radiusX,",").concat(s.radiusY,",").concat(s.xAxisRotation,",").concat(s.largeArcFlag,",").concat(s.sweepFlag,",").concat(s.coordinates.join(","))}}return t}}]),e}(),G=function(){function e(t,a){n(this,e),this.element=t,this.parentElement=a,this.attributeName="",this.attributeType="",this.to="",this._begin=0,this._beginMS=0,this._duration=0,this._durationMS=0,this.init()}return r(e,[{key:"init",value:function(){var t=this.element,a=t.attributes.getNamedItem("attributeName");a&&(this.attributeName=a.value.trim());var n=t.attributes.getNamedItem("attributeType");n&&(this.attributeType=n.value.trim());var i=t.attributes.getNamedItem("to");i&&(this.to=i.value.trim());var r=t.attributes.getNamedItem("begin"),s=t.attributes.getNamedItem("dur");if(r)if("indefinite"===r.value)this._begin=-1;else{var o=c(e.convertClockTime(r.value),2);this._begin=o[0],this._beginMS=o[1]}if(s)if("indefinite"===s.value)this._duration=-1;else{var l=c(e.convertClockTime(s.value),2);this._duration=l[0],this._durationMS=l[1]}}},{key:"duration",get:function(){return-1!==this._duration?1e3*this._duration+this._durationMS:this._duration}},{key:"begin",get:function(){return-1!==this._begin?1e3*this._begin+this._beginMS:this._begin}}],[{key:"convertClockTime",value:function(e){var t=0,a=0;if(/\d+ms$/.test(e))a=parseInt(e);else if(/\d+s$/.test(e))t=parseInt(e);else if(/\d+min$/.test(e))t=60*parseInt(e);else if(/\d+(.\d+)?h$/.test(e))t=60*parseFloat(e)*60;else{var n=/^(?:(\d?\d):)?(?:(\d?\d):)?(\d?\d)\.?(\d?\d?\d)?$/.exec(e);n&&(n[1]&&(t+=60*parseInt(n[1])*60),n[2]&&(t+=60*parseInt(n[2])),n[3]&&(t+=parseInt(n[3])),n[4]&&(a=parseInt(n[4])*(n[4].length<3?Math.pow(10,3-n[4].length):1)))}return[t,a]}}]),e}(),I=squared.lib.util,E=function(e){function t(e,a){var i;n(this,t),(i=u(this,o(t).call(this,e,a))).element=e,i.parentElement=a,i.from="",i.by="",i.values=[],i.keyTimes=[],i.calcMode="",i.additive=!1,i.accumulate=!1,i.freeze=!1,i._end=0,i._endMS=0,i._repeatDurationMS=0;var r=e.attributes.getNamedItem("attributeName");r&&(i.attributeName=r.value.trim());var s=e.attributes.getNamedItem("attributeType");s&&(i.attributeType=s.value.trim());var l,h=e.attributes.getNamedItem("values");if(h){if((l=i.values).push.apply(l,f(I.flatMap(h.value.split(";"),function(e){return e.trim()}))),i.values.length>1){i.from=i.values[0],i.to=i.values[i.values.length-1];var v=e.attributes.getNamedItem("keyTimes");if(v){var d,m=t.toFractionList(v.value);if(m.length===i.values.length)(d=i.keyTimes).push.apply(d,f(m))}}}else if(i.to){i.values.push(i.from,i.to),i.keyTimes.push(0,1);var b=e.attributes.getNamedItem("by");b&&(i.by=b.value.trim())}var p=e.attributes.getNamedItem("end"),y=e.attributes.getNamedItem("repeatDur"),g=e.attributes.getNamedItem("repeatCount");if(p)if("indefinite"===p.value)i._end=-1;else{var S=c(t.convertClockTime(p.value),2);i._end=S[0],i._endMS=S[1]}if(y)if("indefinite"===y.value)i.repeatDur=-1;else{var k=c(t.convertClockTime(y.value),2);i.repeatDur=k[0],i._repeatDurationMS=k[1]}if(g)if("indefinite"===g.value)i.repeatCount=-1;else{var V=parseInt(g.value);isNaN(V)||(i.repeatCount=V)}var A=e.attributes.getNamedItem("calcMode");if(A)switch(A.value){case"discrete":case"linear":case"paced":case"spline":i.calcMode=A.value}var x=e.attributes.getNamedItem("additive");x&&(i.additive="sum"===x.value);var w=e.attributes.getNamedItem("accumulate");w&&(i.accumulate="sum"===w.value);var R=e.attributes.getNamedItem("fill");return R&&(i.freeze="freeze"===R.value),i}return s(t,G),r(t,[{key:"end",get:function(){return-1!==this._end?1e3*this._end+this._endMS:this._end}},{key:"repeatDuration",get:function(){return void 0!==this.repeatDur&&-1!==this.repeatDur?1e3*this.repeatDur+this._repeatDurationMS:0}}],[{key:"toFractionList",value:function(e){var t=-1,a=I.flatMap(e.split(arguments.length>1&&void 0!==arguments[1]?arguments[1]:";"),function(e){var a=parseFloat(e);return!isNaN(a)&&a<=1&&(-1===t||a>t)?(t=a,a):-1});return a.length>1&&a.some(function(e){return-1!==e})&&0===a[0]?a:[]}}]),t}(),M=squared.lib.util,O=function(e){function t(e,a){var i;n(this,t),(i=u(this,o(t).call(this,e,a))).path="",i.keyPoints=[],i.rotate=0,i.rotateAuto=!1,i.rotateAutoReverse=!1;var r=e.attributes.getNamedItem("path");r&&(i.path=r.value.trim());var s=e.attributes.getNamedItem("rotate");if(s)switch(s.value){case"auto":i.rotateAuto=!0;break;case"auto-reverse":i.rotateAutoReverse=!0;break;default:i.rotate=M.convertInt(s.value)}if(i.keyTimes.length){var l=e.attributes.getNamedItem("keyPoints");if(l){var c=E.toFractionList(l.value);c.length===i.keyTimes.length&&(i.keyPoints=c)}}return i}return s(t,E),t}(),L=function(e){function t(e,a){var i;n(this,t),(i=u(this,o(t).call(this,e,a))).type=0;var r=e.attributes.getNamedItem("type");if(r)switch(r.value){case"translate":i.type=SVGTransform.SVG_TRANSFORM_TRANSLATE;break;case"scale":i.type=SVGTransform.SVG_TRANSFORM_SCALE;break;case"rotate":i.type=SVGTransform.SVG_TRANSFORM_ROTATE;break;case"skewX":i.type=SVGTransform.SVG_TRANSFORM_SKEWX;break;case"skewY":i.type=SVGTransform.SVG_TRANSFORM_SKEWY}return i}return s(t,E),r(t,null,[{key:"toRotateList",value:function(e){var t=e.map(function(e){if(""===e)return[null,null,null];var t=N.toCoordinateList(e);return 1===t.length||3===t.length?t:[]});return t.some(function(e){return 0===e.length})?void 0:t}},{key:"toScaleList",value:function(e){var t=e.map(function(e){if(""===e)return[null,null];var t=N.toCoordinateList(e);return 1===t.length?[t[0],t[0]]:2===t.length?t:[]});return t.some(function(e){return 0===e.length})?void 0:t}},{key:"toTranslateList",value:function(e){var t=e.map(function(e){if(""===e)return[null,null];var t=N.toCoordinateList(e);return 1===t.length||2===t.length?t:[]});return t.some(function(e){return 0===e.length})?void 0:t}}]),t}(),C=squared.lib.color,P=squared.lib.dom,F=squared.lib.util,j=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";n(this,e),this.element=t,this.d=a,this.transformed=!1,this.opacity=1,this.color="",this.fillRule="",this.fill="",this.fillOpacity="",this.stroke="",this.strokeWidth="",this.strokeOpacity="",this.strokeLinecap="",this.strokeLinejoin="",this.strokeMiterlimit="",this.clipPath="",this.clipRule="",this.init()}return r(e,[{key:"setColor",value:function(e){var t=P.cssAttribute(this.element,e),a=F.REGEX_PATTERN.CSS_URL.exec(t);if(a)t="@".concat(a[1]);else if(""!==t)switch(t.toLowerCase()){case"none":case"transparent":case"rgba(0, 0, 0, 0)":t="";break;case"currentcolor":var n=C.parseRGBA(P.cssAttribute(this.element,"color",!0));t=n?n.valueRGB:"#000000";break;default:var i=C.parseRGBA(t);i&&(t=i.valueRGB)}else"fill"!==e||this.element.parentElement instanceof SVGGElement||(t="#000000");this[e]=t}},{key:"setOpacity",value:function(e){var t=P.cssAttribute(this.element,"".concat(e,"-opacity"));this["".concat(e,"Opacity")]=t?""+parseFloat(t)*this.opacity:""+this.opacity}},{key:"init",value:function(){var t=this.element;if(""===this.d){var a=t.transform.baseVal;switch(t.tagName){case"path":this.d=P.cssAttribute(t,"d");break;case"circle":this.d=e.getCircle(t.cx.baseVal.value,t.cy.baseVal.value,t.r.baseVal.value);break;case"ellipse":this.d=e.getEllipse(t.cx.baseVal.value,t.cy.baseVal.value,t.rx.baseVal.value,t.ry.baseVal.value);break;case"line":var n=t.x1.baseVal.value,i=t.y1.baseVal.value,r=t.x2.baseVal.value,s=t.y2.baseVal.value;if(a.numberOfItems)this.d=e.getPolyline(N.applyTransforms(a,[{x:n,y:i},{x:r,y:s}],g(t))),this.transformed=!0;else this.d=e.getLine(n,i,r,s);break;case"rect":var o=t.x.baseVal.value,l=t.y.baseVal.value,u=t.width.baseVal.value,c=t.height.baseVal.value;if(a.numberOfItems)this.d=e.getPolygon(N.applyTransforms(a,[{x:o,y:l},{x:o+u,y:l},{x:o+u,y:l+c},{x:o,y:l+c}],g(t))),this.transformed=!0;else this.d=e.getRect(u,c,o,l);break;case"polyline":case"polygon":var f=N.toPointList(t.points);a.numberOfItems&&(f=N.applyTransforms(a,f,g(t)),this.transformed=!0),this.d="polygon"===t.tagName?e.getPolygon(f):e.getPolyline(f)}}var h=F.REGEX_PATTERN.CSS_URL.exec(P.cssAttribute(t,"clip-path"));h&&(this.clipPath=h[1],this.clipRule=P.cssAttribute(t,"clip-rule",!0));var v=P.cssAttribute(t,"opacity");v&&(this.opacity=Math.min(parseFloat(v),1)),this.setColor("fill"),this.fill&&(this.setOpacity("fill"),this.fillRule=P.cssAttribute(t,"fill-rule",!0)),this.setColor("stroke"),this.stroke&&(this.setOpacity("stroke"),this.strokeWidth=P.cssAttribute(t,"stroke-width")||"1",this.strokeLinecap=P.cssAttribute(t,"stroke-linecap",!0),this.strokeLinejoin=P.cssAttribute(t,"stroke-linejoin",!0),this.strokeMiterlimit=P.cssAttribute(t,"stroke-miterlimit",!0))}}],[{key:"getLine",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return 0!==e||0!==t||0!==a||0!==n?"M".concat(e,",").concat(t," L").concat(a,",").concat(n):""}},{key:"getRect",value:function(e,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return e>0&&t>0?"M".concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,",").concat(a," h").concat(e," v").concat(t," h").concat(-e," Z"):""}},{key:"getPolyline",value:function(e){return(e=e instanceof SVGPointList?N.toPointList(e):e).length?"M".concat(e.map(function(e){return"".concat(e.x,",").concat(e.y)}).join(" ")):""}},{key:"getPolygon",value:function(e){var t=this.getPolyline(e);return""!==t?t+" Z":""}},{key:"getCircle",value:function(e,t,a){return a>0?this.getEllipse(e,t,a,a):""}},{key:"getEllipse",value:function(e,t,a,n){return a>0&&n>0?"M".concat(e-a,",").concat(t," a").concat(a,",").concat(n,",0,1,0,").concat(2*a,",0 a").concat(a,",").concat(n,",0,1,0,-").concat(2*a,",0"):""}}]),e}(),B=function(){function e(t){if(n(this,e),this.element=t,this.name=N.setName(t),this.animate=this.animatable?e.toAnimateList(t):[],this.visible=A(t),this.drawable){var a=new j(t);a.d&&"none"!==a.d&&(this.path=a)}}return r(e,[{key:"transform",get:function(){return this.element.transform.baseVal}},{key:"drawable",get:function(){return!0}},{key:"animatable",get:function(){return!0}},{key:"transformable",get:function(){return this.transform.numberOfItems>0}}],[{key:"toAnimateList",value:function(e){for(var t=[],a=0;a<e.children.length;a++){var n=e.children[a];n instanceof SVGAnimateTransformElement?t.push(new L(n,e)):n instanceof SVGAnimateMotionElement?t.push(new O(n,e)):n instanceof SVGAnimateElement?t.push(new E(n,e)):n instanceof SVGAnimationElement&&t.push(new G(n,e))}return t}}]),e}(),X=function(e){function t(e){var a;return n(this,t),(a=u(this,o(t).call(this))).element=e,a.visible=!0,a.name=N.setName(e),a.animate=a.animatable?B.toAnimateList(e):[],a.visible=A(e),a}return s(t,squared.lib.base.Container),r(t,[{key:"transform",get:function(){return this.element.transform.baseVal}},{key:"animatable",get:function(){return this.element instanceof SVGGElement}},{key:"transformable",get:function(){return this.element instanceof SVGGElement&&this.element.transform.baseVal.numberOfItems>0}}]),t}(),_=function(e){function t(e){var a;return n(this,t),(a=u(this,o(t).call(this,e))).element=e,a.x=e.x.baseVal.value,a.y=e.y.baseVal.value,a.width=e.width.baseVal.value,a.height=e.height.baseVal.value,a}return s(t,X),r(t,[{key:"animatable",get:function(){return!0}},{key:"transformable",get:function(){return this.transform.numberOfItems>0}}]),t}(),q=squared.lib.util,Y=function(e){function t(e){var a;return n(this,t),(a=u(this,o(t).call(this,e))).element=e,a.uri="",a.x=e.x.baseVal.value,a.y=e.y.baseVal.value,a.width=e.width.baseVal.value,a.height=e.height.baseVal.value,a.uri=q.resolvePath(e.href.baseVal),a}return s(t,B),r(t,[{key:"setExternal",value:function(){var e=this.element.transform.baseVal;if(e.numberOfItems){for(var t=this.x,a=this.y,n=e.numberOfItems-1;n>=0;n--){var i=e.getItem(n),r=i.matrix;switch(i.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:t+=r.e,a+=r.f;break;case SVGTransform.SVG_TRANSFORM_SCALE:t*=r.a,a*=r.d,this.width*=r.a,this.height*=r.d;break;case SVGTransform.SVG_TRANSFORM_ROTATE:t=S(r,t,t),a=k(r,a,a),r.a<0&&(t+=r.a*this.width),r.c<0&&(t+=r.c*this.width),r.b<0&&(a+=r.b*this.height),r.d<0&&(a+=r.d*this.height)}}this.x=t,this.y=a}}},{key:"drawable",get:function(){return!1}}]),t}(),D=function(e){function t(e,a){var i;return n(this,t),(i=u(this,o(t).call(this,e))).element=e,a&&i.setPath(a),i}return s(t,_),r(t,[{key:"setPath",value:function(e){this.path=new j(this.element,e)}}]),t}(),W=squared.lib.dom,U={util:x};e.Svg=function(e){function t(e){var a;return n(this,t),(a=u(this,o(t).call(this))).element=e,a.animatable=!0,a.transformable=!1,a.defs={clipPath:new Map,gradient:new Map},a._width=0,a._height=0,a._viewBoxWidth=0,a._viewBoxHeight=0,a._opacity=1,a.name=N.setName(e),a.animate=B.toAnimateList(e),a.visible=A(e),a.init(),a}return s(t,squared.lib.base.Container),r(t,[{key:"setDimensions",value:function(e,t){this._width=e,this._height=t}},{key:"setViewBox",value:function(e,t){this._viewBoxWidth=e,this._viewBoxHeight=t}},{key:"setOpacity",value:function(e){this._opacity=!isNaN(e=parseFloat(""+e))&&e<1?e:1}},{key:"init",value:function(){var e=this,t=this.element;if(this.setViewBox(t.viewBox.baseVal.width,t.viewBox.baseVal.height),this.setOpacity(W.cssAttribute(t,"opacity")),this.setDimensions(t.width.baseVal.value,t.height.baseVal.value),W.isUserAgent(16)){var a=t.getBoundingClientRect();a.width>this.width&&a.height>this.height&&this.setDimensions(a.width,a.height)}t.querySelectorAll("clipPath, linearGradient, radialGradient").forEach(function(t){if(t.id)if(t instanceof SVGClipPathElement){for(var a=new X(t),n=Array.from(t.children),i=0;i<n.length;i++){var r=n[i];if(p(r)){var s=new B(r);s.path&&a.append(s)}}a.length&&e.defs.clipPath.set(t.id,a)}else t instanceof SVGLinearGradientElement?e.defs.gradient.set("@".concat(t.id),{type:"linear",x1:t.x1.baseVal.value,x2:t.x2.baseVal.value,y1:t.y1.baseVal.value,y2:t.y2.baseVal.value,x1AsString:t.x1.baseVal.valueAsString,x2AsString:t.x2.baseVal.valueAsString,y1AsString:t.y1.baseVal.valueAsString,y2AsString:t.y2.baseVal.valueAsString,colorStop:N.createColorStops(t)}):t instanceof SVGRadialGradientElement&&e.defs.gradient.set("@".concat(t.id),{type:"radial",cx:t.cx.baseVal.value,cy:t.cy.baseVal.value,r:t.r.baseVal.value,cxAsString:t.cx.baseVal.valueAsString,cyAsString:t.cy.baseVal.valueAsString,rAsString:t.r.baseVal.valueAsString,fx:t.fx.baseVal.value,fy:t.fy.baseVal.value,fxAsString:t.fx.baseVal.valueAsString,fyAsString:t.fy.baseVal.valueAsString,colorStop:N.createColorStops(t)})});var n,i=new Map;function r(e){var t;p(e)?(t=new B(e),e.id&&t.path&&i.set("#".concat(e.id),t.path.d)):y(e)&&(t=new Y(e)),n&&t&&n.append(t)}for(var s=0;s<t.children.length;s++){var o=t.children[s];if(o instanceof SVGSVGElement)n=new _(o),this.append(n);else if(o instanceof SVGGElement)n=new X(o),this.append(n);else{if(!(o instanceof SVGUseElement)){void 0===n&&(n=new X(t),this.append(n)),r(o);continue}n=new D(o),this.append(n)}for(var l=0;l<o.children.length;l++)r(o.children[l]);n=void 0}this.each(function(e){if(e instanceof D){var t=i.get(e.element.href.baseVal);t&&e.setPath(t)}}),this.retain(this.filter(function(e){return e.length>0||e instanceof D&&void 0!==e.path}))}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"viewBoxWidth",get:function(){return this._viewBoxWidth}},{key:"viewBoxHeight",get:function(){return this._viewBoxHeight}},{key:"opacity",get:function(){return this._opacity}},{key:"transform",get:function(){return this.element.transform.baseVal}}]),t}(),e.SvgAnimate=E,e.SvgAnimateMotion=O,e.SvgAnimateTransform=L,e.SvgAnimation=G,e.SvgBuild=N,e.SvgElement=B,e.SvgGroup=X,e.SvgGroupViewBox=_,e.SvgImage=Y,e.SvgPath=j,e.SvgUse=D,e.lib=U,Object.defineProperty(e,"__esModule",{value:!0})});
