!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e=e||self).squared=e.squared||{},e.squared.svg={}))}(this,function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){this.wrapped=e}function i(e){var t,i;function a(t,i){try{var s=e[t](i),o=s.value,l=o instanceof r;Promise.resolve(l?o.wrapped:o).then(function(e){l?a("next",e):n(s.done?"return":"normal",e)},function(e){a("throw",e)})}catch(e){n("throw",e)}}function n(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?a(t.key,t.arg):i=null}this._invoke=function(e,r){return new Promise(function(n,s){var o={key:e,arg:r,resolve:n,reject:s,next:null};i?i=i.next=o:(t=i=o,a(e,r))})},"function"!=typeof e.return&&(this.return=void 0)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}function v(e,t,r){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var i=h(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function p(e,t,r,i){return(p="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,r,i){var a,n=h(e,t);if(n){if((a=Object.getOwnPropertyDescriptor(n,t)).set)return a.set.call(i,r),!0;if(!a.writable)return!1}if(a=Object.getOwnPropertyDescriptor(i,t)){if(!a.writable)return!1;a.value=r,Object.defineProperty(i,t,a)}else o(i,t,r);return!0})(e,t,r,i)}function y(e,t,r,i,a){if(!p(e,t,r,i||e)&&a)throw Error("failed to set property");return r}"function"==typeof Symbol&&Symbol.asyncIterator&&(i.prototype[Symbol.asyncIterator]=function(){return this}),i.prototype.next=function(e){return this._invoke("next",e)},i.prototype.throw=function(e){return this._invoke("throw",e)},i.prototype.return=function(e){return this._invoke("return",e)};function d(e,t){return g(e)||function(e,t){var r=[],i=!0,a=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(e){a=!0,n=e}finally{try{i||null==o.return||o.return()}finally{if(a)throw n}}return r}(e,t)||k()}function m(e){return function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(e){if(Array.isArray(e))return e}function b(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function k(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var S=squared.lib.dom,A=squared.lib.util;function x(e,t,r){e.style[t]=r,e.setAttribute(t,r)}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"deg",r=parseFloat(e);switch(t){case"turn":r*=360;break;case"rad":r*=180/Math.PI}return r}function _(e){return e*Math.PI/180}var R={path:1,line:2,rect:3,ellipse:4,circle:5,polyline:6,polygon:7},w={URL:/url\("?(#.*?)"?\)/,ZERO_ONE:"(0(?:\\.\\d+)?|1(?:\\.0+)?)",DECIMAL:"(-?[\\d.]+)",LENGTH:"(-?[\\d.]+(?:[a-z]{2,}|%)?)",DEGREE:"(?:(-?[\\d.]+)(deg|rad|turn))"},V={MATRIX:"(matrix(?:3d)?)\\(".concat(w.DECIMAL,", ").concat(w.DECIMAL,", ").concat(w.DECIMAL,", ").concat(w.DECIMAL,", ").concat(w.DECIMAL,", ").concat(w.DECIMAL,"(?:, ").concat(w.DECIMAL,")?(?:, ").concat(w.DECIMAL,")?(?:, ").concat(w.DECIMAL,")?(?:, ").concat(w.DECIMAL,")?(?:, ").concat(w.DECIMAL,")?(?:, ").concat(w.DECIMAL,")?(?:, ").concat(w.DECIMAL,")?(?:, ").concat(w.DECIMAL,")?(?:, ").concat(w.DECIMAL,")?(?:, ").concat(w.DECIMAL,")?\\)"),ROTATE:"(rotate[XY]?)\\(".concat(w.DEGREE,"\\)"),SKEW:"(skew[XY]?)\\(".concat(w.DEGREE,"(?:, ").concat(w.DEGREE,")?\\)"),SCALE:"(scale[XY]?)\\(".concat(w.DECIMAL,"(?:, ").concat(w.DECIMAL,")?\\)"),TRANSLATE:"(translate[XY]?)\\(".concat(w.LENGTH,"(?:, ").concat(w.LENGTH,")?\\)")},E={applyX:function(e,t,r){return e.a*t+e.c*r+e.e},applyY:function(e,t,r){return e.b*t+e.d*r+e.f},clone:function(e){return{a:e.a,b:e.b,c:e.c,d:e.d,e:e.e,f:e.f}},rotate:function(e){var t=_(e),r=Math.cos(t),i=Math.sin(t);return{a:r,b:i,c:-1*i,d:r,e:0,f:0}},skew:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{a:1,b:Math.tan(_(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)),c:Math.tan(_(e)),d:1,e:0,f:0}},scale:function(){return{a:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,b:0,c:0,d:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e:0,f:0}},translate:function(){return{a:1,b:0,c:0,d:1,e:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,f:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0}}},M={create:function(e,t){return{type:e,matrix:t,angle:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,method:{x:!(arguments.length>3&&void 0!==arguments[3])||arguments[3],y:!(arguments.length>4&&void 0!==arguments[4])||arguments[4]}}},parse:function(e,t){var r=void 0===t?S.cssInline(e,"transform"):t;if(""!==r){var i=[];for(var a in V)for(var n=RegExp(V[a],"g"),s=null;null!==(s=n.exec(r));){var o=s[1].endsWith("X"),l=s[1].endsWith("Y");if(s[1].startsWith("rotate")){var u=T(s[2],s[3]),c=E.rotate(u);o?(c.a=1,c.b=0,c.c=0):l&&(c.b=0,c.c=0,c.d=1),i[s.index]=M.create(SVGTransform.SVG_TRANSFORM_ROTATE,c,u,!o,!l)}else if(s[1].startsWith("skew")){var f=l?0:T(s[2],s[3]),h=l?T(s[2],s[3]):s[4]&&s[5]?T(s[4],s[5]):0,v=E.skew(f,h);o?i[s.index]=M.create(SVGTransform.SVG_TRANSFORM_SKEWX,v,f,!0,!1):l?i[s.index]=M.create(SVGTransform.SVG_TRANSFORM_SKEWY,v,h,!1,!0):(i[s.index]=M.create(SVGTransform.SVG_TRANSFORM_SKEWX,Object.assign({},v,{b:0}),f,!0,!1),0!==h&&(i[s.index+1]=M.create(SVGTransform.SVG_TRANSFORM_SKEWY,Object.assign({},v,{c:0}),h,!1,!0)))}else if(s[1].startsWith("scale")){var p=l?void 0:parseFloat(s[2]),y=E.scale(p,o?void 0:l?parseFloat(s[2]):!o&&s[3]?parseFloat(s[3]):p);i[s.index]=M.create(SVGTransform.SVG_TRANSFORM_SCALE,y,0,!l,!o)}else if(s[1].startsWith("translate")){var d=F(),m=G(e),g=parseFloat(A.convertPX(s[2],d,m)),b=!o&&s[3]?parseFloat(A.convertPX(s[3],d,m)):0,k=E.translate(l?0:g,l?g:b);i[s.index]=M.create(SVGTransform.SVG_TRANSFORM_TRANSLATE,k,0)}else if(s[1].startsWith("matrix")){var x=M.matrix(e,t);x&&(i[s.index]=M.create(SVGTransform.SVG_TRANSFORM_MATRIX,x))}}return i.filter(function(e){return!!e&&(e.fromCSS=!0,!0)})}},matrix:function(e,t){var r=RegExp(V.MATRIX).exec(t||S.getStyle(e,!0).transform||"");if(r)switch(r[1]){case"matrix":return{a:parseFloat(r[2]),b:parseFloat(r[3]),c:parseFloat(r[4]),d:parseFloat(r[5]),e:parseFloat(r[6]),f:parseFloat(r[7])};case"matrix3d":return{a:parseFloat(r[2]),b:parseFloat(r[3]),c:parseFloat(r[6]),d:parseFloat(r[7]),e:parseFloat(r[14]),f:parseFloat(r[15])}}},origin:function(e,t){var r={x:null,y:null};if(""!==(t=t||S.cssAttribute(e,"transform-origin"))){var i,a,n=I(e);if(n)i=n.width,a=n.height;else{var s=e.parentElement;s instanceof SVGGraphicsElement&&s.viewportElement&&(N.svg(s.viewportElement)||N.symbol(s.viewportElement))&&s.viewportElement.viewBox&&(i=s.viewportElement.viewBox.baseVal.width,a=s.viewportElement.viewBox.baseVal.height)}if(!i||!a){var o=e.getBoundingClientRect();i||(i=o.width),a||(a=o.height)}var l=t.split(" ");1===l.length&&l.push("center"),(l=l.slice(0,2)).includes("left")?r.x=0:l.includes("right")&&(r.x=i),l.includes("top")?r.y=0:l.includes("bottom")&&(r.y=a),["x","y"].forEach(function(t){if(null===r[t])for(var n=0;n<l.length;n++){var s=l[n];if(""!==s&&("center"===s&&(s="50%"),A.isUnit(s)?r[t]=parseInt(s.endsWith("px")?s:A.convertPX(s,F(),G(e))):A.isPercent(s)&&(r[t]=("x"===t?i:a)*(parseInt(s)/100)),null!==r[t])){l[n]="";break}}})}return r.x=r.x||0,r.y=r.y||0,r},rotate:function(e){var t=[],r=e.attributes.getNamedItem("transform");if(r)for(var i,a=/rotate\((-?[\d.]+),?\s*(-?[\d.]+),?\s*(-?[\d.]+)\)/g;null!==(i=a.exec(r.value));)t.push({angle:parseFloat(i[1]),x:parseFloat(i[2]),y:parseFloat(i[3])});return t.length?t:[{angle:0,x:0,y:0}]},valueAsInitial:function(e){switch(e){case"rotate":case SVGTransform.SVG_TRANSFORM_ROTATE:return"0 0 0";case"scale":case SVGTransform.SVG_TRANSFORM_SCALE:return"1 1";case"skewX":case"skewY":case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:return"0";case"translate":case SVGTransform.SVG_TRANSFORM_TRANSLATE:return"0 0"}return""},typeAsName:function(e){switch(e){case SVGTransform.SVG_TRANSFORM_ROTATE:return"rotate";case SVGTransform.SVG_TRANSFORM_SCALE:return"scale";case SVGTransform.SVG_TRANSFORM_SKEWX:return"skewX";case SVGTransform.SVG_TRANSFORM_SKEWY:return"skewY";case SVGTransform.SVG_TRANSFORM_TRANSLATE:return"translate"}return""}},N={svg:function(e){return"svg"===e.tagName},g:function(e){return"g"===e.tagName},symbol:function(e){return"symbol"===e.tagName},path:function(e){return"path"===e.tagName},shape:function(e){return void 0!==R[e.tagName]},image:function(e){return"image"===e.tagName},use:function(e){return"use"===e.tagName},line:function(e){return"line"===e.tagName},rect:function(e){return"rect"===e.tagName},circle:function(e){return"circle"===e.tagName},ellipse:function(e){return"ellipse"===e.tagName},polygon:function(e){return"polygon"===e.tagName},polyline:function(e){return"polyline"===e.tagName},clipPath:function(e){return"clipPath"===e.tagName},pattern:function(e){return"pattern"===e.tagName},linearGradient:function(e){return"linearGradient"===e.tagName},radialGradient:function(e){return"radialGradient"===e.tagName}};function F(){return A.optionalAsNumber(squared,"settings.resolutionDPI")||96}function G(e){return parseInt(S.getStyle(e).fontSize||"16")}function P(e){var t=0,r=0;if(A.isNumber(e))t=parseInt(e);else if(/-?\d+ms$/.test(e))r=parseFloat(e);else if(/-?\d+s$/.test(e))t=parseFloat(e);else if(/-?\d+min$/.test(e))t=60*parseFloat(e);else if(/-?\d+(.\d+)?h$/.test(e))t=60*parseFloat(e)*60;else{var i=/^(?:(-?)(\d?\d):)?(?:(\d?\d):)?(\d?\d)\.?(\d?\d?\d)?$/.exec(e);i&&(i[2]&&(t+=60*parseInt(i[2])*60),i[3]&&(t+=60*parseInt(i[3])),i[4]&&(t+=parseInt(i[4])),i[5]&&(r=parseInt(i[5])*(i[5].length<3?Math.pow(10,3-i[5].length):1)),i[1]&&(t*=-1,r*=-1))}return 1e3*t+r}function O(e){var t=S.cssAttribute(e,"visibility",!0);return"hidden"!==t&&"collapse"!==t&&"none"!==S.cssAttribute(e,"display",!0)}function B(e,t){x(e,"display",t?"block":"none"),x(e,"visibility",t?"visible":"hidden")}function C(e,t){if(A.isNumber(t)){var r=parseFloat(""+t);r<=0?r=0:r>=1&&(r=1),e.style.opacity=""+r,e.setAttribute("opacity",""+r)}}function L(e,t){var r=e.attributes.getNamedItem("href");if(r&&"#"===r.value.charAt(0)){var i,a=r.value.substring(1);if(void 0===t)for(i=e.parentElement;i&&i.parentElement instanceof SVGGraphicsElement;)i=i.parentElement;else i=t;if(i)for(var n=Array.from(i.querySelectorAll("*")),s=0;s<n.length;s++){var o=n[s];if(o.id===a&&o instanceof SVGElement)return o}else{var l=document.getElementById(a);if(l instanceof SVGElement)return l}}return null}function I(e){for(var t=e.parentElement;t&&t instanceof SVGElement;){if(N.svg(t)||N.symbol(t)&&t.viewBox&&t.viewBox.baseVal.width>0&&t.viewBox.baseVal.height>0)return t.viewBox.baseVal;t=t.parentElement}}function X(e){return e.sort(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?function(e,t){return e>t?-1:1}:function(e,t){return e<t?-1:1})}function z(e){return e%1!=0?e.toFixed(arguments.length>1&&void 0!==arguments[1]?arguments[1]:3).replace(/(\.\d+?)0+$/,function(e,t){return t}):e}function j(e,t,r){return e+(t-e)*r}function D(e,t){if(e.length>1){var r=X(e.slice(0))[0],i=0;if(t)if(t.length===e.length)for(var a=0;a<t.length;a++)i=Math.max(i,t[a]+e[a]);else t=void 0;void 0===t&&(i=Math.max(i,r));for(var n=i,s=!1;!s;)for(var o=0;o<e.length;o++){if((n-(t?t[o]:0))%e[o]!=0){s=!1,n+=r;break}s=!0}return n}return e[0]}function q(e,t){return t*Math.cos(_(e))*-1}var W=Object.freeze({REGEXP_SVG:w,MATRIX:E,TRANSFORM:M,SVG:N,getHostDPI:F,getFontSize:G,convertClockTime:P,isVisible:O,setVisible:B,setOpacity:C,getTargetElement:L,getNearestViewBox:I,sortNumber:X,truncateDecimal:z,getSplitValue:j,getLeastCommonMultiple:D,getRadiusX:function(e,t){return t*Math.sin(_(e))},getRadiusY:q}),Y=squared.lib.util,U=new Map,H=function(){function e(){a(this,e)}return s(e,null,[{key:"isContainer",value:function(e){return Y.hasBit(e.instanceType,2)}},{key:"isElement",value:function(e){return Y.hasBit(e.instanceType,4)}},{key:"isAnimate",value:function(e){return Y.hasBit(e.instanceType,16392)}},{key:"asSvg",value:function(e){return 18===e.instanceType}},{key:"asG",value:function(e){return 34===e.instanceType}},{key:"asUseSymbol",value:function(e){return 66===e.instanceType}},{key:"asPattern",value:function(e){return 130===e.instanceType}},{key:"asShapePattern",value:function(e){return 258===e.instanceType}},{key:"asUsePattern",value:function(e){return 514===e.instanceType}},{key:"asShape",value:function(e){return Y.hasBit(e.instanceType,2052)}},{key:"asImage",value:function(e){return 4100===e.instanceType}},{key:"asUse",value:function(e){return 10244===e.instanceType}},{key:"asSet",value:function(e){return 8===e.instanceType}},{key:"asAnimate",value:function(e){return 16392===e.instanceType}},{key:"asAnimateTransform",value:function(e){return 81928===e.instanceType}},{key:"asAnimateMotion",value:function(e){return 49160===e.instanceType}},{key:"setName",value:function(e){if(e){var t,r="";if(Y.isString(e.id)){var i=Y.convertWord(e.id,!0);U.has(i)||(r=i),t=i}else t=e.tagName;var a=U.get(t)||0;return""!==r?(U.set(r,a),r):(U.set(t,++a),"".concat(t,"_").concat(a))}return U.clear(),""}},{key:"drawLine",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return"M".concat(e,",").concat(t," L").concat(r,",").concat(i)}},{key:"drawRect",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return"M".concat(r,",").concat(i," ").concat(r+e,",").concat(i," ").concat(r+e,",").concat(i+t," ").concat(r,",").concat(i+t," Z")}},{key:"drawCircle",value:function(t,r,i){return e.drawEllipse(t,r,i)}},{key:"drawEllipse",value:function(e,t,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return void 0===i&&(i=r),"M".concat(a?z(e-r):e-r,",").concat(a?z(t):t," a").concat(r,",").concat(i,",0,1,0,").concat(2*r,",0 a").concat(r,",").concat(i,",0,1,0,-").concat(2*r,",0")}},{key:"drawPolygon",value:function(t){var r=e.drawPolyline(t,arguments.length>1&&void 0!==arguments[1]&&arguments[1]);return""!==r?"".concat(r," Z"):""}},{key:"drawPolyline",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.length?"M".concat(e.map(function(e){return"".concat(t?z(e.x):e.x,",").concat(t?z(e.y):e.y)}).join(" ")):""}},{key:"drawPath",value:function(e){for(var t="",r=Array.isArray(a=e),i=0,a=r?a:a[Symbol.iterator]();;){var n;if(r){if(i>=a.length)break;n=a[i++]}else{if((i=a.next()).done)break;n=i.value}var s=n;switch(t+=(""!==t?" ":"")+s.command,s.command.toUpperCase()){case"M":case"L":case"C":case"S":case"Q":case"T":t+=s.coordinates.join(",");break;case"H":t+=s.coordinates[0];break;case"V":t+=s.coordinates[1];break;case"A":t+="".concat(s.radiusX,",").concat(s.radiusY,",").concat(s.xAxisRotation,",").concat(s.largeArcFlag,",").concat(s.sweepFlag,",").concat(s.coordinates.join(","))}}return t}},{key:"getPathCommands",value:function(t){var r,i=[],a=/([A-Za-z])([^A-Za-z]+)?/g;for(t=t.trim();null!==(r=a.exec(t))&&(0!==i.length||"M"===r[1].toUpperCase());){r[2]=(r[2]||"").trim();var n=e.toNumberList(r[2]),s=i[i.length-1],o=s?s.command.toUpperCase():"",l=s?s.points[s.points.length-1]:void 0,u=void 0,c=void 0,f=void 0,h=void 0,v=void 0;switch(r[1].toUpperCase()){case"M":0===i.length&&(r[1]="M");case"L":if(n.length>=2){n.length%2!=0&&n.length--;break}continue;case"H":if(l&&n.length){n[1]="h"===r[1]?0:l.y,n.length=2;break}continue;case"V":if(l&&n.length){var p=n[0];n[0]="v"===r[1]?0:l.x,n[1]=p,n.length=2;break}continue;case"Z":if(i.length){n.push.apply(n,m(i[0].coordinates.slice(0,2))),r[1]="Z";break}continue;case"C":if(n.length>=6){n.length=6;break}continue;case"S":if(n.length>=4&&("C"===o||"S"===o)){n.length=4;break}continue;case"Q":if(n.length>=4){n.length=4;break}continue;case"T":if(n.length>=2&&("Q"===o||"T"===o)){n.length=2;break}continue;case"A":if(n.length>=7){var y=d(n.splice(0,5),5);u=y[0],c=y[1],f=y[2],h=y[3],v=y[4],n.length=2;break}continue;default:continue}if(n.length>1){for(var g=[],b=/[a-z]/.test(r[1]),k=0;k<n.length;k+=2){var S=n[k],A=n[k+1];b&&l&&(l={x:S+=l.x,y:A+=l.y}),g.push({x:S,y:A})}i.push({command:r[1],relative:b,coordinates:n,points:g,radiusX:u,radiusY:c,xAxisRotation:f,largeArcFlag:h,sweepFlag:v})}}return i}},{key:"getPathPoints",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[],i=0,a=0,n=0;n<e.length;n++){for(var s=e[n],o=0;o<s.coordinates.length;o+=2){s.relative?(i+=s.coordinates[o],a+=s.coordinates[o+1]):(i=s.coordinates[o],a=s.coordinates[o+1]);var l={x:i,y:a};"A"===s.command.toUpperCase()&&(l.rx=s.radiusX,l.ry=s.radiusY,t&&(s.coordinates[o]>=0?l.y-=s.radiusY:l.y+=s.radiusY)),r.push(l)}if(s.relative){switch(s.command){case"h":case"v":var u,c=e[n-1];if(c&&"M"===c.command)(u=c.coordinates).push.apply(u,m(s.coordinates)),e.splice(n--,1);s.command="M";break;default:s.command=s.command.toUpperCase()}s.relative=!1}}return r}},{key:"setPathPoints",value:function(e,t){var r=t.slice(0);e:for(var i=Array.isArray(n=e),a=0,n=i?n:n[Symbol.iterator]();;){var s;if(i){if(a>=n.length)break;s=n[a++]}else{if((a=n.next()).done)break;s=a.value}var o=s;switch(o.command.toUpperCase()){case"M":case"L":case"H":case"V":case"C":case"S":case"Q":case"T":for(var l=0;l<o.coordinates.length;l+=2){var u=r.shift();if(!u){e=[];break e}o.coordinates[l]=u.x,o.coordinates[l+1]=u.y}break;case"A":var c=r.shift();if(!c||void 0===c.rx||void 0===c.ry){e=[];break e}o.coordinates[0]=c.x,o.coordinates[1]=c.y,o.radiusX=c.rx,o.radiusY=c.ry}}return e}},{key:"filterTransforms",value:function(e,t){for(var r=[],i=Array.isArray(n=e),a=0,n=i?n:n[Symbol.iterator]();;){var s;if(i){if(a>=n.length)break;s=n[a++]}else{if((a=n.next()).done)break;s=a.value}var o=s;if(void 0===t||!t.includes(o.type)){switch(o.type){case SVGTransform.SVG_TRANSFORM_ROTATE:case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:if(0===o.angle)continue;break;case SVGTransform.SVG_TRANSFORM_SCALE:if(1===o.matrix.a&&1===o.matrix.d)continue;break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:if(0===o.matrix.e&&0===o.matrix.f)continue}r.push(o)}}return r}},{key:"applyTransforms",value:function(t,r,i,a){t=t.slice(0).reverse();for(var n=e.clonePoints(r),s=Array.isArray(l=t),o=0,l=s?l:l[Symbol.iterator]();;){var u;if(s){if(o>=l.length)break;u=l[o++]}else{if((o=l.next()).done)break;u=o.value}var c=u,f=c.matrix,h=0,v=0,p=0,y=0;if(i)switch(c.type){case SVGTransform.SVG_TRANSFORM_SCALE:c.method.x&&(p=i.x*(1-f.a)),c.method.y&&(y=i.y*(1-f.d));break;case SVGTransform.SVG_TRANSFORM_SKEWX:c.method.y&&(v-=i.y);break;case SVGTransform.SVG_TRANSFORM_SKEWY:c.method.x&&(h-=i.x);break;case SVGTransform.SVG_TRANSFORM_ROTATE:c.method.x&&(h-=i.x,p=i.x+q(c.angle,i.x)),c.method.y&&(v-=i.y,y=i.y+q(c.angle,i.y))}if(a)switch(c.type){case SVGTransform.SVG_TRANSFORM_SCALE:a.x*=f.a,a.y*=f.d;break;case SVGTransform.SVG_TRANSFORM_ROTATE:0!==c.angle&&(a.angle=(a.angle||0)+c.angle);break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:a.x+=f.e,a.y+=f.f}for(var d=Array.isArray(g=n),m=0,g=d?g:g[Symbol.iterator]();;){var b;if(d){if(m>=g.length)break;b=g[m++]}else{if((m=g.next()).done)break;b=m.value}var k=b,S=k.x;if(k.x=E.applyX(f,S,k.y+v)+p,k.y=E.applyY(f,S+h,k.y)+y,c.type===SVGTransform.SVG_TRANSFORM_SCALE&&void 0!==k.rx&&void 0!==k.ry){var A=k.rx;k.rx=E.applyX(f,A,k.ry+v),k.ry=E.applyY(f,A+h,k.ry)}}}return n}},{key:"convertTransforms",value:function(e){for(var t=[],r=0;r<e.numberOfItems;r++){var i=e.getItem(r);t.push(M.create(i.type,i.matrix,i.angle))}return t}},{key:"clonePoints",value:function(e){var t=[];if(Array.isArray(e))for(var r=Array.isArray(a=e),i=0,a=r?a:a[Symbol.iterator]();;){var n;if(r){if(i>=a.length)break;n=a[i++]}else{if((i=a.next()).done)break;n=i.value}var s=n,o={x:s.x,y:s.y};void 0!==s.rx&&void 0!==s.ry&&(o.rx=s.rx,o.ry=s.ry),t.push(o)}else for(var l=0;l<e.numberOfItems;l++){var u=e.getItem(l);t.push({x:u.x,y:u.y})}return t}},{key:"convertNumbers",value:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push({x:e[r],y:e[r+1]});return t.length%2==0?t:[]}},{key:"toNumberList",value:function(e){for(var t,r=[],i=/-?[\d.]+/g;null!==(t=i.exec(e));){var a=parseFloat(t[0]);isNaN(a)||r.push(a)}return r}},{key:"toPointList",value:function(e){var t=[],r=e.trim().split(/\s+/),i=Array.isArray(r),a=0;for(r=i?r:r[Symbol.iterator]();;){var n;if(i){if(a>=r.length)break;n=r[a++]}else{if((a=r.next()).done)break;n=a.value}var s=d(n.split(",").map(function(e){return parseFloat(e)}),2);t.push({x:s[0],y:s[1]})}return t}},{key:"toBoxRect",value:function(t){for(var r=Number.MAX_VALUE,i=-Number.MAX_VALUE,a=-Number.MAX_VALUE,n=Number.MAX_VALUE,s=Array.isArray(l=t),o=0,l=s?l:l[Symbol.iterator]();;){var u;if(s){if(o>=l.length)break;u=l[o++]}else{if((o=l.next()).done)break;u=o.value}for(var c=e.getPathPoints(e.getPathCommands(u),!0),f=Array.isArray(v=c),h=0,v=f?v:v[Symbol.iterator]();;){var p;if(f){if(h>=v.length)break;p=v[h++]}else{if((h=v.next()).done)break;p=h.value}p.y<r?r=p.y:p.y>a&&(a=p.y),p.x<n?n=p.x:p.x>i&&(i=p.x)}}return{top:r,right:i,bottom:a,left:n}}}]),e}(),K=squared.lib.dom,Z=function(e){return function(t){function r(){var e;return a(this,r),(e=f(this,u(r).apply(this,arguments)))._baseVal={},e}return l(r,e),s(r,[{key:"setBaseValue",value:function(e,t){if(void 0!==t){if(this.validateBaseValue(e,t))return this._baseVal[e]=t,!0}else switch(e){case"d":return this._baseVal[e]=K.cssAttribute(this.element,"d"),!0;case"points":var r=this.element[e];if(Array.isArray(r))return this._baseVal[e]=H.clonePoints(r),!0;break;default:var i=this.element[e];if(i&&i.baseVal)return this._baseVal[e]=i.baseVal.value,!0}return!1}},{key:"getBaseValue",value:function(e,t){return void 0!==this._baseVal[e]||this.setBaseValue(e)?this._baseVal[e]:t}},{key:"refitBaseValue",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;function a(a){for(var n=Array.isArray(o=a),s=0,o=n?o:o[Symbol.iterator]();;){var l;if(n){if(s>=o.length)break;l=o[s++]}else{if((s=o.next()).done)break;l=s.value}var u=l;u.x+=e,u.y+=t,void 0!==u.rx&&void 0!==u.ry&&(u.rx*=r,u.ry*=i)}}for(var n in this._baseVal){var s=this._baseVal[n];if("string"==typeof s){if("d"===n){var o=H.getPathCommands(s),l=H.getPathPoints(o);a(l),this._baseVal[n]=H.drawPath(H.setPathPoints(o,l))}}else if("number"==typeof s)switch(n){case"cx":case"x1":case"x2":case"x":this._baseVal[n]+=e;break;case"cy":case"y1":case"y2":case"y":this._baseVal[n]+=t;case"r":this._baseVal[n]*=Math.min(r,i);break;case"rx":case"width":this._baseVal[n]*=r;break;case"height":case"ry":this._baseVal[n]*=i}else Array.isArray(s)&&"points"===n&&a(s)}}},{key:"validateBaseValue",value:function(e,t){switch(e){case"d":return"string"==typeof t;case"cx":case"cy":case"r":case"rx":case"ry":case"x1":case"x2":case"y1":case"y2":case"x":case"y":case"width":case"height":return"number"==typeof t;case"points":return Array.isArray(t)}}}]),r}()},$=squared.lib.dom,Q=squared.lib.util,J=function(){function e(t){if(a(this,e),this.attributeName="",this.paused=!1,this.synchronizeState=0,this._duration=-1,this._delay=0,this._to="",t){this.element=t,this.setAttribute("attributeName"),this.setAttribute("to");var r=this.getAttribute("dur");""!==r&&"indefinite"!==r&&(this.duration=P(r)),"transform"===this.attributeName?this.baseFrom=M.valueAsInitial(this.getAttribute("type")):t.parentElement&&(this.baseFrom=Q.optionalAsString(t.parentElement,"".concat(this.attributeName,".baseVal.valueAsString"))||$.cssInheritAttribute(t.parentElement,this.attributeName))}}return s(e,[{key:"setAttribute",value:function(e,t){var r=this.getAttribute(e);""!==r&&(void 0!==t?this[e+Q.capitalize(t)]=r===t:this[e]=r)}},{key:"getAttribute",value:function(e){var t=this.element&&this.element.attributes.getNamedItem(e);return t?t.value.trim():""}},{key:"addState",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var i=0;i<t.length;i++){var a=t[i];Q.hasBit(this.synchronizeState,a)||(this.synchronizeState|=a)}}},{key:"removeState",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var i=0;i<t.length;i++){var a=t[i];Q.hasBit(this.synchronizeState,a)&&(this.synchronizeState^=a)}}},{key:"hasState",value:function(){for(var e=this,t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return r.some(function(t){return Q.hasBit(e.synchronizeState,t)})}},{key:"delay",set:function(e){this._delay=e},get:function(){return this._delay}},{key:"duration",set:function(e){this._duration=Math.round(e)},get:function(){return this._duration}},{key:"to",set:function(e){this._to=e},get:function(){return this._to}},{key:"group",set:function(e){this._group=e},get:function(){return this._group||{id:-1/0,name:""}}},{key:"setterType",set:function(e){},get:function(){return!0}},{key:"instanceType",get:function(){return 8}}]),e}(),ee={ease:"0.25 0.1 0.25 1","ease-in":"0.42 0 1 1","ease-in-out":"0.42 0 0.58 1","ease-out":"0 0 0.58 1",linear:"0 0 1 1",step:"0 1 0 1"},te=Object.freeze({KEYSPLINE_NAME:ee}),re=squared.lib.color,ie=squared.lib.util;function ae(e){return parseFloat((1-e).toFixed(5))}var ne=function(e){function t(e){var r;if(a(this,t),(r=f(this,u(t).call(this,e))).element=e,r.from="",r.fillMode=0,r.alternate=!1,r.additiveSum=!1,r.accumulateSum=!1,r._iterationCount=1,r._reverse=!1,r._setterType=!1,r._repeatDuration=-1,e){var i=r.getAttribute("values"),n=-1!==r.duration?t.toFractionList(r.getAttribute("keyTimes")):[];if(""!==i)r.values=ie.flatMap(i.split(";"),function(e){return e.trim()}),r.values.length>1&&n.length===r.values.length?(r.from=r.values[0],r.to=r.values[r.values.length-1],r.keyTimes=n):1===r.values.length&&(r.to=i[0],r.convertToValues());else{if(r.from=r.getAttribute("from"),""===r.to){var s=r.getAttribute("by");ie.isNumber(s)&&(""===r.from&&r.baseFrom&&(r.from=r.baseFrom),ie.isNumber(r.from)&&(r.to=""+(parseFloat(r.from)+parseFloat(s))))}r.convertToValues(n)}r.setAttribute("additive","sum");var o=r.getAttribute("repeatDur");""!==o&&"indefinite"!==o&&(r._repeatDuration=P(o));var l=r.getAttribute("repeatCount");r.iterationCount="indefinite"===l?-1:parseFloat(l),"animate"===e.tagName&&r.setCalcMode(r.attributeName)}return r}return l(t,J),s(t,[{key:"setCalcMode",value:function(e){if(this.element)switch(this.getAttribute("calcMode")){case"discrete":if(2===this.keyTimes.length&&0===this.keyTimes[0]){for(var r=[],i=[],a=0;a<this.keyTimes.length-1;a++){var n=t.toStepFractionList(e,this.keyTimes,this.values,"step-end",a,F(),G(this.element));n&&(r.push.apply(r,m(n[0])),i.push.apply(i,m(n[1])))}r.push(this.keyTimes.pop()),i.push(this.values.pop()),this.values=i,this.keyTimes=r,this._keySplines=[ee.step]}break;case"spline":this.keySplines=ie.flatMap(this.getAttribute("keySplines").split(";"),function(e){return e.trim()});case"linear":if(0!==this.keyTimes[0]&&1!==this.keyTimes[this.keyTimes.length-1]){for(var s=[],o=0;o<this.values.length;o++)s.push(o/(this.values.length-1));this._keyTimes=s,this._keySplines=void 0}}}},{key:"convertToValues",value:function(e){""!==this.to&&(this.values=[this.from,this.to],this.keyTimes=e&&2===e.length&&0===this.keyTimes[0]&&this.keyTimes[1]<=1?e:[0,1])}},{key:"setGroupOrder",value:function(e){if(this.group.order=e,this.fillBackwards)for(var t=e.length-1,r=!1;t>=0;t--)if(r){if("backwards"===e[t].fillMode||"both"===e[t].fillMode){this.fillBackwards=!1;break}}else e[t].name===this.group.name&&(r=!0)}},{key:"getPartialDuration",value:function(e){return(0===e?this.delay:0)+this.keyTimes[this.keyTimes.length-1]*this.duration}},{key:"_setFillMode",value:function(e,t){var r=ie.hasBit(this.fillMode,t);e?r||(this.fillMode|=t):r&&(this.fillMode^=t)}},{key:"delay",set:function(e){if(y(u(t.prototype),"delay",e,this,!0),this.element){var r=this.getAttribute("end");if(""!==r){var i=X(r.split(";").map(function(e){return P(e)}))[0];void 0!==i&&(-1===this.iterationCount||this.duration>0&&i<this.duration*this.iterationCount)&&(this.delay>i?(this.end=i,-1===this.iterationCount&&(this.iterationCount=Math.ceil((this.end-this.delay)/this.duration))):this.duration=-1)}}},get:function(){return v(u(t.prototype),"delay",this)}},{key:"duration",set:function(e){y(u(t.prototype),"duration",e,this,!0)},get:function(){var e=v(u(t.prototype),"duration",this);return-1===e&&-1!==this._repeatDuration?this._repeatDuration:e}},{key:"iterationCount",set:function(e){this._iterationCount=isNaN(e)?1:e,this.element&&(this.fillFreeze=-1!==this.iterationCount&&"freeze"===this.getAttribute("fill"),1!==this.iterationCount?this.setAttribute("accumulate","sum"):this.accumulateSum=!1)},get:function(){return this.duration>0?-1!==this._repeatDuration&&(-1===this._iterationCount||this._repeatDuration<this._iterationCount*this.duration)?this._repeatDuration/this.duration:this._iterationCount:1}},{key:"to",set:function(e){y(u(t.prototype),"to",e,this,!0)},get:function(){return this._setterType?this.values[this.values.length-1]||v(u(t.prototype),"to",this):this.setterType?this.values[0]:v(u(t.prototype),"to",this)}},{key:"values",set:function(e){this._values=e,this._keyTimes&&this._keyTimes.length!==e.length&&(this._keyTimes=void 0,this._keySplines=void 0)},get:function(){return void 0===this._values&&(this._values=[]),this._values}},{key:"keyTimes",set:function(e){!e.every(function(e){return e>=0&&e<=1})||void 0!==this._values&&this._values.length!==e.length||(this._keyTimes=e)},get:function(){return void 0===this._keyTimes&&(this._keyTimes=[]),this._keyTimes}},{key:"keySplines",set:function(e){if(e&&e.length){var t=this.keyTimes.length-1;if(e.length>=t&&!e.every(function(e){return""===e||e===ee.linear})){for(var r=[],i=0;i<t;i++){var a=e[i].split(" ").map(function(e){return parseFloat(e)});4===a.length&&!a.some(function(e){return isNaN(e)})&&a[0]>=0&&a[0]<=1&&a[2]>=0&&a[2]<=1?r.push(a.join(" ")):r.push(ee.linear)}this._keySplines=r}}else this._keySplines=void 0},get:function(){return this._keySplines}},{key:"reverse",set:function(e){if(e!==this._reverse&&this.values.length){this.values.reverse();for(var t=[],r=0;r<this.keyTimes.length;r++)t.push(1-this.keyTimes[r]);if(t.reverse(),this.keyTimes=t,this._keySplines){for(var i=[],a=this._keySplines.length-1;a>=0;a--){var n=this._keySplines[a].split(" ").map(function(e){return parseFloat(e)});i.push(4===n.length?"".concat(ae(n[2])," ").concat(ae(n[3])," ").concat(ae(n[0])," ").concat(ae(n[1])):ee.linear)}this._keySplines=i}this._reverse=e}},get:function(){return this._reverse}},{key:"fillBackwards",set:function(e){this._setFillMode(e,2)},get:function(){return ie.hasBit(this.fillMode,2)}},{key:"fillForwards",set:function(e){this._setFillMode(e,4)},get:function(){return ie.hasBit(this.fillMode,4)}},{key:"fillFreeze",set:function(e){this._setFillMode(e,8)},get:function(){return ie.hasBit(this.fillMode,8)}},{key:"fillReplace",get:function(){return this.fillMode<4}},{key:"fromToType",get:function(){return 2===this.keyTimes.length&&0===this.keyTimes[0]&&1===this.keyTimes[1]}},{key:"partialType",get:function(){return this.keyTimes.length>1&&this.keyTimes[this.keyTimes.length-1]<1}},{key:"setterType",set:function(e){this._setterType=e},get:function(){return this._setterType||void 0!==this.element&&0===this.duration&&this.keyTimes.length>=2&&0===this.keyTimes[0]}},{key:"instanceType",get:function(){return 16392}}],[{key:"toStepFractionList",value:function(e,t,r,i,a){var n,s,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:96,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:16;switch(e){case"fill":case"stroke":var u=re.parseRGBA(r[a]),c=re.parseRGBA(r[a+1]);u&&c&&(n=[u],s=[c]);break;case"points":n=H.convertNumbers(H.toNumberList(r[a])),s=H.convertNumbers(H.toNumberList(r[a+1]));break;case"rotate":case"scale":case"translate":n=r[a].trim().split(/\s+/).map(function(e){return parseFloat(e)}),s=r[a+1].trim().split(/\s+/).map(function(e){return parseFloat(e)});break;default:ie.isNumber(r[a])?n=[parseFloat(r[a])]:ie.isUnit(r[a])&&(n=[parseFloat(ie.convertPX(r[a],o,l))]),ie.isNumber(r[a+1])?s=[parseFloat(r[a+1])]:ie.isUnit(r[a+1])&&(s=[parseFloat(ie.convertPX(r[a+1],o,l))])}if(n&&s&&n.length&&n.length===s.length){switch(i){case"step-start":i="steps(1, start)";break;case"step-end":i="steps(1, end)"}var f=/steps\((\d+)(?:, (start|end))?\)/.exec(i);if(f){for(var h=t[a+1]-t[a],v=parseInt(f[1]),p=100/v,y=[],d=[],m=0;m<v;m++){var g=t[a]+h*(m/v),b=p*(m+(0===m&&"start"===f[2]?1:0))/100,k=[];switch(e){case"fill":case"stroke":var S=n[0],A=s[0],x=re.convertHex(j(S.rgba.r,A.rgba.r,b),j(S.rgba.g,A.rgba.g,b),j(S.rgba.b,A.rgba.b,b)),T=re.convertHex(j(S.rgba.a,A.rgba.a,b));k.push("#".concat(x+("FF"!==T?T:"")));break;case"points":for(var _=0;_<n.length;_++){var R=n[_],w=s[_];k.push("".concat(j(R.x,w.x,b),",").concat(j(R.y,w.y,b)))}break;default:for(var V=0;V<n.length;V++){k.push(""+j(n[V],s[V],b))}}if(!k.length)return;y.push(g),d.push(k.join(" "))}return[y,d]}}}},{key:"toFractionList",value:function(e){var t=0,r=ie.flatMap(e.split(arguments.length>1&&void 0!==arguments[1]?arguments[1]:";"),function(e){var r=parseFloat(e);return!isNaN(r)&&r>=t&&r<=1?(t=r,r):-1});return r.length>1&&0===r[0]&&r.some(function(e){return-1!==e})?r:[]}}]),t}(),se=function(e){function t(e){var r;if(a(this,t),(r=f(this,u(t).call(this,e))).element=e,r.type=0,e){var i=r.getAttribute("type");r.setType(i),r.setCalcMode(i)}return r}return l(t,ne),s(t,[{key:"expandToValues",value:function(){if(this.additiveSum&&-1!==this.iterationCount&&this.keyTimes.length&&this.duration>0){var e=this.duration*this.iterationCount;e:{for(var t,r=[],i=[],a=[],n=0;n<this.iterationCount;n++){n>0&&this.keySplines&&a.push("");for(var s=0;s<this.keyTimes.length;s++){var o=this.values[s].split(" "),l=o.map(function(e){return parseFloat(e)});if(o.length!==l.length)break e;var u=void 0;switch(this.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:1===l.length?u=[l[0],0]:2===l.length&&(u=l);break;case SVGTransform.SVG_TRANSFORM_SCALE:1===l.length?u=[l[0],l[0]]:2===l.length&&(u=l);break;case SVGTransform.SVG_TRANSFORM_ROTATE:1===l.length?u=[l[0],0,0]:3===l.length&&(u=l);break;case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:1===l.length&&(u=l)}if(!u)break e;var c=(this.keyTimes[s]+n)*this.duration;if(t)for(var f=0;f<u.length;f++)u[f]+=t[f];n<this.iterationCount-1&&s===this.keyTimes.length-1&&(this.accumulateSum&&(t=u),c--),r.push(c/e),i.push(u.join(" ")),this.keySplines&&s<this.keyTimes.length-1&&a.push(this.keySplines[s])}}this.keyTimes=r,this.values=i,this.keySplines=a.length?a:void 0,this.duration=e,this.iterationCount=1,this.accumulateSum=!1}}}},{key:"setType",value:function(e){var r;switch(e){case"translate":this.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,r=t.toTranslateList(this.values);break;case"scale":this.type=SVGTransform.SVG_TRANSFORM_SCALE,r=t.toScaleList(this.values);break;case"rotate":this.type=SVGTransform.SVG_TRANSFORM_ROTATE,r=t.toRotateList(this.values);break;case"skewX":this.type=SVGTransform.SVG_TRANSFORM_SKEWX,r=t.toSkewList(this.values);break;case"skewY":this.type=SVGTransform.SVG_TRANSFORM_SKEWY,r=t.toSkewList(this.values)}this.values=r?r.map(function(e){return e.join(" ")}):[]}},{key:"instanceType",get:function(){return 81928}}],[{key:"toRotateList",value:function(e){var t=e.map(function(e){if(""===e)return[0,0,0];var t=H.toNumberList(e);return 1===t.length?[t[0],0,0]:3===t.length?t:[]});return t.some(function(e){return 0===e.length})?void 0:t}},{key:"toScaleList",value:function(e){var t=e.map(function(e){if(""===e)return[1,1];var t=H.toNumberList(e);return 1===t.length?[t[0],t[0]]:2===t.length?t:[]});return t.some(function(e){return 0===e.length})?void 0:t}},{key:"toTranslateList",value:function(e){var t=e.map(function(e){if(""===e)return[0,0];var t=H.toNumberList(e);return 1===t.length?[t[0],0]:2===t.length?t:[]});return t.some(function(e){return 0===e.length})?void 0:t}},{key:"toSkewList",value:function(e){var t=e.map(function(e){if(""===e)return[0];var t=H.toNumberList(e);return 1===t.length?[t[0]]:[]});return t.some(function(e){return 0===e.length})?void 0:t}}]),t}(),oe=squared.lib.util;function le(e,t,r){var i,a,n,s=0,o=e.entries(),l=Array.isArray(o),u=0;for(o=l?o:o[Symbol.iterator]();;){var c;if(l){if(u>=o.length)break;c=o[u++]}else{if((u=o.next()).done)break;c=u.value}var f=d(c,2),h=f[0],v=f[1];if(r===h){a={index:h,value:v};break}if(r>s&&r<h){a={index:s,value:i},n={index:h,value:v};break}s=h,i=v}a&&n?Ae(t,r,be(r,a.index,a.value,n.index,n.value)):a&&Ae(t,r,a.value)}function ue(e){for(var t=e[e.length-1][0],r=new Set,i=0;i<e.length;i++){var a=e[i][0]/t;if(a>0)for(var n=7;;n++){var s=parseFloat((""+a).substring(0,n));if(!r.has(s)){a=s;break}}e[i][0]=a,r.add(a)}return e}function ce(e){return"string"==typeof e&&(oe.isNumber(e)?e=parseFloat(e):0===(e=H.toPointList(e)).length&&(e="")),e}function fe(e){return Array.isArray(e)?e.map(function(e){return"".concat(e.x,",").concat(e.y)}).join(" "):""+e}function he(e,t,r){var i,a=[],n=t.element.tagName;switch(n){case"line":i=["x1","y1","x2","y2"];break;case"rect":i=["width","height","x","y"];break;case"polyline":case"polygon":i=["points"];break;case"circle":i=["cx","cy","r"];break;case"ellipse":i=["cx","cy","rx","ry"];break;default:return}for(var s=M.origin(t.element),o=0;o<e.length;o++){for(var l=e[o][0],u=e[o][1],c=[],f=Array.isArray(v=i),h=0,v=f?v:v[Symbol.iterator]();;){var p;if(f){if(h>=v.length)break;p=v[h++]}else{if((h=v.next()).done)break;p=h.value}var y=p,d=u.get(y);if(void 0===d&&(d=t.getBaseValue(y)),void 0===d)return;c.push(d)}var m=void 0;switch(n){case"line":m=ve(c);break;case"rect":m=pe(c);break;case"polygon":case"polyline":m=c[0];break;case"circle":case"ellipse":m=ye(c)}if(m){var g=void 0;switch(t.transformed&&t.transformed.length&&(m=H.applyTransforms(t.transformed,m,s)),r&&r.refitPoints(m),n){case"line":case"polyline":g=H.drawPolyline(m,!0);break;case"rect":case"polygon":g=H.drawPolygon(m,!0);break;case"circle":case"ellipse":var b=m[0];g=H.drawEllipse(b.x,b.y,b.rx,b.ry,!0)}void 0!==g&&a.push({index:l,value:g})}}return a}function ve(e){return[{x:e[0],y:e[1]},{x:e[2],y:e[4]}]}function pe(e){var t=e[0],r=e[1],i=e[2],a=e[3];return[{x:i,y:a},{x:i+t,y:a},{x:i+t,y:a+r},{x:i,y:a+r}]}function ye(e){return[{x:e[0],y:e[1],rx:e[2],ry:e[e.length-1]}]}function de(e,t,r){for(var i=new Map,a=Array.isArray(s=t),n=0,s=a?s:s[Symbol.iterator]();;){var o;if(a){if(n>=s.length)break;o=s[n++]}else{if((n=s.next()).done)break;o=n.value}var l=o,u=new Map;for(var c in r||e){var f=void 0;e[c]?void 0===(f=e[c].get(l))&&(f=Ee(e[c],l)):r&&(f=r[c].value),void 0!==f&&u.set(c,f)}i.set(l,u)}return i}function me(e,t,r,i,a){return Math.round(e+(r[a]+i)*t)}function ge(e,t,r,i,a){if(e.alternate&&i%2!=0&&(r=r.slice(0).reverse()),"number"==typeof t){var n=parseFloat(r[a]);if(e.additiveSum){n+=t,e.accumulateSum||(i=0);for(var s=0;s<i;s++)for(var o=0;o<r.length;o++)n+=parseFloat(r[o])}return n}if("string"==typeof t){if(e.additiveSum){var l=t.split(/\s+/).map(function(e){return parseFloat(e)}),u=r.map(function(e){return e.trim().split(/\s+/).map(function(e){return parseFloat(e)})});if(u.every(function(e){return l.length===e.length})){var c=u[a];e.accumulateSum||(i=0);for(var f=0;f<l.length;f++)c[f]+=l[f];for(var h=0;h<i;h++)for(var v=0;v<u.length;v++)for(var p=0;p<u[v].length;p++)c[p]+=u[v][p];return c.join(" ")}}return r[a]}return Array.isArray(t)?H.toPointList(r[a]):t}function be(e,t,r,i,a){if(e>t){if("number"==typeof r&&"number"==typeof a)return j(r,a,(e-t)/(i-t));if("string"==typeof r&&"string"==typeof a){var n=r.split(" ").map(function(e){return parseFloat(e)}),s=a.split(" ").map(function(e){return parseFloat(e)});if(n.length===s.length){for(var o=[],l=0;l<n.length;l++)o.push(be(e,t,n[l],i,s[l]));return o.join(" ")}}else if(Array.isArray(r)&&Array.isArray(a)){for(var u=[],c=0;c<Math.min(r.length,a.length);c++)u.push({x:be(e,t,r[c].x,i,a[c].x),y:be(e,t,r[c].y,i,a[c].y)});return u}}return r}function ke(e,t,r,i,a,n,s,o,l,u,c,f){var h;n<0?(h=o-n,n=0):h=o,h=function(e){(e+1)%10==0?e++:(e-1)%10==0&&e--;return e}(h);for(var v,p=Math.max(0,Math.min((h-(n+e.duration*s))/e.duration,1)),y=-1,d=-1,m=0;m<r.length;m++){if(-1!==y&&p<=r[m]){d=m;break}p>=r[m]&&(y=m)}return xe(e,o=Ae(u,o,v=-1!==y&&-1!==d?be(p,r[y],ge(e,t,i,s,y),r[d],ge(e,t,i,s,d)):ge(e,t,i,s,d=-1!==y?y+1:r.length-1)),a,d,l,c,f),[o,v]}function Se(e,r,i,a,n){for(var s=e.keyTimes.slice(0),o=e.values.slice(0),l=e.keySplines?e.keySplines.slice(0):Array(o.length-1).fill(""),u=r+e.duration,c=r+e.getPartialDuration(),f=function(r){var f=n[r];if(f!==e){var v=Re(f);if(v>c){var p=function(){var p=Math.min(u,v);e:for(var y=function(r,i){for(var n=function(t){var n=me(f.delay,f.duration,f.keyTimes,r,t);if(n>=c){var u=function(u){var h;if(n===u)h=fe(ge(f,a,f.values,r,t));else for(var v=(n-u)/f.duration,y=1;y<f.keyTimes.length;y++)if(v>=f.keyTimes[y-1]&&v<=f.keyTimes[y]){h=fe(be(v,f.keyTimes[y-1],ge(f,a,f.values,r,y-1),f.keyTimes[y],ge(f,a,f.values,r,y)));break}var d=u===p?1:u%e.duration/e.duration;0===d&&t>0&&(d=1),void 0===h||d===s[s.length-1]&&h===o[o.length-1]||(u===c?d+=1/e.duration:c=u,s.push(d),o.push(h),l&&l.push(i&&f.keySplines&&f.keySplines[t]?f.keySplines[t]:""))};if(!i&&n>=c&&(u(c),i=!0,n===c))return"continue";if(i){if(u(Math.min(n,p)),n>=p||1===s[s.length-1])return m=i,{v:"break|substituteEnd"};c=n}}},u=0;u<f.keyTimes.length;u++){var h=n(u);switch(h){case"continue":continue;default:if("object"===t(h))return h.v}}m=i},d=Fe(c,f.delay,f.duration),m=!1;;d++){if("break|substituteEnd"===y(d,m))break e}if(v===p&&v<=i&&(f.addState(16),n.splice(r--,1)),p===u)return h=r,{v:"break"}}();if("object"===t(p))return p.v}else i!==1/0&&v<i&&n.splice(r--,1)}h=r},h=0;h<n.length;h++){if("break"===f(h))break}return[s,o,l]}function Ae(e,t,r){if(""!==r){var i=e.get(t),a=!1;if(void 0===i&&(i=e.get(t-1),a=!0),i!==r){if("number"==typeof r&&Math.round(i)===Math.round(r))return t;for(;t>0&&e.has(t);)t++;e.set(t,r)}else a&&!e.has(t)&&(e.delete(t-1),e.set(t,r))}return t}function xe(e,t,r,i,a,n,s){if(!Te(H.asAnimateTransform(e),a)){if(0===i)return;i--}var o=r&&r[i];o&&n.set(t,o),s&&function(e,t,r,i){H.asAnimateTransform(t)&&t.transformOrigin&&t.transformOrigin[i]&&e.set(r,t.transformOrigin[i])}(s,e,t,i)}function Te(e,t){return oe.hasBit(t,e?32:4)}function _e(e){return!e.paused&&(e.element&&-1!==e.duration||e.keyTimes&&e.keyTimes.length>1&&e.duration>0)}function Re(e){return-1!==e.iterationCount?Math.min(e.delay+e.duration*e.iterationCount,e.end||1/0):1/0}function we(e){return Math.min(e.delay+e.duration*(-1!==e.iterationCount?e.iterationCount:1),e.end||1/0)}function Ve(e){return"infinite"===e.iterationCount?1/0:e.delay+e.duration*parseInt(e.iterationCount)}function Ee(e,t){var r,i=0,a=e.entries(),n=Array.isArray(a),s=0;for(a=n?a:a[Symbol.iterator]();;){var o;if(n){if(s>=a.length)break;o=a[s++]}else{if((s=a.next()).done)break;o=s.value}var l=d(o,2),u=l[0],c=l[1];if(t===u)return c;if(t>i&&t<u)return r;i=u,r=c}return r}function Me(e){return[e.keyTimes.slice(0),e.values.slice(0),e.keySplines?e.keySplines.slice(0):void 0]}function Ne(e,t,r,i){e[e.length-1]<1&&(e.push(1),t.push(i?fe(i):t[0]),r&&r.push(""))}function Fe(e,t,r){return Math.floor(Math.max(0,e-t)/r)}var Ge=function(e){return function(r){function i(){return a(this,i),f(this,u(i).apply(this,arguments))}return l(i,e),s(i,[{key:"getAnimateShape",value:function(e,t){void 0===t&&(t=this.animation);for(var r=[],i=Array.isArray(n=t),a=0,n=i?n:n[Symbol.iterator]();;){var s;if(i){if(a>=n.length)break;s=n[a++]}else{if((a=n.next()).done)break;s=a.value}var o=s;if(_e(o))switch(o.attributeName){case"r":case"cx":case"cy":if(N.circle(e)){r.push(o);break}case"rx":case"ry":N.ellipse(e)&&r.push(o);break;case"x1":case"x2":case"y1":case"y2":N.line(e)&&r.push(o);break;case"points":(N.polyline(e)||N.polygon(e))&&r.push(o);break;case"x":case"y":case"width":case"height":N.rect(e)&&r.push(o)}}return r}},{key:"getAnimateViewRect",value:function(e){void 0===e&&(e=this.animation);for(var t=[],r=Array.isArray(a=e),i=0,a=r?a:a[Symbol.iterator]();;){var n;if(r){if(i>=a.length)break;n=a[i++]}else{if((i=a.next()).done)break;n=i.value}var s=n;if(_e(s))switch(s.attributeName){case"x":case"y":t.push(s)}}return t}},{key:"getAnimateTransform",value:function(e){return void 0===e&&(e=this.animation),e.filter(function(e){return H.asAnimateTransform(e)&&e.duration>0})}},{key:"mergeAnimations",value:function(e,r){var i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;[e,r].forEach(function(e,r){var s=1===r;if(!(0===e.length||0===r&&oe.hasBit(a,8)||s&&oe.hasBit(a,64))){for(var o={},l=[],u=[],c=[],f=0;f<e.length;f++)if(e[f].setterType)u.push(e[f]);else for(var h=e[f],v=Re(h),p=0;p<e.length;p++){var y=e[p];if(f!==p&&h.attributeName===y.attributeName&&h.group.id<y.group.id&&!y.partialType)if(y.setterType){if(h.delay===y.delay){c[f]=h;break}}else{var g=Re(y);if(h.delay===y.delay&&(!y.fillReplace||v<=g||-1===y.iterationCount)||y.fillBackwards&&h.delay<=y.delay&&(y.fillForwards||h.fillReplace&&v<=y.delay)||h.element&&void 0===y.element&&(h.delay>=y.delay&&v<=g||y.fillForwards)){c[f]=h;break}}}for(var b=[],k=0;k<e.length;k++){var S=c[k];S?S.fillForwards?(S.setterType=!0,u.push(S)):b.push(e[k]):e[k].setterType||l.push(e[k])}i._removeAnimations(b),(0===r&&l.length+u.length>0||s&&(l.length+u.length>1||1===l.length&&(l[0].alternate||void 0!==l[0].end)))&&function(){for(var e=function(e,t,r){e&&(z.set(t,e),void 0!==r&&z.set(r,e))},r=new Set(l.map(function(e){return e.group.name})),c=0;c<l.length;c++){var f=l[c];f.group.order&&oe.spliceArray(f.group.order,function(e){return!r.has(e.name)})}for(var h={},v=0,p=0;p<l.length;p++){var y=l[p],g=y.attributeName;void 0===h[g]&&(h[g]=new Map);var b=h[g].get(y.delay)||[];b.push(y),h[g].set(y.delay,b)}for(var k in h){var S=new Map,A=X(Array.from(h[k].keys())),x=Array.isArray(A),T=0;for(A=x?A:A[Symbol.iterator]();;){var _;if(x){if(T>=A.length)break;_=A[T++]}else{if((T=A.next()).done)break;_=T.value}var R=_,w=h[k].get(R);if(w){var V=oe.maxArray(w.map(function(e){return we(e)}));v=Math.max(v,V),w.reverse(),S.set(R,w)}}h[k]=S}var E,N,F,G={},P=new Map,O=s?new Map:void 0,B=new Set,C={},L=new Map,I=s?new Map:void 0,z=new Map,j={},q={},W=function(r){G[r]=new Map,s||(j[r]=i._getBaseValue(r,n));var c=[],f=[],p=l.filter(function(e){return e.attributeName===r}),y=h[r].entries(),g=Array.isArray(y),b=0;for(y=g?y:y[Symbol.iterator]();;){var k;if(g){if(b>=y.length)break;k=y[b++]}else{if((b=y.next()).done)break;k=b.value}var S=d(k,2),A=S[1];c.push(S[0]),f.push(A)}var x,T=[],_=u.filter(function(e){return e.attributeName===r}),R=p.filter(function(e){return e.fillBackwards})[0],w=-1,V=0,E=void 0,N=void 0,F=void 0,L=void 0;function I(t,i){if(B.add(t),t.addState(16),F=t,t.fillForwards){if(q[r]=t,$(t.type,E),oe.spliceArray(_,function(e){return e.group.id<t.group.id||e.delay<V}),T.length=0,void 0!==i)for(var a=0;a<f.length;a++)for(var n=Array.isArray(l=f[a]),o=0,l=n?l:l[Symbol.iterator]();;){var u;if(n){if(o>=l.length)break;u=l[o++]}else{if((o=l.next()).done)break;u=o.value}u.group.id<t.group.id&&u.addState(16)}if(t.group.order)for(var c=Array.isArray(v=t.group.order),h=0,v=c?v:v[Symbol.iterator]();;){var p;if(c){if(h>=v.length)break;p=v[h++]}else{if((h=v.next()).done)break;p=h.value}if(p.name===t.group.name)return!0;if(Ve(p)>=Re(t))return!1}}else{if(t.fillFreeze){q[r]=t,$(t.type,E),oe.spliceArray(T,function(e){return void 0!==e.element});for(var y=0;y<f.length;y++)for(var d=Array.isArray(g=f[y]),m=0,g=d?g:g[Symbol.iterator]();;){var b;if(d){if(m>=g.length)break;b=g[m++]}else{if((m=g.next()).done)break;b=m.value}b.group.id<t.group.id&&b.delay<=t.delay&&b.addState(16)}}if(void 0!==i){var k=w,S=W(V,V+1);t.fillReplace&&void 0!==S&&i>V&&0===T.length&&(k=Ae(G[r],k,S),s&&e(t.type,k),E=S,w=k)}Y()}return!1}function X(e,t,i){return void 0===t&&(t=e.delay),void 0===i&&(i=e.to),q[r]=e,Ae(G[r],t,s?i:ce(i))}function D(e){e&&_.push(e),_.sort(function(e,t){return e.delay===t.delay?e.group.id<t.group.id?-1:1:e.delay<t.delay?-1:1});for(var t=0;t<_.length-1;t++)_[t].delay===_[t+1].delay&&_.splice(t--,1)}function W(e,t){var i=o[r]&&o[r].value;return oe.spliceArray(_,function(r){return r.delay>=e&&r.delay<t},function(t){t.element&&Z(),$(t.type,t.to,0===T.length),t.delay===e?i=s?t.to:ce(t.to):(w=X(t),V=t.delay)}),i}function Y(e,t){if(T.length){var r=[];oe.spliceArray(T,function(e){return Re(e)<=V},function(i){if(i.addState(16),i.fillForwards&&(r.push.apply(r,m(T.filter(function(e){return e.group.id<i.group.id}))),void 0!==e&&void 0!==t))for(var a=e;a<c.length;a++){a!==e&&(t=-1);for(var n=t+1;n<f[a].length;n++){var s=f[a][n];i.group.id>s.group.id&&s.addState(16)}}}),r.length&&oe.spliceArray(T,function(e){return r.includes(e)},function(e){return e.addState(16)})}}function U(e){e.hasState(16,64)||(e.addState(4),T.push(e))}function K(){T.sort(function(e,t){return e.group.order&&t.group.order?e.group.id>t.group.id?-1:1:e.element&&void 0===t.element?1:void 0===e.element&&t.element?-1:e.delay===t.delay?e.group.id>t.group.id?-1:1:e.delay<t.delay?1:-1})}function Z(){oe.spliceArray(T,function(e){return void 0!==e.element})}function $(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s||(t=ce(t)),""!==t&&(o[r]={index:e||0,value:t},i&&(E=t))}function Q(t,i,a){N&&!t&&(void 0===a&&(a=M.valueAsInitial(N.type)),i!==(w=Ae(G[r],i,a))&&e(N.type,w)),N=void 0}function J(e){for(var t=0;t<c.length;t++){if(e)for(var r=0;r<f[t].length;r++)f[t][r].attributeName===e.attributeName&&f[t][r].group.id<=e.group.id&&f[t].splice(r--,1);0===f[t].length&&(f.splice(t,1),c.splice(t--,1))}}if(R){E=ge(R,s?"":j[r],R.values,0,0),w=Ae(G[r],0,E),s&&(e(R.type,0),N=R);for(var ee=!0,te=Array.isArray(ie=p),re=0,ie=te?ie:ie[Symbol.iterator]();;){var ae;if(te){if(re>=ie.length)break;ae=ie[re++]}else{if((re=ie.next()).done)break;ae=re.value}if(ae.group.id>R.group.id&&ae.delay<=R.delay){ee=!1;break}}for(var ne=Re(R),se=[],le=0;le<c.length;le++)for(var ue=0;ue<f[le].length;ue++){var fe=f[le][ue];if(ee){if(fe===R&&(0!==le||0!==ue)){f[le].splice(ue--,1),c.unshift(R.delay),f.unshift([R]);continue}if(fe.group.id<R.group.id&&(R.fillForwards||Re(fe)<=ne)){fe.fillForwards&&(se.push(fe),fe.setterType=!0,_.push(fe));continue}}fe.element&&fe.delay<=R.delay&&(f[le].splice(ue--,1),U(fe))}if(se.length)for(var he=0;he<se.length;he++){J(se[he])}else J();R.addState(2)}s||(void 0===o[r]&&$(0,j[r]),void 0===E&&(E=o[r].value)),D(),oe.spliceArray(_,function(e){return e.delay<=c[0]},function(e){var t=H.asAnimate(e)&&e.fillForwards;if(e.delay<c[0]&&(void 0===R||t))if(R&&t)$(e.type,e.to);else{var i=e.delay-1;void 0===x?G[r].has(0)?X(e,i,E):(X(e,0,j[r]),X(e,i,j[r])):X(x,i),w=X(e),V=e.delay,x=e}}),x&&X(x,c[0]-1);e:{for(var ve,pe,ye=function(i){for(var n=c[i],l=function(t){var l=f[i][t];if(l.hasState(16,64))return u=t,"continue";var h=-1===l.iterationCount,p=l.duration,y=l.iterationCount,m=void 0;if(h)m=n+p;else if((m=Re(l))<=w)return l.fillReplace?l.addState(64):U(l),u=t,"continue";var g=void 0,b=void 0;if(h?(g=Math.ceil((v-n)/p),b=0):(g=Math.ceil(y),b=y-Math.floor(y)),_.length&&V>0&&V<n&&W(V,n),-1!==w&&w<n&&(w=Ae(G[r],n-1,E),V=n),L=void 0,l.group.order&&l.group.order.length>1){for(var k=!0,S=Array.isArray(x=l.group.order),A=0,x=S?x:x[Symbol.iterator]();;){var R;if(S){if(A>=x.length)break;R=x[A++]}else{if((A=x.next()).done)break;R=A.value}var F=R;if(F.name===l.group.name){k=!1;break}if(!F.paused&&V<=F.delay)break}if(k)t:for(var B=i+1;B<c.length;B++)for(var z=0;z<f[B].length;z++){var q=f[B][z];if(q.group.order){L=q.delay;break t}Re(q)<=m?(q.fillFreeze&&D(q),q.addState(16)):q.delay<m&&U(q)}}else for(var H=i+1;H<c.length;H++)if(c[H]!==1/0&&f[H].length&&!f[H].every(function(e){return e.hasState(16,64)})){L=c[H];break}var J=V,ee=w+1,te=Math.min(L||1/0,l.end||1/0),re=void 0;if(_.length&&l.element){var ie=Math.min(L||1/0,m,te);if(re=_.find(function(e){return e.delay>=V&&e.delay<=ie})){switch(re.delay){case V:$(re.type,re.to,!0),E=re.to,re.group.id>l.group.id&&(s&&N&&Q(l.additiveSum,Math.max(n-1,w)),w=X(re,Math.max(re.delay,w),E),te=-1);break;case L:re.addState(32);break;default:te=re.delay,re.addState(32)}oe.spliceArray(_,function(e){return e!==re}),l.addState(4)}}var ae=!1,ne=void 0;if(te>w){s&&(N&&(Q(l.additiveSum,Math.max(n-1,w)),ee=w+1),$(l.type,M.valueAsInitial(l.type),!0));var se=c[i]===1/0||(-1!==w||l.hasState(2))&&!(0===i&&0===t);ae=!0;t:for(var le=function(e){var s=void 0,u=void 0,c=void 0;if(l.partialType){if(V+l.getPartialDuration(e)<te&&(T.length||t<f[i].length-1)){for(var h=t+1;h<f[i].length;h++)U(f[i][h]);f[i].length=0,K();var v=d(Se(l,0===V?n:V,te,E,T),3);s=v[0],u=v[1],c=v[2]}else{var y=d(Me(l),3);s=y[0],u=y[1],c=y[2]}Ne(s,u,c,j[r])}else s=l.keyTimes,u=l.values,c=l.keySplines;for(var k=0;k<s.length;k++){var S=s[k],A=void 0,x=ge(l,E,u,e,k);if(e===g-1&&b>0)if(b===S)b=-1;else if(k===s.length-1)V=A=m,x=be(b,s[k-1],ge(l,E,u,e,k-1),S,x),b=-1;else if(b>S)for(var _=k+1;_<s.length;_++)if(b<=s[_]){V=A=m,x=be(b,S,x,s[_],ge(l,E,u,e,_)),b=-1;break}if(void 0===A){if((A=me(n,p,s,e,k))<0||A<w)continue;if(A===te)ae=e===g-1&&k===s.length-1,V=A;else{var R=function(t){var i=d(ke(l,E,s,u,c,n,e,t,a,G[r],P,O),2);w=i[0],ne=i[1]};if(n<0&&-1===w)A>0&&(V=0,R(0));else{if(A>te)return se&&w+1<te&&R(w),V=te,R(te+(te!==L||G[r].has(te-1)?0:-1)),ae=!1,"break|threadTimeExceeded";if(se)l.hasState(2)&&(V=J),n>=w?(A=Math.max(n,w+1),V=n):A===w?(V=A,A=w+1):(R(w),V=Math.max(A,w)),se=!1;else{if(V=A,e>0&&0===k&&l.accumulateSum){xe(l,A,c,k,a,P,O),w=A;continue}A=Math.max(A,w+1)}}}}if(A>w&&(k===s.length-1&&(e<g-1||l.fillReplace&&x!==o[r].value)&&!l.accumulateSum&&A--,w=Ae(G[r],A,x),xe(l,w,c,k,a,P,O),ne=x),!ae||-1===b)return"break|threadTimeExceeded"}},ue=Fe(V,n,p);ue<g;ue++){if("break|threadTimeExceeded"===le(ue))break t}Y(i,t)}if(void 0!==ne&&(E=ne,s&&(e(l.type,ee,w),N=l)),re&&(re.hasState(32)?(w=X(re,re.delay,ne=re.to),V=re.delay,$(re.type,ne)):l.hasState(64)&&e(re.type,w),Z(),ae=!0),oe.spliceArray(_,function(e){return e.delay>=J&&e.delay<=V},function(e){$(e.type,e.to),e.element&&Z()}),h){if(!ae)return T.length=0,T.push(l),u=t,"continue";if(void 0===re)return C[r]=l,u=t,{v:"break|attributeEnd"}}if(ae){if(L=L||1/0,!h&&I(l,L))return u=t,{v:"break|attributeEnd"};for(var ce=i;ce<c.length;ce++)if(c[ce]<V){for(var fe=0;fe<f[ce].length;fe++){var he=f[ce][fe];Re(he)>V&&!he.hasState(4,16,64)&&U(he)}c[ce]=1/0,f[ce].length=0}if(T.length&&V<L){K();var ve=T.filter(function(e){return e.delay<=V})[0];ve&&(ve.removeState(4,2),ve.addState(8),n=ve.delay,f[i]=[ve],t=-1)}}else U(l);u=t},u=0;u<f[i].length;u++){var h=l(u);switch(h){case"continue":continue;default:if("object"===t(h))return h.v}}},de=0;de<c.length;de++){if("break|attributeEnd"===ye(de))break e}if(T.length){K();for(var Te=function(t){var i=T[t],n=i.delay,o=i.duration,l=w-n,u=1/0;function c(){var c,f,h;if(i.partialType){if(V+i.getPartialDuration()<u&&t<T.length-1){var v=d(Se(i,V,u,E,T),3);c=v[0],f=v[1],h=v[2]}else{var p=d(Me(i),3);c=p[0],f=p[1],h=p[2]}Ne(c,f,h,j[r])}else c=i.keyTimes,f=i.values,h=i.keySplines;var y=w+1,m=Math.floor(l/o),g=!1;do{for(var b=0;b<c.length;b++){var k=me(n,o,c,m,b);if(!g&&k>=w){var S=d(ke(i,E,c,f,h,n,m,w,a,G[r],P,O),2);w=S[0],E=S[1],g=!0}if(g)if(k>=u){if(u>w){var A=d(ke(i,E,c,f,h,n,m,u,a,G[r],P,O),2);w=A[0],E=A[1],V=u}}else k>w&&(V=k,b===c.length-1&&k<u&&k--,E=ge(i,E,f,m,b),w=Ae(G[r],k,E),xe(i,w,h,b,a,P,O))}}while(w<u&&++m);s&&e(i.type,y,w)}return-1===i.iterationCount?(l>0&&l%i.duration!=0&&(u=n+i.duration*Math.ceil(l/o),c()),C[r]=i,"break|attributeEnd"):(u=Math.min(n+i.duration*i.iterationCount,i.end||1/0))>w&&(c(),I(i))?"break|attributeEnd":void 0},_e=0;_e<T.length;_e++){if("break|attributeEnd"===Te(_e))break e}}if(F&&F.fillReplace&&void 0===C[r])o[r]?(ve=o[r].index,pe=o[r].value):s?(ve=Array.from(z.values()).pop(),pe=M.valueAsInitial(ve)):pe=i._getBaseValue(r,n),void 0!==pe&&JSON.stringify(G[r].get(w))!==JSON.stringify(pe)&&(w=Ae(G[r],w,pe),e(ve,w))}};for(var Y in h)W(Y);var U=[];for(var K in G)U.push.apply(U,m(G[K].keys()));var Z=oe.maxArray(U);if(Object.keys(C).length){var $=[],Q=[];for(var J in C)$.push(C[J].delay),Q.push(C[J].duration);0===B.size&&$[0]===U[0]&&1===new Set($).size&&1===new Set(Q).size?N=$[0]<=0?0:$[0]:Q.length>1?Z=D(Q,$):(Z-$[0])%Q[0]!=0&&(Z=Q[0]*Math.ceil(Z/Q[0]))}if(void 0===N)for(var ee in G)if(C[ee]){var te=Array.from(G[ee].keys()).pop();if(te<Z){var re=C[ee],ie=re.delay,ae=te+1,fe=Array.from(G[ee].values()).pop(),ve=Math.floor((te-ie)/re.duration);do{for(var pe=!1,ye=0;ye<re.keyTimes.length;ye++){var _e=me(ie,re.duration,re.keyTimes,ve,ye);if(!pe&&_e>=te){var Ee=d(ke(re,fe,re.keyTimes,re.values,re.keySplines,ie,ve,te,a,G[ee],P,O),2);fe=Ee[1],U.push(te=Ee[0]),pe=!0}pe&&_e>te&&(ye===re.keyTimes.length-1&&_e<Z&&_e--,fe=ge(re,fe,re.values,ve,ye),te=Ae(G[ee],_e,fe),xe(re,_e,re.keySplines,ye,a,P,O),U.push(te))}}while(te<Z&&++ve);s&&e(re.type,ae,te)}}var Ge=X(Array.from(new Set(U)));if(n||s)for(var Pe in G)if(!G[Pe].has(0)&&void 0!==j[Pe]){var Oe=G[Pe].keys().next().value-1;G[Pe].set(0,j[Pe]),G[Pe].set(Oe,j[Pe]),Ge.includes(0)||Ge.push(0),Ge.includes(Oe)||Ge.push(Oe),X(Ge)}var Be={};for(var Ce in G){for(var Le=new Map,Ie=oe.maxArray(Array.from(G[Ce].keys())),Xe=0;Xe<Ge.length;Xe++){var ze=Ge[Xe];if(ze<=Ie){var je=G[Ce].get(ze);void 0===je?le(G[Ce],Le,ze):Le.set(ze,je)}}Be[Ce]=Le}if(E=de(Be,Ge),void 0===N&&Object.keys(C).length){var De={},qe=[],We=[];for(var Ye in C)qe.push(C[Ye]);for(var Ue=D(qe.map(function(e){return e.duration})),He=0;He<qe.length;He++){var Ke=qe[He],Ze=Ke.attributeName;De[Ze]=new Map;var $e=Array.from(G[Ze].values()).pop(),Qe=0,Je=0;do{for(var et=0;et<Ke.keyTimes.length;et++){var tt=me(0,Ke.duration,Ke.keyTimes,Je,et);et===Ke.keyTimes.length-1&&tt<Ue&&tt--,$e=ge(Ke,$e,Ke.values,Je,et),xe(Ke,Qe=Ae(De[Ze],tt,$e),Ke.keySplines,et,a,L,I),We.push(Qe)}}while(Qe<Ue&&++Je)}if(qe.every(function(e){return e.alternate})){var rt=-1;for(var it in C)for(var at=Array.from(De[it].keys()),nt=Array.from(De[it].values()).reverse(),st=0;st<at.length;st++)if(0!==at[st]){rt=Ue+at[st];var ot=L.get(at[st]);ot&&L.set(rt,ot),rt=Ae(De[it],rt,nt[st]),We.push(rt)}}for(var lt in We=X(Array.from(new Set(We))),De)for(var ut=Array.isArray(ft=We),ct=0,ft=ut?ft:ft[Symbol.iterator]();;){var ht;if(ut){if(ct>=ft.length)break;ht=ft[ct++]}else{if((ct=ft.next()).done)break;ht=ct.value}var vt=ht;De[lt].has(vt)||le(De[lt],De[lt],vt)}F=de(De,We,o)}if(E||F){i._removeAnimations(l);var pt=Array.from(z.entries()),yt=Array.from(l.map(function(e){return H.asAnimateTransform(e)?M.typeAsName(e.type):e.attributeName})).join("-");[E,F].forEach(function(e){if(e){var t=e===E,r=t?P:L,o=t?O:I;if(Te(s,a)){var l=[];if(s){var u=[];if(t)for(var c=Array.from(e.entries()),f=pt[0][1],h=0,v=0,p=0;h<pt.length;h++){var y=h<pt.length-1?pt[h+1][1]:-1;if(f!==y){for(var m=new Map,g=p;g<c.length;g++){var b=c[g][0];if(b>=pt[v][0]&&b<=pt[h][0])m.set(b,new Map([[f,c[g][1].values().next().value]])),p=g;else if(b>pt[h][0])break}u.push(m),f=y,v=h+1}}else{if(!C.transform)return;for(var k=Array.from(e.entries()),S=new Map,A=0;A<k.length;A++){var x=k[A];S.set(x[0],new Map([[C.transform.type,x[1].values().next().value]]))}u.push(S)}for(var T=0,_=0;_<u.length;_++){var R=Array.from(u[_].entries()),w=R[0][0];1===R.length&&R.push(_<u.length-1?[u[_+1].keys().next().value,R[0][1]]:[w+1,R[0][1]]);var V=R[R.length-1][0],M=V-w,F=new se;F.attributeName="transform",F.type=R[0][1].keys().next().value,F.transformOrigin=[];for(var G=0;G<R.length;G++){var B=R[G];if(l.push(r.get(B[0])||""),F.type!==SVGTransform.SVG_TRANSFORM_ROTATE){var X=o.get(B[0]);X&&(F.transformOrigin[G]=X)}B[0]-=w}var z=ue(R),j=Array.isArray(z),D=0;for(z=j?z:z[Symbol.iterator]();;){var q;if(j){if(D>=z.length)break;q=z[D++]}else{if((D=z.next()).done)break;q=D.value}var W=d(q,2),Y=W[1];F.keyTimes.push(W[0]),F.values.push(Y.values().next().value)}(w-=T)>1?F.delay=w:1===w&&(M+1)%10==0&&M++,F.duration=M,F.keySplines=l,F.synchronized={index:_,value:""},T=V,i._insertAnimate(F,t)}}else{for(var U,H=Array.from(e.entries()),K=N||0,Z=0;Z<H.length;Z++){var $=H[Z];l.push(r.get($[0])||""),$[0]-=K}if(n){var Q=he(ue(H),n,i.parent);if(!Q)return;(U=new ne).attributeName="d";for(var J=Array.isArray(te=Q),ee=0,te=J?te:te[Symbol.iterator]();;){var re;if(J){if(ee>=te.length)break;re=te[ee++]}else{if((ee=te.next()).done)break;re=ee.value}var ie=re;U.keyTimes.push(ie.index),U.values.push(""+ie.value)}}else{var ae=new se;ae.attributeName="transform",ae.type=SVGTransform.SVG_TRANSFORM_TRANSLATE;var le=e.entries(),ce=Array.isArray(le),fe=0;for(le=ce?le:le[Symbol.iterator]();;){var ve;if(ce){if(fe>=le.length)break;ve=le[fe++]}else{if((fe=le.next()).done)break;ve=fe.value}var pe=d(ve,2),ye=pe[0],de=(Y=pe[1]).get("x")||0,me=Y.get("y")||0;ae.keyTimes.push(ye),ae.values.push(i.parent?"".concat(i.parent.refitX(de)," ").concat(i.parent.refitX(me)):"".concat(de," ").concat(me))}U=ae}U.delay=K,U.keySplines=l,U.duration=H[H.length-1][0],i._insertAnimate(U,t)}}else if(function(e,t){return oe.hasBit(t,e?16:2)}(s,a))for(var ge=Array.from(e.entries()),be=0;be<ge.length-1;be++){var ke=d(ge[be],2),Se=ke[0],Ae=ke[1],xe=d(ge[be+1],2),_e=xe[0],Re=xe[1],we=void 0,Ve=yt;if(s){var Ee=new se;if(Ee.attributeName="transform",t)for(var Me=0;Me<pt.length-1;Me++){var Ne=pt[Me],Fe=pt[Me+1];if(Ne[1]===Fe[1]&&Se>=Ne[0]&&_e<=Fe[0]){Ee.type=Ne[1];break}if(_e-Se==1&&_e===Fe[0]){Ee.type=Fe[1];break}}else C.transform&&(Ee.type=C.transform.type);if(0===Ee.type)continue;Ee.values=[Ae.values().next().value,Re.values().next().value];var Ge=o.get(_e);Ge&&(Ee.transformOrigin=[Ge]),we=Ee}else if(n){var Pe=he([[Se,Ae],[_e,Re]],n,i.parent);if(!Pe)continue;(we=new ne).attributeName="d",we.values=Pe.map(function(e){return""+e.value})}else{var Oe=new se;Oe.attributeName="transform",Oe.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,Oe.values=[Ae,Re].map(function(e){var t=e.get("x")||0,r=e.get("y")||0;return i.parent?"".concat(i.parent.refitX(t)," ").concat(i.parent.refitX(r)):"".concat(t," ").concat(r)}),Ve+=be,we=Oe}t&&(we.delay=0===be?Se:0),we.duration=_e-Se,we.keyTimes=[0,1],we.synchronized={index:be,value:Ve};var Be=r.get(_e);Be&&(we.keySplines=[Be]),i._insertAnimate(we,t)}}})}}()}})}},{key:"_removeAnimations",value:function(e){e.length&&oe.retainArray(this.animation,function(t){return!e.includes(t)})}},{key:"_insertAnimate",value:function(e,t){t||(e.iterationCount=-1),e.from=e.values[0],e.to=e.values[e.values.length-1],this.animation.push(e)}},{key:"_getBaseValue",value:function(e,t){var r;try{r=(t||this).getBaseValue(e)}catch(e){}return null!=r?r:"points"===e?[{x:0,y:0}]:0}}]),i}()},Pe=squared.lib.util,Oe=function(e){function t(e){var r;if(a(this,t),(r=f(this,u(t).call(this,e))).element=e,r.path="",r.mpath=null,r.rotate=0,r.rotateAuto=!1,r.rotateAutoReverse=!1,e){r.setAttribute("path");var i=r.getAttribute("rotate");switch(i){case"auto":r.rotateAuto=!0;break;case"auto-reverse":r.rotateAutoReverse=!0;break;default:r.rotate=Pe.convertInt(i)}if(r.keyTimes.length){var n=r.getAttribute("keyPoints");if(""!==n){var s=ne.toFractionList(n);s.length===r.keyTimes.length&&(r.keyPoints=s)}}for(var o=0;o<e.children.length;o++){var l=e.children[o];if("mpath"===l.tagName){var c=L(l);if(c&&(N.shape(c)||N.use(c))){r.mpath=c;break}}}}return r}return l(t,ne),s(t,[{key:"instanceType",get:function(){return 49160}}]),t}(),Be=squared.lib.dom,Ce=squared.lib.util,Le=Be.getKeyframeRules(),Ie={"animation-delay":"0s","animation-duration":"0s","animation-iteration-count":"1","animation-play-state":"running","animation-direction":"normal","animation-fill-mode":"none","animation-timing-function":"ease"},Xe=RegExp("cubic-bezier\\(".concat(w.ZERO_ONE,", ").concat(w.DECIMAL,", ").concat(w.ZERO_ONE,", ").concat(w.DECIMAL,"\\)"));function ze(e,t){var r=Be.cssAttribute(e,t);if("animation-timing-function"===t){for(var i=[];""!==r;){var a=r.indexOf(",");if(-1===a){i.push(r);break}var n=r.substring(0,a);if(n.startsWith("steps")||n.startsWith("cubic-bezier")){var s=r.indexOf(")",a)+1;n+=r.substring(a,s),a=s}i.push(n),r=r.substring(a+1).trim()}return i}return Ce.flatMap(r.split(/,/),function(e){return e.trim()})}function je(e){return e.sort(function(e,t){return e.index>=t.index?1:-1})}var De=function(e){return function(t){function r(){var e;return a(this,r),(e=f(this,u(r).apply(this,arguments))).transformed=null,e}return l(r,e),s(r,[{key:"getTransforms",value:function(e){var t=e||this.element;return M.parse(t)||H.convertTransforms(t.transform.baseVal)}},{key:"getAnimations",value:function(e){var t=e||this.element,r=[],i=0;function a(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";""===a&&i++,e.delay=t,e.group={id:i,name:a},r.push(e)}for(var n=0;n<t.children.length;n++){var s=t.children[n];if(s instanceof SVGAnimationElement){var o=s.attributes.getNamedItem("begin");if(o&&/^[a-zA-Z]+$/.test(o.value.trim()))continue;var l=o?X(o.value.split(";").map(function(e){return P(e)})):[0];if(l.length)switch(s.tagName){case"set":for(var u=Array.isArray(f=l),c=0,f=u?f:f[Symbol.iterator]();;){var h;if(u){if(c>=f.length)break;h=f[c++]}else{if((c=f.next()).done)break;h=c.value}var v=h;a(new J(s),v)}break;case"animate":for(var p=Array.isArray(d=l),y=0,d=p?d:d[Symbol.iterator]();;){var g;if(p){if(y>=d.length)break;g=d[y++]}else{if((y=d.next()).done)break;g=y.value}var b=g;a(new ne(s),b)}break;case"animateTransform":for(var k=Array.isArray(A=l),S=0,A=k?A:A[Symbol.iterator]();;){var x;if(k){if(S>=A.length)break;x=A[S++]}else{if((S=A.next()).done)break;x=S.value}var T=x,_=new se(s);H.asShape(this)&&this.path&&(_.transformFrom=this.path.draw(void 0,void 0,!0)),a(_,T)}break;case"animateMotion":for(var R=Array.isArray(V=l),w=0,V=R?V:V[Symbol.iterator]();;){var E;if(R){if(w>=V.length)break;E=V[w++]}else{if((w=V.next()).done)break;E=w.value}var N=E;a(new Oe(s),N)}}}}var O=ze(t,"animation-name");if(O.length){var B={};for(var C in Ie){var L=ze(t,C);for(0===L.length&&L.push(Ie[C]);L.length<O.length;)L.push.apply(L,m(L.slice(0)));L.length=O.length,B[C]=L}var I=[],z=[];O.forEach(function(e,r){var n=Le.get(e);if(n){var s=P(B["animation-duration"][r]);s>0&&function(){var o="paused"===B["animation-play-state"][r],l=P(B["animation-delay"][r]),u=B["animation-iteration-count"][r],c=B["animation-fill-mode"][r],f="".concat(e,"_").concat(r);z.push({name:f,paused:o,delay:l,duration:s,iterationCount:u,fillMode:c}),i++;var h={},v={};for(var p in n){var y=parseInt(p)/100;for(var d in n[p]){var g=Ie[d]?v:h;void 0===g[d]&&(g[d]=[]),g[d].push({index:y,value:n[p][d]})}}if(h.transform){var b=function(){if(S){if(A>=k.length)return"break";x=k[A++]}else{if((A=k.next()).done)return"break";x=A.value}var e=x,r=M.parse(t,e.value);if(r){var i=function(e){var r=h["transform-origin"]&&h["transform-origin"].find(function(t){return t.index===e});if(r)return M.origin(t,r.value)}(e.index);r.forEach(function(t){var r,a,n,s=t.matrix;switch(t.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:r="translate",a="".concat(s.e," ").concat(s.f);break;case SVGTransform.SVG_TRANSFORM_SCALE:r="scale",a="".concat(s.a," ").concat(s.d),!i||0===e.index&&0===i.x&&0===i.y||(n={x:i.x*(1-s.a),y:i.y*(1-s.d)});break;case SVGTransform.SVG_TRANSFORM_ROTATE:r="rotate",a="".concat(t.angle," ").concat(i?"".concat(i.x," ").concat(i.y):"0 0");break;case SVGTransform.SVG_TRANSFORM_SKEWX:r="skewX",a=""+t.angle,!i||0===e.index&&0===i.y||(n={x:i.y*s.c*-1,y:0});break;case SVGTransform.SVG_TRANSFORM_SKEWY:r="skewY",a=""+t.angle,!i||0===e.index&&0===i.x||(n={x:0,y:i.x*s.b*-1});break;default:return}void 0===h[r]&&(h[r]=[]);var o=h[r].findIndex(function(t){return t.index===e.index});-1!==o?(h[r][o].value=a,h[r][o].transformOrigin=n):h[r].push({index:e.index,value:a,transformOrigin:n})})}},k=je(h.transform),S=Array.isArray(k),A=0;for(k=S?k:k[Symbol.iterator]();;){var x;if("break"===b())break}}delete h.transform,delete h["transform-origin"];var T=function(e){var i=h[e],n=void 0;switch(e){case"rotate":case"scale":case"skewX":case"skewY":case"translate":(n=new se).attributeName="transform",n.baseFrom=M.valueAsInitial(e),n.setType(e);break;default:(n=new ne).attributeName=e,n.baseFrom=Ce.optionalAsString(t,"".concat(e,".baseVal.valueAsString"))||Be.cssAttribute(t,e)}var p=B["animation-timing-function"][r],y=B["animation-direction"][r],d=[],g=[],b=[];je(i);for(var k=function(e){if(d.push(i[e].index),g.push(i[e].value),e<i.length-1){var t=v["animation-timing-function"]&&v["animation-timing-function"].find(function(t){return t.index===i[e].index});b.push(t?t.value:p)}var r=i[e].transformOrigin;r&&H.asAnimateTransform(n)&&(void 0===n.transformOrigin&&(n.transformOrigin=[]),n.transformOrigin[e]=r)},S=0;S<i.length;S++)k(S);a(n,l,f),n.paused=o,n.duration=s,b.every(function(e){return"linear"===e})?(n.values=g,n.keyTimes=d):function(){for(var r=[],i=[],a=[],s=0;s<b.length;s++){if(ee[b[s]])b[s]=ee[b[s]];else if(b[s].startsWith("step")){0===s&&""===g[s]&&n.baseFrom&&(g[s]=n.baseFrom);var o=ne.toStepFractionList(e,d,g,b[s],s,F(),G(t));if(o){r.push.apply(r,m(o[0])),i.push.apply(i,m(o[1])),o[0].forEach(function(){return a.push(ee.step)});continue}b[s]=ee.linear}else{var l=Xe.exec(b[s]);b[s]=l?"".concat(l[1]," ").concat(l[2]," ").concat(l[3]," ").concat(l[4]):ee.ease}r.push(d[s]),i.push(g[s]),a.push(b[s])}r.push(d.pop()),i.push(g.pop()),n.values=i,n.keyTimes=r,n.keySplines=a}(),n.iterationCount="infinite"!==u?parseFloat(u):-1,n.fillForwards="forwards"===c||"both"===c,n.fillBackwards="backwards"===c||"both"===c,n.reverse=y.endsWith("reverse"),n.alternate=(-1===n.iterationCount||n.iterationCount>1)&&y.startsWith("alternate"),Ce.hasValue(n.baseFrom)&&0!==n.keyTimes[0]&&(n.keyTimes.unshift(0),n.values.unshift(n.baseFrom),n.keySplines&&n.keySplines.unshift(p)),I.push(n)};for(var _ in h)T(_)}()}}),z.reverse();for(var j=0;j<I.length;j++){I[j].setGroupOrder(z)}}for(var D=0;D<r.length;D++){r[D].parent=this}return r}},{key:"name",set:function(e){this._name=e},get:function(){return void 0===this._name&&(this._name=H.setName(this.element)),this._name}},{key:"transform",get:function(){return void 0===this._transform&&(this._transform=this.getTransforms()),this._transform}},{key:"animation",get:function(){return void 0===this._animation&&(this._animation=this.getAnimations()),this._animation}},{key:"visible",set:function(e){B(this.element,e)},get:function(){return O(this.element)}},{key:"opacity",set:function(e){C(this.element,e)},get:function(){return Be.cssAttribute(this.element,"opacity")||"1"}}]),r}()},qe=squared.lib.dom;function We(e){var t=e.parentElement instanceof HTMLElement;return"svg"===e.tagName&&(qe.isUserAgent(4)&&!t||qe.isUserAgent(16)&&t)}var Ye=function(e){return function(t){function r(){return a(this,r),f(this,u(r).apply(this,arguments))}return l(r,e),s(r,[{key:"setRect",value:function(){var e=this.x,t=this.y,r=this.width,i=this.height,a=this.parent;a&&(e=a.refitX(e),t=a.refitY(t),r=a.refitSize(r),i=a.refitSize(i)),this.setBaseValue("x",e),this.setBaseValue("y",t),this.setBaseValue("width",r),this.setBaseValue("height",i)}},{key:"_getElement",value:function(){switch(this.element.tagName){case"svg":case"use":case"image":return this.element;default:return null}}},{key:"x",set:function(e){this._x=e},get:function(){if(void 0!==this._x)return this._x;var e=this._getElement();return e?e.x.baseVal.value:0}},{key:"y",set:function(e){this._y=e},get:function(){if(void 0!==this._y)return this._y;var e=this._getElement();return e?e.y.baseVal.value:0}},{key:"width",set:function(e){this._width=e},get:function(){if(void 0!==this._width)return this._width;var e=this._getElement();return e?We(e)?e.getBoundingClientRect().width:e.width.baseVal.value:0}},{key:"height",set:function(e){this._height=e},get:function(){if(void 0!==this._height)return this._height;var e=this._getElement();return e?We(e)?e.getBoundingClientRect().height:e.height.baseVal.value:0}}]),r}()},Ue=squared.lib.dom,He=squared.lib.util;function Ke(e,t){if(t){var r=Ue.cssInheritAttribute(e,"fill");if(""!==r){var i=w.URL.exec(r);if(i)return t.definitions.pattern.get(i[1])}}}var Ze=function(e){function t(e){var r;return a(this,t),(r=f(this,u(t).call(this))).element=e,r.aspectRatio={x:0,y:0,width:0,height:0,position:{x:0,y:0},parent:{x:0,y:0},unit:1},r._clipRegion=[],r}return l(t,squared.lib.base.Container),s(t,[{key:"append",value:function(e,r){return e.parent=this,e.viewport=r||this.getViewport(),v(u(t.prototype),"append",this).call(this,e)}},{key:"build",value:function(e,t,r){void 0===r&&(r=this.element),this.clear();for(var i=this.getViewport(),a=!1,n=0;n<r.children.length;n++){var s=r.children[n],o=void 0;if(N.svg(s))o=new squared.svg.Svg(s,!1),this.setAspectRatio(o,s.viewBox.baseVal),a=!0;else if(N.g(s))o=new squared.svg.SvgG(s),this.setAspectRatio(o);else if(N.use(s)){var l=L(s);if(l)if(N.symbol(l))o=new squared.svg.SvgUseSymbol(s,l),this.setAspectRatio(o,l.viewBox.baseVal),a=!0;else if(N.image(l))o=new squared.svg.SvgImage(s,l);else if(N.shape(l)){var u=Ke(s,i);u?(o=new squared.svg.SvgUsePattern(s,l,u),this.setAspectRatio(o)):o=new squared.svg.SvgUse(s,l)}}else if(N.image(s))o=new squared.svg.SvgImage(s);else if(N.shape(s)){var c=Ke(s,i);c?(o=new squared.svg.SvgShapePattern(s,c),this.setAspectRatio(o)):o=new squared.svg.SvgShape(s)}o&&(this.append(o,i),o.build(e,t))}if(H.asSvg(this)&&this.documentRoot)(this.aspectRatio.x<0||this.aspectRatio.y<0)&&this.clipViewBox(this.aspectRatio.x,this.aspectRatio.y,this.aspectRatio.width,this.aspectRatio.height,!0);else if(a&&this.hasViewBox()&&(0!==this.aspectRatio.x||0!==this.aspectRatio.y)){var f=H.toBoxRect(this.getPathAll(!1)),h=this.refitX(this.aspectRatio.x),v=this.refitY(this.aspectRatio.y);(f.left<h||f.top<v)&&this.clipViewBox(f.left,f.top,this.refitSize(this.aspectRatio.width),this.refitSize(this.aspectRatio.height))}}},{key:"hasViewBox",value:function(){return H.asSvg(this)&&!!this.element.viewBox.baseVal||H.asUseSymbol(this)&&!!this.symbolElement.viewBox.baseVal}},{key:"clipViewBox",value:function(e,t,r,i){this.clipRegion=arguments.length>4&&void 0!==arguments[4]&&arguments[4]?H.drawRect(r-e,i-t,e<0?-1*e:0,t<0?-1*t:0):H.drawRect(r,i,e,t)}},{key:"synchronize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.each(function(t){return t.synchronize(e)})}},{key:"refitX",value:function(e){return(e-this.aspectRatio.x)*this.aspectRatio.unit-this.aspectRatio.parent.x+this.aspectRatio.position.x}},{key:"refitY",value:function(e){return(e-this.aspectRatio.y)*this.aspectRatio.unit-this.aspectRatio.parent.y+this.aspectRatio.position.y}},{key:"refitSize",value:function(e){return e*this.aspectRatio.unit}},{key:"refitPoints",value:function(e){for(var t=Array.isArray(i=e),r=0,i=t?i:i[Symbol.iterator]();;){var a;if(t){if(r>=i.length)break;a=i[r++]}else{if((r=i.next()).done)break;a=r.value}var n=a;n.x=this.refitX(n.x),n.y=this.refitY(n.y),void 0!==n.rx&&void 0!==n.ry&&(n.rx*=this.aspectRatio.unit,n.ry*=this.aspectRatio.unit)}return e}},{key:"requireRefit",value:function(){return 0!==this.aspectRatio.x||0!==this.aspectRatio.y||0!==this.aspectRatio.position.x||0!==this.aspectRatio.position.y||0!==this.aspectRatio.parent.x||0!==this.aspectRatio.parent.y||1!==this.aspectRatio.unit}},{key:"getPathAll",value:function(){var e=[],t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.cascade():this,r=Array.isArray(t),i=0;for(t=r?t:t[Symbol.iterator]();;){var a;if(r){if(i>=t.length)break;a=t[i++]}else{if((i=t.next()).done)break;a=i.value}var n=a;H.asShape(n)&&n.path&&n.path.value&&e.push(n.path.value)}return e}},{key:"getViewport",value:function(){return this.viewport||(H.asSvg(this)?this:void 0)}},{key:"setAspectRatio",value:function(e,t){var r=function(e){for(;e;){if(e.hasViewBox())return e;e=e.parent}}(this);if(r){var i=e.aspectRatio;if(t&&(He.cloneObject(t,i),i.width>0&&i.height>0)){var a=r.aspectRatio.width||r.viewBox.width,n=r.aspectRatio.height||r.viewBox.height,s=i.width/i.height,o=a/n;o>s?i.position.x=(a-n*s)/2:o<s&&(i.position.y=(n-a*(1/s))/2),i.unit=Math.min(a/i.width,n/i.height)}i.parent.x=r.aspectRatio.x+r.aspectRatio.x*(r.aspectRatio.unit-1),i.position.x*=r.aspectRatio.unit,i.position.x+=r.aspectRatio.position.x-r.aspectRatio.parent.x,i.parent.y=r.aspectRatio.y+r.aspectRatio.y*(r.aspectRatio.unit-1),i.position.y*=r.aspectRatio.unit,i.position.y+=r.aspectRatio.position.y-r.aspectRatio.parent.y,i.unit*=r.aspectRatio.unit}}},{key:"clipRegion",set:function(e){""!==e?this._clipRegion.push(e):this._clipRegion.length=0},get:function(){return this._clipRegion.length?this._clipRegion.join(";"):""}},{key:"instanceType",get:function(){return 2}}]),t}(),$e=squared.lib.color,Qe=squared.lib.dom,Je=squared.lib.util;function et(e){var t=[];return Array.from(e.getElementsByTagName("stop")).forEach(function(e){var r=$e.parseRGBA(Qe.cssAttribute(e,"stop-color"),Qe.cssAttribute(e,"stop-opacity"));r&&t.push({color:r.valueRGBA,offset:Qe.cssAttribute(e,"offset"),opacity:r.alpha})}),t}function tt(e){for(var t={},r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];for(var n=0;n<i.length;n++){var s=i[n];e[s]&&(t[s]=e[s].baseVal.value,t["".concat(s,"AsString")]=e[s].baseVal.valueAsString)}return t}var rt=function(e){function t(e){var r,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return a(this,t),(r=f(this,u(t).call(this,e))).element=e,r.documentRoot=i,r.definitions={clipPath:new Map,pattern:new Map,gradient:new Map},r.init(),r}return l(t,Ge(Ye(Z(De(Ze))))),s(t,[{key:"build",value:function(e,r){this.setRect(),v(u(t.prototype),"build",this).call(this,e,r)}},{key:"synchronize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;!this.documentRoot&&this.animation.length&&this.mergeAnimations(this.getAnimateViewRect(),this.getAnimateTransform(),e),v(u(t.prototype),"synchronize",this).call(this,e)}},{key:"init",value:function(){var e=this;this.documentRoot&&Je.cloneObject(this.element.viewBox.baseVal,this.aspectRatio);[this.element].concat(m(Array.from(this.element.querySelectorAll("defs")))).forEach(function(t){t.querySelectorAll(":scope > set, :scope > animate, :scope > animateTransform, :scope > animateMotion").forEach(function(t){var r=L(t,e.documentRoot?e.element:void 0);r&&(t.parentElement&&t.parentElement.removeChild(t),r.appendChild(t))}),t.querySelectorAll("clipPath, pattern, linearGradient, radialGradient").forEach(function(t){if(t.id){var r="#".concat(t.id);N.clipPath(t)?e.definitions.clipPath.set(r,t):N.pattern(t)?e.definitions.pattern.set(r,t):N.linearGradient(t)?e.definitions.gradient.set(r,Object.assign({element:t,type:"linear",colorStop:et(t)},tt(t,"x1","x2","y1","y2"))):N.radialGradient(t)&&e.definitions.gradient.set(r,Object.assign({element:t,type:"radial",colorStop:et(t)},tt(t,"cx","cy","r","fx","fy")))}})})}},{key:"viewBox",get:function(){return this.element.viewBox.baseVal?this.element.viewBox.baseVal:Qe.getDOMRect(this.element)}},{key:"instanceType",get:function(){return 18}}]),t}(),it=function(){function e(t){a(this,e),this.element=t}return s(e,[{key:"build",value:function(e,t,r){}},{key:"synchronize",value:function(e){}},{key:"instanceType",get:function(){return 4}}]),e}(),at=squared.lib.color,nt=squared.lib.dom,st=squared.lib.util,ot={url:w.URL,inset:RegExp("inset\\(".concat(w.LENGTH,"\\s?").concat(w.LENGTH,"?\\s?").concat(w.LENGTH,"?\\s?").concat(w.LENGTH,"?\\)")),polygon:/polygon\(([^)]+)\)/,circle:RegExp("circle\\(".concat(w.LENGTH,"(?: at ").concat(w.LENGTH," ").concat(w.LENGTH,")?\\)")),ellipse:RegExp("ellipse\\(".concat(w.LENGTH," ").concat(w.LENGTH,"(?: at ").concat(w.LENGTH," ").concat(w.LENGTH,")?\\)"))},lt=function(e){return function(r){function i(){return a(this,i),f(this,u(i).apply(this,arguments))}return l(i,e),s(i,[{key:"setPaint",value:function(e){var r=this;this.resetPaint(),this._setAttribute("color",!0),this._setColor("fill"),this._setAttribute("fill-opacity"),this._setAttribute("fill-rule"),this._setColor("stroke"),this._setAttribute("stroke-opacity"),this._setAttribute("stroke-width"),this._setAttribute("stroke-linecap"),this._setAttribute("stroke-linejoin"),this._setAttribute("stroke-miterlimit"),this._setAttribute("stroke-dasharray"),this._setAttribute("stroke-dashoffset"),this._setAttribute("clip-rule");var i=this._getAttribute("clip-path",!1,!1);if(""!==i)for(var a in ot){var n=ot[a].exec(i);if(n){if("url"===a)return void(this.clipPath=n[1]);if(e&&e.length){var s=function(){var t=function(e,t){return nt.convertClientUnit(e,0===t?l:u,i,s)},i=F(),s=G(r.element),o=H.toBoxRect(e),l=o.right-o.left,u=o.bottom-o.top,c=r.parent;switch(a){case"inset":var f=0,h=0,v=t(n[1],1),p=0;n[4]?(f=o.left+t(n[4],0),h=o.right-t(n[2],0),p=o.bottom-t(n[3],1)):n[2]?(f=t(n[2],0),h=o.right-f,p=o.bottom-(n[3]?t(n[3],1):v),f+=o.left):(f=o.left+v,h=o.right-v,p=o.bottom-v);var y=[{x:f,y:v+=o.top},{x:h,y:v},{x:h,y:p},{x:f,y:p}];return c&&c.refitPoints(y),r.clipPath=H.drawPolygon(y),{v:void 0};case"polygon":var m=n[1].split(",").map(function(e){var r=d(e.trim().split(" ").map(function(e,r){return t(e,r)}),2),i=r[0],a=r[1];return{x:i+=o.left,y:a+=o.top}});return c&&c.refitPoints(m),r.clipPath=H.drawPolygon(m),{v:void 0};default:if("circle"===a||"ellipse"===a){var g,b;"circle"===a?b=g=t(n[1],l<u?0:1):(g=t(n[1],0),b=t(n[2],1));var k=o.left,S=o.top;if(n.length>=4){var A=l<u?0:1;k+=t(n[n.length-2],A),S+=t(n[n.length-1],A)}c&&(k=c.refitX(k),S=c.refitX(S),g=c.refitSize(g),b=c.refitSize(b)),r.clipPath=H.drawEllipse(k,S,g,b)}return{v:void 0}}}();if("object"===t(s))return s.v}}}}},{key:"resetPaint",value:function(){this.fill="black",this.fillPattern="",this.fillOpacity="1",this.fillRule="nonzero",this.stroke="",this.strokeWidth="1",this.strokePattern="",this.strokeOpacity="1",this.strokeLinecap="butt",this.strokeLinejoin="miter",this.strokeMiterlimit="4",this.strokeDashArray="",this.strokeDashOffset="0",this.color="",this.clipPath="",this.clipRule=""}},{key:"_setColor",value:function(e){var t=this._getAttribute(e),r=w.URL.exec(t);if(r)this["".concat(e,"Pattern")]=r[1];else if(""!==t){var i;switch(t.toLowerCase()){case"none":case"transparent":case"rgba(0, 0, 0, 0)":this[e]="";break;case"currentcolor":i=at.parseRGBA(this.color||nt.cssAttribute(this.element,e,!0));break;default:i=at.parseRGBA(t)}i&&(this[e]=i.valueRGB)}}},{key:"_setAttribute",value:function(e){var t=this._getAttribute(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]);""!==t&&(this[st.convertCamelCase(e)]=t)}},{key:"_getAttribute",value:function(e){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=nt.cssAttribute(this.element,e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]);if(t&&""===r){if(this.patternParent)switch(e){case"fill-opacity":case"stroke-opacity":break;default:return r}for(var i=this.useParent||this.parent;i&&(r=nt.cssAttribute(i.element,e),!st.isString(r));)i=i.parent}return r}}]),i}()},ut=function(e){function t(e){var r;return a(this,t),(r=f(this,u(t).call(this,e))).element=e,r}return l(t,lt(De(Ze))),s(t,[{key:"build",value:function(e,r){v(u(t.prototype),"build",this).call(this,e,r),this.setPaint(this.getPathAll())}},{key:"instanceType",get:function(){return 34}}]),t}(),ct=squared.lib.util,ft=function(e){function t(e,r){var i;return a(this,t),(i=f(this,u(t).call(this,e))).element=e,i.imageElement=null,i.__get_transform=!1,i.__get_animation=!1,r&&(i.imageElement=r),i}return l(t,Ye(Z(De(it)))),s(t,[{key:"build",value:function(){this.setRect()}},{key:"extract",value:function(e){var t=H.filterTransforms(this.transform,e),r=this.x,i=this.y,a=this.width,n=this.height;if(t.length){t.reverse();for(var s=0;s<t.length;s++){var o=t[s],l=o.matrix,u=r;switch(r=E.applyX(l,u,i),i=E.applyY(l,u,i),o.type){case SVGTransform.SVG_TRANSFORM_SCALE:a*=l.a,n*=l.d;break;case SVGTransform.SVG_TRANSFORM_ROTATE:0!==o.angle&&(l.a<0&&(r+=l.a*a),l.c<0&&(r+=l.c*a),l.b<0&&(i+=l.b*n),l.d<0&&(i+=l.d*n),void 0!==this.rotateAngle?this.rotateAngle+=o.angle:this.rotateAngle=o.angle)}}this.transformed=t}this.parent&&(r=this.parent.refitX(r),i=this.parent.refitY(i),a=this.parent.refitSize(a),n=this.parent.refitSize(n)),this.translationOffset&&(r+=this.translationOffset.x,i+=this.translationOffset.y),this.setBaseValue("x",r),this.setBaseValue("y",i),this.setBaseValue("width",a),this.setBaseValue("height",n)}},{key:"x",set:function(e){y(u(t.prototype),"x",e,this,!0)},get:function(){var e=v(u(t.prototype),"x",this);return 0===e&&this.imageElement?this.imageElement.x.baseVal.value:e}},{key:"y",set:function(e){y(u(t.prototype),"y",e,this,!0)},get:function(){var e=v(u(t.prototype),"y",this);return 0===e&&this.imageElement?this.imageElement.y.baseVal.value:e}},{key:"width",set:function(e){y(u(t.prototype),"width",e,this,!0)},get:function(){var e=v(u(t.prototype),"width",this);return 0===e&&this.imageElement?this.imageElement.width.baseVal.value:e}},{key:"height",set:function(e){y(u(t.prototype),"height",e,this,!0)},get:function(){var e=v(u(t.prototype),"height",this);return 0===e&&this.imageElement?this.imageElement.height.baseVal.value:e}},{key:"href",get:function(){var e=this.imageElement||this.element;return N.image(e)?ct.resolvePath(e.href.baseVal):""}},{key:"transform",get:function(){var e=v(u(t.prototype),"transform",this);return this.__get_transform||(this.imageElement&&e.push.apply(e,m(this.getTransforms(this.imageElement))),this.__get_transform=!0),e}},{key:"animation",get:function(){var e=v(u(t.prototype),"animation",this);return this.__get_animation||(this.imageElement&&e.push.apply(e,m(this.getAnimations(this.imageElement))),this.__get_animation=!0),e}},{key:"instanceType",get:function(){return 4100}}]),t}(),ht=function(e){function t(e){var r;return a(this,t),(r=f(this,u(t).call(this,e))).element=e,r.name="",r.value="",r.transformed=null,r.init(),r}return l(t,lt(Z(it))),s(t,[{key:"draw",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r||(this.transformed=null);var i=this.parent,a=this.element,n=!!i&&i.requireRefit(),s="";if(N.path(a)){if(s=this.getBaseValue("d"),e&&e.length||n){var o=H.getPathCommands(s);if(o.length){var l=H.getPathPoints(o);if(l.length){if(e&&e.length){if("function"==typeof t){var u=d(t.call(this,a,e),2);this.transformResidual=u[0],e=u[1]}e.length&&(l=this.transformPoints(e,l),this.transformed=e)}n&&i.refitPoints(l),s=H.drawPath(H.setPathPoints(o,l))}}}}else if(N.line(a)){var c=[{x:this.getBaseValue("x1"),y:this.getBaseValue("y1")},{x:this.getBaseValue("x2"),y:this.getBaseValue("y2")}];if(e&&e.length){if("function"==typeof t){var f=d(t.call(this,a,e),2);this.transformResidual=f[0],e=f[1]}e.length&&(c=this.transformPoints(e,c),this.transformed=e)}n&&i.refitPoints(c),s=H.drawPolyline(c)}else if(N.circle(a)||N.ellipse(a)){var h,v;N.ellipse(a)?(h=this.getBaseValue("rx"),v=this.getBaseValue("ry")):v=h=this.getBaseValue("r");var p=[{x:this.getBaseValue("cx"),y:this.getBaseValue("cy"),rx:h,ry:v}];if(e&&e.length){if("function"==typeof t){var y=d(t.call(this,a,e,h,v),2);this.transformResidual=y[0],e=y[1]}e.length&&(p=this.transformPoints(e,p),this.transformed=e)}n&&i.refitPoints(p);var m=p[0];s=H.drawEllipse(m.x,m.y,m.rx,m.ry)}else if(N.rect(a)){var g=this.getBaseValue("x"),b=this.getBaseValue("y"),k=this.getBaseValue("width"),S=this.getBaseValue("height");if(e&&e.length){var A=[{x:g,y:b},{x:g+k,y:b},{x:g+k,y:b+S},{x:g,y:b+S}];if("function"==typeof t){var x=d(t.call(this,a,e),2);this.transformResidual=x[0],e=x[1]}e.length&&(A=this.transformPoints(e,A),this.transformed=e),n&&i.refitPoints(A),s=H.drawPolygon(A)}else n&&(g=i.refitX(g),b=i.refitY(b),k=i.refitSize(k),S=i.refitSize(S)),s=H.drawRect(k,S,g,b)}else if(N.polygon(a)||N.polyline(a)){var T=this.getBaseValue("points");if(e&&e.length){if("function"==typeof t){var _=d(t.call(this,a,e),2);this.transformResidual=_[0],e=_[1]}e.length&&(T=this.transformPoints(e,T),this.transformed=e)}n&&(null===this.transformed&&(T=H.clonePoints(T)),i.refitPoints(T)),s="polygon"===a.tagName?H.drawPolygon(T):H.drawPolyline(T)}return r||(this.value=s,this.setPaint([s])),s}},{key:"transformPoints",value:function(e,t,r){return H.applyTransforms(e,t,M.origin(this.element),r)}},{key:"init",value:function(){var e=this.element;N.path(e)?this.setBaseValue("d"):N.line(e)?(this.setBaseValue("x1"),this.setBaseValue("y1"),this.setBaseValue("x2"),this.setBaseValue("y2")):N.rect(e)?(this.setBaseValue("x"),this.setBaseValue("y"),this.setBaseValue("width"),this.setBaseValue("height")):N.circle(e)?(this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("r")):N.ellipse(e)?(this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("rx"),this.setBaseValue("ry")):(N.polygon(e)||N.polyline(e))&&this.setBaseValue("points",H.clonePoints(e.points))}},{key:"transform",get:function(){return void 0===this._transform&&(this._transform=M.parse(this.element)||H.convertTransforms(this.element.transform.baseVal)),this._transform}},{key:"instanceType",get:function(){return 1028}}],[{key:"build",value:function(e,t,r,i){return e.draw(H.filterTransforms(t,r&&r[e.element.tagName]),i),e}},{key:"getCenter",value:function(e){for(var t=e[0].x,r=e[0].y,i=t,a=r,n=1;n<e.length;n++){var s=e[n];s.x<t?t=s.x:s.x>i&&(i=s.x),s.y<r?r=s.y:s.y>i&&(a=s.y)}return{x:(t+i)/2,y:(r+a)/2}}}]),t}(),vt=function(e){function t(e,r){var i;return a(this,t),(i=f(this,u(t).call(this,e))).element=e,i.patternElement=r,i}return l(t,De(Ze)),s(t,[{key:"build",value:function(e,r){v(u(t.prototype),"build",this).call(this,e,r,this.patternElement)}},{key:"animation",get:function(){return[]}},{key:"instanceType",get:function(){return 130}}]),t}(),pt=function(e){function t(e){var r,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return a(this,t),r=f(this,u(t).call(this,e)),i&&r.setPath(),r}return l(t,Ge(De(it))),s(t,[{key:"setPath",value:function(){this.path=new ht(this.element)}},{key:"build",value:function(e,t){this.path&&(this.path.parent=this.parent,ht.build(this.path,this.transform,e,t))}},{key:"synchronize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;this.path&&this.animation.length&&this.mergeAnimations(this.getAnimateShape(t||this.element),t?[]:this.getAnimateTransform(),e,this.path)}},{key:"path",set:function(e){this._path=e,e&&(e.name=this.name)},get:function(){return this._path}},{key:"instanceType",get:function(){return 2052}}]),t}(),yt=squared.lib.util,dt=function(e){function t(e,r){var i;return a(this,t),(i=f(this,u(t).call(this,e))).element=e,i.patternElement=r,i}return l(t,lt(Z(De(Ze)))),s(t,[{key:"build",value:function(e,t,r){var i=this;void 0===r&&(r=this.element);var a=ht.build(new ht(r),this.transform,e);a.value&&function(){i.clipRegion=a.value,a.clipPath&&(i.clipRegion=a.clipPath);var n=[a.value];i.setPaint(n);for(var s=H.toBoxRect(n),o=i.patternElement.width.baseVal.valueAsString,l=i.patternElement.height.baseVal.valueAsString,u=yt.isPercent(o)?parseInt(o)/100:parseFloat(o),c=yt.isPercent(l)?parseInt(l)/100:parseFloat(l),f=(s.right-s.left)*u,h=(s.bottom-s.top)*c,v=1,p=0,y=function(){var a=s.top+p*h,n=1,o=0,l=function(){var l=s.left+o*f,c=new vt(r,i.patternElement);c.build(e,t),c.cascade().forEach(function(r){H.asShape(r)&&r.path&&(r.path.patternParent=i,r.path.refitBaseValue(l,a),ht.build(r.path,r.transform,e,t),r.path.fillOpacity=""+parseFloat(r.path.fillOpacity)*parseFloat(i.fillOpacity),r.path.clipPath=H.drawRect(f,h,l,a)+(""!==r.path.clipPath?";".concat(r.path.clipPath):""))}),i.append(c),n-=u,o++};do{l()}while(n>0);p++,v-=c};v>0;)y();if(""!==i.stroke&&parseFloat(i.strokeWidth)>0){a.fill="",a.fillOpacity="0",a.stroke=i.stroke,a.strokeWidth=i.strokeWidth;var d=new pt(r,!1);d.path=a,i.append(d)}i.drawRegion=s}()}},{key:"instanceType",get:function(){return 258}}]),t}(),mt=function(e){function t(e,r){var i;return a(this,t),(i=f(this,u(t).call(this,e,!1))).element=e,i.shapeElement=r,i.__get_transform=!1,i.__get_animation=!1,i.setPath(),i}return l(t,lt(Ye(Z(pt)))),s(t,[{key:"setPath",value:function(){this.path=new ht(this.shapeElement),this.path.useParent=this}},{key:"build",value:function(e,r){v(u(t.prototype),"build",this).call(this,e,r),this.setPaint(this.path?[this.path.value]:void 0)}},{key:"synchronize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.animation.length&&this.mergeAnimations(this.getAnimateViewRect(),this.getAnimateTransform(),e),v(u(t.prototype),"synchronize",this).call(this,e,this.shapeElement)}},{key:"transform",get:function(){var e=v(u(t.prototype),"transform",this);return this.__get_transform||(e.push.apply(e,m(this.getTransforms(this.shapeElement))),this.__get_transform=!0),e}},{key:"animation",get:function(){var e=v(u(t.prototype),"animation",this);return this.__get_animation||(e.push.apply(e,m(this.getAnimations(this.shapeElement))),this.__get_animation=!0),e}},{key:"instanceType",get:function(){return 10244}}]),t}(),gt=function(e){function t(e,r,i){var n;return a(this,t),(n=f(this,u(t).call(this,e,i))).element=e,n.shapeElement=r,n}return l(t,Ge(Ye(dt))),s(t,[{key:"build",value:function(e,r){v(u(t.prototype),"build",this).call(this,e,r,this.shapeElement)}},{key:"synchronize",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=[this.animation.filter(function(t){return void 0===e.validateBaseValue(t.attributeName,0)||"x"===t.attributeName||"y"===t.attributeName}),this.getAnimateTransform()],a=i[0],n=i[1];(a.length||n.length)&&this.mergeAnimations(this.getAnimateViewRect(a),n,r),v(u(t.prototype),"synchronize",this).call(this,r)}},{key:"instanceType",get:function(){return 514}}]),t}(),bt=squared.lib.dom,kt=function(e){function t(e,r){var i;return a(this,t),(i=f(this,u(t).call(this,e))).element=e,i.symbolElement=r,i}return l(t,lt(Ge(Ye(Z(De(Ze)))))),s(t,[{key:"build",value:function(e,r){this.setRect(),v(u(t.prototype),"build",this).call(this,e,r,this.symbolElement);var i=this.getBaseValue("x",0),a=this.getBaseValue("y",0);if(0!==i||0!==a){var n={x:i,y:a};this.cascade().forEach(function(e){return e.translationOffset=n})}this.setPaint(this.getPathAll())}},{key:"synchronize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.animation.length&&this.mergeAnimations(this.getAnimateViewRect(),this.getAnimateTransform(),e),v(u(t.prototype),"synchronize",this).call(this,e)}},{key:"viewBox",get:function(){return this.symbolElement.viewBox.baseVal?this.symbolElement.viewBox.baseVal:bt.getDOMRect(this.element)}},{key:"instanceType",get:function(){return 66}}]),t}(),St={constant:te,util:W};e.Svg=rt,e.SvgAnimate=ne,e.SvgAnimateMotion=Oe,e.SvgAnimateTransform=se,e.SvgAnimation=J,e.SvgBaseVal=Z,e.SvgBuild=H,e.SvgContainer=Ze,e.SvgElement=it,e.SvgG=ut,e.SvgImage=ft,e.SvgPaint=lt,e.SvgPath=ht,e.SvgPattern=vt,e.SvgShape=pt,e.SvgShapePattern=dt,e.SvgSynchronize=Ge,e.SvgUse=mt,e.SvgUsePattern=gt,e.SvgUseSymbol=kt,e.SvgView=De,e.SvgViewRect=Ye,e.lib=St,Object.defineProperty(e,"__esModule",{value:!0})});
