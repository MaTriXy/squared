!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e=e||self).squared=e.squared||{},e.squared.svg={}))}(this,function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){this.wrapped=e}function n(e){var t,n;function a(t,n){try{var s=e[t](n),o=s.value,u=o instanceof r;Promise.resolve(u?o.wrapped:o).then(function(e){u?a("next",e):i(s.done?"return":"normal",e)},function(e){a("throw",e)})}catch(e){i("throw",e)}}function i(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?a(t.key,t.arg):n=null}this._invoke=function(e,r){return new Promise(function(i,s){var o={key:e,arg:r,resolve:i,reject:s,next:null};n?n=n.next=o:(t=n=o,a(e,r))})},"function"!=typeof e.return&&(this.return=void 0)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}function v(e,t,r){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=h(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function p(e,t,r,n){return(p="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,r,n){var a,i=h(e,t);if(i){if((a=Object.getOwnPropertyDescriptor(i,t)).set)return a.set.call(n,r),!0;if(!a.writable)return!1}if(a=Object.getOwnPropertyDescriptor(n,t)){if(!a.writable)return!1;a.value=r,Object.defineProperty(n,t,a)}else o(n,t,r);return!0})(e,t,r,n)}function m(e,t,r,n,a){if(!p(e,t,r,n||e)&&a)throw Error("failed to set property");return r}"function"==typeof Symbol&&Symbol.asyncIterator&&(n.prototype[Symbol.asyncIterator]=function(){return this}),n.prototype.next=function(e){return this._invoke("next",e)},n.prototype.throw=function(e){return this._invoke("throw",e)},n.prototype.return=function(e){return this._invoke("return",e)};function y(e,t){return d(e)||function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||k()}function g(e){return function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(e){if(Array.isArray(e))return e}function b(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function k(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var A=squared.lib.dom,S=squared.lib.util;function x(e,t,r){e.style[t]=r,e.setAttribute(t,r)}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"deg",r=parseFloat(e);switch(t){case"turn":r*=360;break;case"rad":r*=180/Math.PI}return r}function E(e){return e*Math.PI/180}var V={path:1,line:2,rect:3,ellipse:4,circle:5,polyline:6,polygon:7},w={clone:function(e){return{a:e.a,b:e.b,c:e.c,d:e.d,e:e.e,f:e.f}},rotate:function(e){var t=E(e),r=Math.cos(t),n=Math.sin(t);return{a:r,b:n,c:-1*n,d:r,e:0,f:0}},skew:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{a:1,b:Math.tan(E(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)),c:Math.tan(E(e)),d:1,e:0,f:0}},scale:function(){return{a:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,b:0,c:0,d:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e:0,f:0}},translate:function(){return{a:1,b:0,c:0,d:1,e:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,f:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0}}},_={URL:/url\("?(#.*?)"?\)/,ZERO_ONE:"(0(?:\\.\\d+)?|1(?:\\.0+)?)",DECIMAL:"(-?[\\d.]+)",LENGTH:"(-?[\\d.]+(?:[a-z]{2,}|%)?)",DEGREE:"(?:(-?[\\d.]+)(deg|rad|turn))"},R={MATRIX:"(matrix(?:3d)?)\\(".concat(_.DECIMAL,", ").concat(_.DECIMAL,", ").concat(_.DECIMAL,", ").concat(_.DECIMAL,", ").concat(_.DECIMAL,", ").concat(_.DECIMAL,"(?:, ").concat(_.DECIMAL,")?(?:, ").concat(_.DECIMAL,")?(?:, ").concat(_.DECIMAL,")?(?:, ").concat(_.DECIMAL,")?(?:, ").concat(_.DECIMAL,")?(?:, ").concat(_.DECIMAL,")?(?:, ").concat(_.DECIMAL,")?(?:, ").concat(_.DECIMAL,")?(?:, ").concat(_.DECIMAL,")?(?:, ").concat(_.DECIMAL,")?\\)"),ROTATE:"(rotate[XY]?)\\(".concat(_.DEGREE,"\\)"),SKEW:"(skew[XY]?)\\(".concat(_.DEGREE,"(?:, ").concat(_.DEGREE,")?\\)"),SCALE:"(scale[XY]?)\\(".concat(_.DECIMAL,"(?:, ").concat(_.DECIMAL,")?\\)"),TRANSLATE:"(translate[XY]?)\\(".concat(_.LENGTH,"(?:, ").concat(_.LENGTH,")?\\)")};function M(){return S.optionalAsNumber(squared,"settings.resolutionDPI")||96}function N(e){return parseInt(A.getStyle(e).fontSize||"16")}function P(e){var t=0,r=0;if(S.isNumber(e))t=parseInt(e);else if(/-?\d+ms$/.test(e))r=parseInt(e);else if(/-?\d+s$/.test(e))t=parseInt(e);else if(/-?\d+min$/.test(e))t=60*parseInt(e);else if(/-?\d+(.\d+)?h$/.test(e))t=60*parseFloat(e)*60;else{var n=/^(?:(-?)(\d?\d):)?(?:(\d?\d):)?(\d?\d)\.?(\d?\d?\d)?$/.exec(e);n&&(n[2]&&(t+=60*parseInt(n[2])*60),n[3]&&(t+=60*parseInt(n[3])),n[4]&&(t+=parseInt(n[4])),n[5]&&(r=parseInt(n[5])*(n[5].length<3?Math.pow(10,3-n[5].length):1)),n[1]&&(t*=-1,r*=-1))}return 1e3*t+r}var G={svg:function(e){return"svg"===e.tagName},g:function(e){return"g"===e.tagName},symbol:function(e){return"symbol"===e.tagName},path:function(e){return"path"===e.tagName},shape:function(e){return void 0!==V[e.tagName]},image:function(e){return"image"===e.tagName},use:function(e){return"use"===e.tagName},line:function(e){return"line"===e.tagName},rect:function(e){return"rect"===e.tagName},circle:function(e){return"circle"===e.tagName},ellipse:function(e){return"ellipse"===e.tagName},polygon:function(e){return"polygon"===e.tagName},polyline:function(e){return"polyline"===e.tagName},clipPath:function(e){return"clipPath"===e.tagName},pattern:function(e){return"pattern"===e.tagName},linearGradient:function(e){return"linearGradient"===e.tagName},radialGradient:function(e){return"radialGradient"===e.tagName}};function O(e){var t=A.cssAttribute(e,"visibility",!0);return"hidden"!==t&&"collapse"!==t&&"none"!==A.cssAttribute(e,"display",!0)}function L(e,t){x(e,"display",t?"block":"none"),x(e,"visibility",t?"visible":"hidden")}function B(e,t){if(S.isNumber(t)){var r=parseFloat(""+t);r<=0?r=0:r>=1&&(r=1),e.style.opacity=""+r,e.setAttribute("opacity",""+r)}}function C(e,t){var r=e.attributes.getNamedItem("href");if(r&&"#"===r.value.charAt(0)){var n,a=r.value.substring(1);if(void 0===t)for(n=e.parentElement;n&&n.parentElement instanceof SVGGraphicsElement;)n=n.parentElement;else n=t;if(n)for(var i=Array.from(n.querySelectorAll("*")),s=0;s<i.length;s++){var o=i[s];if(o.id===a&&o instanceof SVGElement)return o}else{var u=document.getElementById(a);if(u instanceof SVGElement)return u}}return null}function F(e){for(var t=e.parentElement;t&&t instanceof SVGElement;){if(G.svg(t)||G.symbol(t)&&t.viewBox&&t.viewBox.baseVal.width>0&&t.viewBox.baseVal.height>0)return t.viewBox.baseVal;t=t.parentElement}}function I(e,t){return{type:e,matrix:t,angle:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,method:{x:!(arguments.length>3&&void 0!==arguments[3])||arguments[3],y:!(arguments.length>4&&void 0!==arguments[4])||arguments[4]}}}function X(e,t){var r=void 0===t?A.cssInline(e,"transform"):t;if(""!==r){var n=[];for(var a in R)for(var i=RegExp(R[a],"g"),s=null;null!==(s=i.exec(r));){var o=s[1].endsWith("X"),u=s[1].endsWith("Y");if(s[1].startsWith("rotate")){var l=T(s[2],s[3]),c=w.rotate(l);o?(c.a=1,c.b=0,c.c=0):u&&(c.b=0,c.c=0,c.d=1),n[s.index]=I(SVGTransform.SVG_TRANSFORM_ROTATE,c,l,!o,!u)}else if(s[1].startsWith("skew")){var f=u?0:T(s[2],s[3]),h=u?T(s[2],s[3]):s[4]&&s[5]?T(s[4],s[5]):0,v=w.skew(f,h);o?n[s.index]=I(SVGTransform.SVG_TRANSFORM_SKEWX,v,f,!0,!1):u?n[s.index]=I(SVGTransform.SVG_TRANSFORM_SKEWY,v,h,!1,!0):(n[s.index]=I(SVGTransform.SVG_TRANSFORM_SKEWX,Object.assign({},v,{b:0}),f,!0,!1),0!==h&&(n[s.index+1]=I(SVGTransform.SVG_TRANSFORM_SKEWY,Object.assign({},v,{c:0}),h,!1,!0)))}else if(s[1].startsWith("scale")){var p=u?void 0:parseFloat(s[2]),m=w.scale(p,o?void 0:u?parseFloat(s[2]):!o&&s[3]?parseFloat(s[3]):p);n[s.index]=I(SVGTransform.SVG_TRANSFORM_SCALE,m,0,!u,!o)}else if(s[1].startsWith("translate")){var y=M(),g=N(e),d=parseFloat(S.convertPX(s[2],y,g)),b=!o&&s[3]?parseFloat(S.convertPX(s[3],y,g)):0,k=w.translate(u?0:d,u?d:b);n[s.index]=I(SVGTransform.SVG_TRANSFORM_TRANSLATE,k,0)}else if(s[1].startsWith("matrix")){var x=D(e,t);x&&(n[s.index]=I(SVGTransform.SVG_TRANSFORM_MATRIX,x))}}return n.filter(function(e){return!!e&&(e.css=!0,!0)})}}function D(e,t){var r=RegExp(R.MATRIX).exec(t||A.getStyle(e,!0).transform||"");if(r)switch(r[1]){case"matrix":return{a:parseFloat(r[2]),b:parseFloat(r[3]),c:parseFloat(r[4]),d:parseFloat(r[5]),e:parseFloat(r[6]),f:parseFloat(r[7])};case"matrix3d":return{a:parseFloat(r[2]),b:parseFloat(r[3]),c:parseFloat(r[6]),d:parseFloat(r[7]),e:parseFloat(r[14]),f:parseFloat(r[15])}}}function j(e,t){var r={x:null,y:null};if(""!==(t=t||A.cssAttribute(e,"transform-origin"))){var n,a,i=F(e);if(i)n=i.width,a=i.height;else{var s=e.parentElement;s instanceof SVGGraphicsElement&&s.viewportElement&&(G.svg(s.viewportElement)||G.symbol(s.viewportElement))&&s.viewportElement.viewBox&&(n=s.viewportElement.viewBox.baseVal.width,a=s.viewportElement.viewBox.baseVal.height)}if(!n||!a){var o=e.getBoundingClientRect();n||(n=o.width),a||(a=o.height)}var u=t.split(" ");1===u.length&&u.push("center"),(u=u.slice(0,2)).includes("left")?r.x=0:u.includes("right")&&(r.x=n),u.includes("top")?r.y=0:u.includes("bottom")&&(r.y=a),["x","y"].forEach(function(t){if(null===r[t])for(var i=0;i<u.length;i++){var s=u[i];if(""!==s&&("center"===s&&(s="50%"),S.isUnit(s)?r[t]=parseInt(s.endsWith("px")?s:S.convertPX(s,M(),N(e))):S.isPercent(s)&&(r[t]=("x"===t?n:a)*(parseInt(s)/100)),null!==r[t])){u[i]="";break}}})}return r.x=r.x||0,r.y=r.y||0,r}function q(e){switch(e){case"rotate":case SVGTransform.SVG_TRANSFORM_ROTATE:return"0 0 0";case"scale":case SVGTransform.SVG_TRANSFORM_SCALE:return"1 1";case"skewX":case"skewY":case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:return"0";case"translate":case SVGTransform.SVG_TRANSFORM_TRANSLATE:return"0 0"}return""}function U(e){return e.sort(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?function(e,t){return e>t?-1:1}:function(e,t){return e<t?-1:1})}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;if(e.length>1){var n=U(e.slice(0))[0];if(r)if(r.length===e.length)for(var a=0;a<r.length;a++)t=Math.max(t,r[a]+n);else r=void 0;void 0===r&&(t=Math.max(t,n));for(var i=t,s=!1;!s;)for(var o=0;o<e.length;o++){if((i-(r?r[o]:0))%e[o]!=0){s=!1,i+=n;break}s=!0}return i}return e[0]}function W(e,t,r){return e.a*t+e.c*r+e.e}function Y(e,t,r){return e.b*t+e.d*r+e.f}function H(e,t){return t*Math.cos(E(e))*-1}var K=Object.freeze({SHAPES:V,MATRIX:w,REGEXP_SVG:_,getHostDPI:M,getFontSize:N,createElement:function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)},convertClockTime:P,SVG:G,isVisible:O,setVisible:L,setOpacity:B,getTargetElement:C,getNearestViewBox:F,createTransform:I,getTransform:X,getTransformMatrix:D,getTransformOrigin:j,getTransformRotate:function(e){var t=[],r=e.attributes.getNamedItem("transform");if(r)for(var n,a=/rotate\((-?[\d.]+),?\s*(-?[\d.]+),?\s*(-?[\d.]+)\)/g;null!==(n=a.exec(r.value));)t.push({angle:parseFloat(n[1]),x:parseFloat(n[2]),y:parseFloat(n[3])});return t.length?t:[{angle:0,x:0,y:0}]},getTransformInitialValue:q,sortNumber:U,getLeastCommonMultiple:z,applyMatrixX:W,applyMatrixY:Y,getRadiusX:function(e,t){return t*Math.sin(E(e))},getRadiusY:H}),Z=squared.lib.util,$=new Map,Q=function(){function e(){a(this,e)}return s(e,null,[{key:"asContainer",value:function(e){return Z.hasBit(e.instanceType,2)}},{key:"asElement",value:function(e){return Z.hasBit(e.instanceType,4)}},{key:"asSvg",value:function(e){return 18===e.instanceType}},{key:"asG",value:function(e){return 34===e.instanceType}},{key:"asUseSymbol",value:function(e){return 66===e.instanceType}},{key:"asPattern",value:function(e){return 130===e.instanceType}},{key:"asShapePattern",value:function(e){return 258===e.instanceType}},{key:"asUsePattern",value:function(e){return 514===e.instanceType}},{key:"asShape",value:function(e){return Z.hasBit(e.instanceType,2052)}},{key:"asImage",value:function(e){return 4100===e.instanceType}},{key:"asUse",value:function(e){return 10244===e.instanceType}},{key:"asSet",value:function(e){return 8===e.instanceType}},{key:"asAnimation",value:function(e){return Z.hasBit(e.instanceType,8)}},{key:"asAnimationAnimate",value:function(e){return Z.hasBit(e.instanceType,16392)}},{key:"asAnimate",value:function(e){return 16392===e.instanceType}},{key:"asAnimateMotion",value:function(e){return 49160===e.instanceType}},{key:"asAnimateTransform",value:function(e){return 81928===e.instanceType}},{key:"setName",value:function(e){if(e){var t,r="";if(Z.isString(e.id)){var n=Z.convertWord(e.id,!0);$.has(n)||(r=n),t=n}else t=e.tagName;var a=$.get(t)||0;return""!==r?($.set(r,a),r):($.set(t,++a),"".concat(t,"_").concat(a))}return $.clear(),""}},{key:"getLine",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return"M".concat(e,",").concat(t," L").concat(r,",").concat(n)}},{key:"getCircle",value:function(t,r,n){return e.getEllipse(t,r,n)}},{key:"getEllipse",value:function(e,t,r,n){return void 0===n&&(n=r),"M".concat(e-r,",").concat(t," a").concat(r,",").concat(n,",0,1,0,").concat(2*r,",0 a").concat(r,",").concat(n,",0,1,0,-").concat(2*r,",0")}},{key:"getRect",value:function(e,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return"M".concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,",").concat(r," h").concat(e," v").concat(t," h").concat(-e," Z")}},{key:"getPolygon",value:function(t){var r=e.getPolyline(t);return""!==r?r+" Z":""}},{key:"getPolyline",value:function(e){return e.length?"M".concat(e.map(function(e){return"".concat(e.x,",").concat(e.y)}).join(" ")):""}},{key:"convertTransformList",value:function(e){for(var t=[],r=0;r<e.numberOfItems;r++){var n=e.getItem(r);t.push(I(n.type,n.matrix,n.angle))}return t}},{key:"filterTransforms",value:function(e,t){return(t?e.filter(function(e){return!t.includes(e.type)}):e).filter(function(e){return!(e.type===SVGTransform.SVG_TRANSFORM_SCALE&&1===e.matrix.a&&1===e.matrix.d)})}},{key:"applyTransforms",value:function(t,r,n,a){for(var i=e.clonePoints(r),s=t.slice(0).reverse(),o=Array.isArray(l=s),u=0,l=o?l:l[Symbol.iterator]();;){var c;if(o){if(u>=l.length)break;c=l[u++]}else{if((u=l.next()).done)break;c=u.value}var f=c,h=f.matrix,v=0,p=0,m=0,y=0;if(n)switch(f.type){case SVGTransform.SVG_TRANSFORM_SCALE:f.method.x&&(m=n.x*(1-h.a)),f.method.y&&(y=n.y*(1-h.d));break;case SVGTransform.SVG_TRANSFORM_SKEWX:f.method.y&&(p-=n.y);break;case SVGTransform.SVG_TRANSFORM_SKEWY:f.method.x&&(v-=n.x);break;case SVGTransform.SVG_TRANSFORM_ROTATE:f.method.x&&(v-=n.x,m=n.x+H(f.angle,n.x)),f.method.y&&(p-=n.y,y=n.y+H(f.angle,n.y))}if(a)switch(f.type){case SVGTransform.SVG_TRANSFORM_SCALE:a.x*=h.a,a.y*=h.d;break;case SVGTransform.SVG_TRANSFORM_ROTATE:0!==f.angle&&(a.angle=(a.angle||0)+f.angle);break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:a.x+=h.e,a.y+=h.f}for(var g=Array.isArray(b=i),d=0,b=g?b:b[Symbol.iterator]();;){var k;if(g){if(d>=b.length)break;k=b[d++]}else{if((d=b.next()).done)break;k=d.value}var A=k,S=A.x;if(A.x=W(h,S,A.y+p)+m,A.y=Y(h,S+v,A.y)+y,f.type===SVGTransform.SVG_TRANSFORM_SCALE&&void 0!==A.rx&&void 0!==A.ry){var x=A.rx;A.rx=W(h,x,A.ry+p),A.ry=Y(h,x+v,A.ry)}}}return i}},{key:"getCenterPoint",value:function(e){for(var t=e[0].x,r=e[0].y,n=t,a=r,i=1;i<e.length;i++){var s=e[i];s.x<t?t=s.x:s.x>n&&(n=s.x),s.y<r?r=s.y:s.y>n&&(a=s.y)}return{x:(t+n)/2,y:(r+a)/2}}},{key:"clonePoints",value:function(e){var t=[];if(Array.isArray(e))for(var r=Array.isArray(a=e),n=0,a=r?a:a[Symbol.iterator]();;){var i;if(r){if(n>=a.length)break;i=a[n++]}else{if((n=a.next()).done)break;i=n.value}var s=i,o={x:s.x,y:s.y};void 0!==s.rx&&void 0!==s.ry&&(o.rx=s.rx,o.ry=s.ry),t.push(o)}else for(var u=0;u<e.numberOfItems;u++){var l=e.getItem(u);t.push({x:l.x,y:l.y})}return t}},{key:"fromNumberList",value:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push({x:e[r],y:e[r+1]});return t.length%2==0?t:[]}},{key:"toNumberList",value:function(e){for(var t,r=[],n=/-?[\d.]+/g;null!==(t=n.exec(e));){var a=parseFloat(t[0]);isNaN(a)||r.push(a)}return r}},{key:"getPathBoxRect",value:function(t){for(var r=Number.MAX_VALUE,n=-Number.MAX_VALUE,a=-Number.MAX_VALUE,i=Number.MAX_VALUE,s=Array.isArray(u=t),o=0,u=s?u:u[Symbol.iterator]();;){var l;if(s){if(o>=u.length)break;l=u[o++]}else{if((o=u.next()).done)break;l=o.value}for(var c=e.getPathPoints(e.toPathCommandList(l),!0),f=Array.isArray(v=c),h=0,v=f?v:v[Symbol.iterator]();;){var p;if(f){if(h>=v.length)break;p=v[h++]}else{if((h=v.next()).done)break;p=h.value}p.y<r?r=p.y:p.y>a&&(a=p.y),p.x<i?i=p.x:p.x>n&&(n=p.x)}}return{top:r,right:n,bottom:a,left:i}}},{key:"getPathPoints",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[],n=0,a=0,i=0;i<e.length;i++){for(var s=e[i],o=0;o<s.coordinates.length;o+=2){s.relative?(n+=s.coordinates[o],a+=s.coordinates[o+1]):(n=s.coordinates[o],a=s.coordinates[o+1]);var u={x:n,y:a};"A"===s.command.toUpperCase()&&(u.rx=s.radiusX,u.ry=s.radiusY,t&&(s.coordinates[o]>=0?u.y-=s.radiusY:u.y+=s.radiusY)),r.push(u)}if(s.relative){switch(s.command){case"h":case"v":var l,c=e[i-1];if(c&&"M"===c.command)(l=c.coordinates).push.apply(l,g(s.coordinates)),e.splice(i,1),i--;s.command="M";break;default:s.command=s.command.toUpperCase()}s.relative=!1}}return r}},{key:"rebindPathPoints",value:function(e,t){var r=t.slice(0);e:for(var n=Array.isArray(i=e),a=0,i=n?i:i[Symbol.iterator]();;){var s;if(n){if(a>=i.length)break;s=i[a++]}else{if((a=i.next()).done)break;s=a.value}var o=s;switch(o.command.toUpperCase()){case"M":case"L":case"H":case"V":case"C":case"S":case"Q":case"T":for(var u=0;u<o.coordinates.length;u+=2){var l=r.shift();if(!l){e=[];break e}o.coordinates[u]=l.x,o.coordinates[u+1]=l.y}break;case"A":var c=r.shift();if(!c||void 0===c.rx||void 0===c.ry){e=[];break e}o.coordinates[0]=c.x,o.coordinates[1]=c.y,o.radiusX=c.rx,o.radiusY=c.ry}}return e}},{key:"fromPathCommandList",value:function(e){for(var t="",r=Array.isArray(a=e),n=0,a=r?a:a[Symbol.iterator]();;){var i;if(r){if(n>=a.length)break;i=a[n++]}else{if((n=a.next()).done)break;i=n.value}var s=i;switch(t+=(""!==t?" ":"")+s.command,s.command.toUpperCase()){case"M":case"L":case"C":case"S":case"Q":case"T":t+=s.coordinates.join(",");break;case"H":t+=s.coordinates[0];break;case"V":t+=s.coordinates[1];break;case"A":t+="".concat(s.radiusX,",").concat(s.radiusY,",").concat(s.xAxisRotation,",").concat(s.largeArcFlag,",").concat(s.sweepFlag,",").concat(s.coordinates.join(","))}}return t}},{key:"toPathCommandList",value:function(t){var r,n=[],a=/([A-Za-z])([^A-Za-z]+)?/g;for(t=t.trim();null!==(r=a.exec(t))&&(0!==n.length||"M"===r[1].toUpperCase());){r[2]=(r[2]||"").trim();var i=e.toNumberList(r[2]),s=n[n.length-1],o=s?s.command.toUpperCase():"",u=s?s.points[s.points.length-1]:void 0,l=void 0,c=void 0,f=void 0,h=void 0,v=void 0;switch(r[1].toUpperCase()){case"M":0===n.length&&(r[1]="M");case"L":if(i.length>=2){i.length%2!=0&&i.length--;break}continue;case"H":if(u&&i.length){i[1]="h"===r[1]?0:u.y,i.length=2;break}continue;case"V":if(u&&i.length){var p=i[0];i[0]="v"===r[1]?0:u.x,i[1]=p,i.length=2;break}continue;case"Z":if(n.length){i.push.apply(i,g(n[0].coordinates.slice(0,2))),r[1]="Z";break}continue;case"C":if(i.length>=6){i.length=6;break}continue;case"S":if(i.length>=4&&("C"===o||"S"===o)){i.length=4;break}continue;case"Q":if(i.length>=4){i.length=4;break}continue;case"T":if(i.length>=2&&("Q"===o||"T"===o)){i.length=2;break}continue;case"A":if(i.length>=7){var m=y(i.splice(0,5),5);l=m[0],c=m[1],f=m[2],h=m[3],v=m[4],i.length=2;break}continue;default:continue}if(i.length>1){for(var d=[],b=/[a-z]/.test(r[1]),k=0;k<i.length;k+=2){var A=i[k],S=i[k+1];b&&u&&(u={x:A+=u.x,y:S+=u.y}),d.push({x:A,y:S})}n.push({command:r[1],relative:b,coordinates:i,points:d,radiusX:l,radiusY:c,xAxisRotation:f,largeArcFlag:h,sweepFlag:v})}}return n}}]),e}(),J=squared.lib.dom,ee=function(e){return function(t){function r(){var e;return a(this,r),(e=f(this,l(r).apply(this,arguments)))._baseVal={},e}return u(r,e),s(r,[{key:"setBaseValue",value:function(e,t){if(void 0!==t){if(this.validateBaseValueType(e,t))return this._baseVal[e]=t,!0}else switch(e){case"d":return this._baseVal[e]=J.cssAttribute(this.element,"d"),!0;case"points":var r=this.element[e];if(Array.isArray(r))return this._baseVal[e]=Q.clonePoints(r),!0;break;default:var n=this.element[e];if(n&&n.baseVal)return this._baseVal[e]=n.baseVal.value,!0}return!1}},{key:"getBaseValue",value:function(e,t){return void 0!==this._baseVal[e]||this.setBaseValue(e)?this._baseVal[e]:t}},{key:"refitBaseValue",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;function a(a){for(var i=Array.isArray(o=a),s=0,o=i?o:o[Symbol.iterator]();;){var u;if(i){if(s>=o.length)break;u=o[s++]}else{if((s=o.next()).done)break;u=s.value}var l=u;l.x+=e,l.y+=t,void 0!==l.rx&&void 0!==l.ry&&(l.rx*=r,l.ry*=n)}}for(var i in this._baseVal){var s=this._baseVal[i];if("string"==typeof s){if("d"===i){var o=Q.toPathCommandList(s),u=Q.getPathPoints(o);a(u),this._baseVal[i]=Q.fromPathCommandList(Q.rebindPathPoints(o,u))}}else if("number"==typeof s)switch(i){case"cx":case"x1":case"x2":case"x":this._baseVal[i]+=e;break;case"cy":case"y1":case"y2":case"y":this._baseVal[i]+=t;case"r":this._baseVal[i]*=Math.min(r,n);break;case"rx":case"width":this._baseVal[i]*=r;break;case"height":case"ry":this._baseVal[i]*=n}else Array.isArray(s)&&"points"===i&&a(s)}}},{key:"validateBaseValueType",value:function(e,t){switch(e){case"d":return"string"==typeof t;case"cx":case"cy":case"r":case"rx":case"ry":case"x1":case"x2":case"y1":case"y2":case"x":case"y":case"width":case"height":return"number"==typeof t;case"points":return Array.isArray(t)}}}]),r}()},te=squared.lib.util,re=function(){function e(t){if(a(this,e),this.attributeName="",this.to="",this.begin=[0],this.duration=-1,this.paused=!1,t){this.element=t,this.setAttribute("attributeName"),this.setAttribute("to");var r=this.getAttribute("begin");"indefinite"===r?this.begin.length=0:/^[a-zA-Z]+$/.test(r)?this.paused=!0:""!==r&&(this.begin=U(r.split(";").map(function(e){return P(e)})));var n=this.getAttribute("dur");""!==n&&"indefinite"!==n&&(this.duration=P(n))}}return s(e,[{key:"setAttribute",value:function(e,t){var r=this.getAttribute(e);""!==r&&(void 0!==t?this[e+te.capitalize(t)]=r===t:this[e]=r)}},{key:"getAttribute",value:function(e){var t=this.element&&this.element.attributes.getNamedItem(e);return t?t.value.trim():""}},{key:"delay",set:function(e){this.begin[0]=e},get:function(){return this.begin[0]||0}},{key:"instanceType",get:function(){return 8}}]),e}(),ne={ease:"0.25 0.1 0.25 1","ease-in":"0.42 0 1 1","ease-in-out":"0.42 0 0.58 1","ease-out":"0 0 0.58 1",linear:"0 0 1 1",step:"0 1 0 1"},ae=Object.freeze({KEYSPLINE_NAME:ne}),ie=squared.lib.color,se=squared.lib.dom,oe=squared.lib.util;function ue(e,t,r){return e+(t-e)*r}function le(e){return parseFloat((1-e).toFixed(5))}var ce=function(e){function r(e){var t;if(a(this,r),(t=f(this,l(r).call(this,e))).element=e,t.from="",t.repeatDuration=-1,t.additiveSum=!1,t.accumulateSum=!1,t.fillMode=0,t.alternate=!1,t._repeatCount=1,t._reverse=!1,e){"transform"===t.attributeName?t.fromBaseValue=q(t.getAttribute("type")):e.parentElement&&(t.fromBaseValue=oe.optionalAsString(e.parentElement,"".concat(t.attributeName,".baseVal.value"))||se.cssAttribute(e.parentElement,t.attributeName));var n=t.getAttribute("values");if(""!==n){var i=t.getAttribute("keyTimes");""!==i&&(t.values=oe.flatMap(n.split(";"),function(e){return e.trim()}),t.keyTimes=r.toFractionList(i),t.values.length>1&&t.keyTimes.length===t.values.length?(0===t.keyTimes[0]&&(t.from=t.values[0]),t.to=t.values[t.values.length-1]):(t.values.length=0,t.keyTimes.length=0))}else if(t.from=t.getAttribute("from"),""!==t.to)""!==t.from&&(t.setAttribute("additive","sum"),t.additiveSum&&t.setAttribute("accumulate","sum"));else{var s=t.getAttribute("by");oe.isNumber(s)&&(""===t.from&&t.fromBaseValue&&(t.from=t.fromBaseValue),oe.isNumber(t.from)&&(t.to=""+(parseFloat(t.from)+parseFloat(s))))}var o=t.getAttribute("repeatDur");if(""!==o&&"indefinite"!==o&&(t.repeatDuration=P(o)),!(-1!==t.duration&&-1!==t.repeatDuration&&t.repeatDuration<t.duration)){var u=t.getAttribute("repeatCount");t.repeatCount="indefinite"===u?-1:parseFloat(u)}if(t.begin.length){var c=t.getAttribute("end");if(""!==c){var h=U(c.split(";").map(function(e){return P(e)}));!h.length||1!==t.begin.length&&t.begin[t.begin.length-1]===t.end&&0!==h[0]||(t.end=h[0],t.begin=t.begin.filter(function(e){return e>=0&&e<h[0]}),t.begin.length&&-1===t.repeatCount&&(t.repeatCount=t.end/t.duration))}}"animate"===e.tagName&&t.setCalcMode(t.attributeName),void 0!==t.values&&0!==t.values.length||""===t.from||""===t.to||(t.values=[t.from,t.to],t.keyTimes=[0,1])}return void 0===t.values&&(t.values=[],t.keyTimes=[]),t}return u(r,re),s(r,[{key:"setCalcMode",value:function(e){var n=this;if(this.element){var a=function(){switch(n.getAttribute("calcMode")){case"discrete":for(var t=[],a=[],i=[],s=0;s<n.keyTimes.length-1;s++){var o=r.toStepFractionList(e,"steps-start",s,n.keyTimes,n.values,M(),N(n.element));if(!o)return{v:void 0};t.push.apply(t,g(o[0])),a.push.apply(a,g(o[1])),o[0].forEach(function(){return i.push(ne.step)})}t.push(n.keyTimes.pop()),a.push(n.values.pop()),n.keyTimes=t,n.values=a,n._keySplines=i;break;case"spline":n.keySplines=oe.flatMap(n.getAttribute("keySplines").split(";"),function(e){return e.trim()})}}();if("object"===t(a))return a.v}}},{key:"repeatCount",set:function(e){(isNaN(e)?this._repeatCount=1:(this._repeatCount=e,-1!==e&&(this.repeatDuration=-1)),this.element)&&("freeze"===this.getAttribute("fill")&&-1!==this.repeatCount?this.fillMode|=8:oe.hasBit(this.fillMode,8)&&(this.fillMode^=8))},get:function(){var e=this.duration;return-1!==e?-1===this._repeatCount&&-1===this.repeatDuration?-1:-1!==this._repeatCount&&-1!==this.repeatDuration&&this._repeatCount*e<=this.repeatDuration?this._repeatCount:-1!==this.repeatDuration?this.repeatDuration/e:this._repeatCount:1}},{key:"keySplines",set:function(e){if(e){var t=this.keyTimes.length-1;if(t>0&&e.length>=t&&!e.every(function(e){return""===e})){for(var r=[],n=0;n<t;n++){var a=e[n].split(" ").map(function(e){return parseFloat(e)});4===a.length&&!a.some(function(e){return isNaN(e)})&&a[0]>=0&&a[0]<=1&&a[2]>=0&&a[2]<=1?r.push(a.join(" ")):r.push(ne.linear)}this._keySplines=r}}else this._keySplines=void 0},get:function(){return this._keySplines}},{key:"reverse",set:function(e){if(e!==this._reverse&&this.values.length){if(this.values.reverse(),this._keySplines){for(var t=[],r=this._keySplines.length-1;r>=0;r--){var n=this._keySplines[r].split(" ").map(function(e){return parseFloat(e)});t.push(4===n.length?"".concat(le(n[2])," ").concat(le(n[3])," ").concat(le(n[0])," ").concat(le(n[1])):ne.linear)}this._keySplines=t}this._reverse=e}},get:function(){return this._reverse}},{key:"fromToType",get:function(){return 2===this.keyTimes.length&&0===this.keyTimes[0]&&1===this.keyTimes[1]}},{key:"instanceType",get:function(){return 16392}}],[{key:"toStepFractionList",value:function(e,t,r,n,a){var i,s,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:96,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:16;switch(e){case"fill":case"stroke":var l=ie.parseRGBA(a[r]),c=ie.parseRGBA(a[r+1]);l&&c&&(i=[l],s=[c]);break;case"points":i=Q.fromNumberList(Q.toNumberList(a[r])),s=Q.fromNumberList(Q.toNumberList(a[r+1]));break;case"rotate":case"scale":case"translate":i=a[r].trim().split(/\s+/).map(function(e){return parseFloat(e)}),s=a[r+1].trim().split(/\s+/).map(function(e){return parseFloat(e)});break;default:oe.isNumber(a[r])?i=[parseFloat(a[r])]:oe.isUnit(a[r])&&(i=[parseFloat(oe.convertPX(a[r],o,u))]),oe.isNumber(a[r+1])?s=[parseFloat(a[r+1])]:oe.isUnit(a[r+1])&&(s=[parseFloat(oe.convertPX(a[r+1],o,u))])}if(i&&s&&i.length&&i.length===s.length){switch(t){case"steps-start":t="steps(1, start)";break;case"steps-end":t="steps(1, end)"}var f=/steps\((\d+)(?:, (start|end))?\)/.exec(t);if(f){for(var h=n[r+1]-n[r],v=parseInt(f[1]),p=100/v,m=[],y=[],g=0,d="start"===f[2]?1:0;g<v;g++){var b=n[r]+h*(g/v),k=[],A=(d>0&&g===v-1?100:p*(g+d))/100;switch(e){case"fill":case"stroke":var S=i[0],x=s[0],T=ie.convertHex(ue(S.rgba.r,x.rgba.r,A)),E=ie.convertHex(ue(S.rgba.g,x.rgba.g,A)),V=ie.convertHex(ue(S.rgba.b,x.rgba.b,A)),w=ie.convertHex(ue(S.rgba.a,x.rgba.a,A));k.push("#".concat(T+E+V+("FF"!==w?w:"")));break;case"points":for(var _=0;_<i.length;_++){var R=i[_],M=s[_];k.push("".concat(ue(R.x,M.x,A),",").concat(ue(R.y,M.y,A)))}break;default:for(var N=0;N<i.length;N++){k.push(""+ue(i[N],s[N],A))}}if(!k.length)return;m.push(b),y.push(k.join(" "))}return[m,y]}}}},{key:"toFractionList",value:function(e){var t=-1,r=oe.flatMap(e.split(arguments.length>1&&void 0!==arguments[1]?arguments[1]:";"),function(e){var r=parseFloat(e);return!isNaN(r)&&r<=1&&(-1===t||r>t)?(t=r,r):-1});return r.length>1&&r.some(function(e){return-1!==e})&&0===r[0]?r:[]}}]),r}(),fe=function(e){function t(e){var r;if(a(this,t),(r=f(this,l(t).call(this,e))).element=e,r.type=0,e){var n=r.getAttribute("type");r.setType(n),r.setCalcMode(n)}return r}return u(t,ce),s(t,[{key:"setType",value:function(e){switch(e){case"translate":this.type=SVGTransform.SVG_TRANSFORM_TRANSLATE;break;case"scale":this.type=SVGTransform.SVG_TRANSFORM_SCALE;break;case"rotate":this.type=SVGTransform.SVG_TRANSFORM_ROTATE;break;case"skewX":this.type=SVGTransform.SVG_TRANSFORM_SKEWX;break;case"skewY":this.type=SVGTransform.SVG_TRANSFORM_SKEWY}}},{key:"instanceType",get:function(){return 81928}}],[{key:"toRotateList",value:function(e){var t=e.map(function(e){if(""===e)return[null,null,null];var t=Q.toNumberList(e);return 1===t.length?[t[0],0,0]:3===t.length?t:[]});return t.some(function(e){return 0===e.length})?void 0:t}},{key:"toScaleList",value:function(e){var t=e.map(function(e){if(""===e)return[null,null];var t=Q.toNumberList(e);return 1===t.length?[t[0],t[0]]:2===t.length?t:[]});return t.some(function(e){return 0===e.length})?void 0:t}},{key:"toTranslateList",value:function(e){var t=0,r=e.map(function(e){if(""===e)return[null,null];var r=Q.toNumberList(e);return 1===r.length?[r[0],t]:2===r.length?(t=r[1],r):[]});return r.some(function(e){return 0===e.length})?void 0:r}}]),t}(),he=squared.lib.util;function ve(e,t,r){var n,a,i=e.entries(),s=Array.isArray(i),o=0;for(i=s?i:i[Symbol.iterator]();;){var u;if(s){if(o>=i.length)break;u=i[o++]}else{if((o=i.next()).done)break;u=o.value}var l=y(u,2),c=l[0],f=l[1];if(n&&r<=c){a={ordinal:c,value:f};break}r>=c&&(n={ordinal:c,value:f})}if(n&&a){var h=be(r,n.ordinal,a.ordinal,n.value,a.value);t.set(r,h)}else n&&t.set(r,n.value)}function pe(e,t){var r=new Map,n=e.entries(),a=Array.isArray(n),i=0;for(n=a?n:n[Symbol.iterator]();;){var s;if(a){if(i>=n.length)break;s=n[i++]}else{if((i=n.next()).done)break;s=i.value}var o=y(s,2),u=o[1],l=o[0]/t;if(l>0)for(var c=5;;c++){var f=parseFloat((""+l).substring(0,c));if(!r.has(f)){l=f;break}}r.set(l,u)}return r}function me(e,r,n,a){var i,s=[],o=r.element.tagName;switch(o){case"line":i=["x1","y1","x2","y2"];break;case"rect":i=["width","height","x","y"];break;case"polyline":case"polygon":i=["points"];break;case"circle":i=["cx","cy","r"];break;case"ellipse":i=["cx","cy","rx","ry"];break;default:return}var u=function(){if(c){if(f>=l.length)return"break";h=l[f++]}else{if((f=l.next()).done)return"break";h=f.value}var e,t=y(h,2),u=t[0],v=t[1],p=[];if(i.forEach(function(e){var t=v.get(e);void 0!==t?p.push(t):a&&a[e]?p.push(a[e].value):void 0!==(t=r.getBaseValue(e))&&p.push(t)}),p.length!==i.length)return{v:void 0};switch(o){case"line":e=function(e){return[{x:e[0],y:e[1]},{x:e[2],y:e[4]}]}(p);break;case"rect":e=function(e){var t=e[0],r=e[1],n=e[2],a=e[3];return[{x:n,y:a},{x:n+t,y:a},{x:n+t,y:a+r},{x:n,y:a+r}]}(p);break;case"polygon":case"polyline":e=p[0];break;case"circle":case"ellipse":e=function(e){return[{x:e[0],y:e[1],rx:e[2],ry:e[e.length-1]}]}(p)}if(e){var m;switch(r.transformed&&r.transformed.length&&(e=Q.applyTransforms(r.transformed,e,j(r.element))),n&&n.refitPoints(e),o){case"line":case"polyline":m=Q.getPolyline(e);break;case"rect":case"polygon":m=Q.getPolygon(e);break;case"circle":case"ellipse":var g=e[0];m=Q.getEllipse(g.x,g.y,g.rx,g.ry)}void 0!==m&&s.push({ordinal:u,value:m})}};var l=e.entries(),c=Array.isArray(l),f=0;e:for(l=c?l:l[Symbol.iterator]();;){var h,v=u();switch(v){case"break":break e;default:if("object"===t(v))return v.v}}return s}function ye(e,t,r){for(var n=new Map,a=Array.isArray(s=t),i=0,s=a?s:s[Symbol.iterator]();;){var o;if(a){if(i>=s.length)break;o=s[i++]}else{if((i=s.next()).done)break;o=i.value}var u=o,l=new Map;for(var c in e){var f=e[c].get(u);void 0!==f&&l.set(c,f)}if(r)for(var h in r)!l.has(h)&&u>=r[h].ordinal&&l.set(h,r[h].value);n.set(u,l)}return n}function ge(e,t,r,n,a){return Math.round(e+(r[a]+n)*t)}function de(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=e.alternate&&n%2!=0?e.values.slice(0).reverse():e.values;if("number"==typeof r){var i=parseFloat(a[t]);if(e.additiveSum){i+=r,e.accumulateSum||(n=0);for(var s=0;s<n;s++)for(var o=0;o<a.length;o++)i+=parseFloat(a[o])}return i}var u=[];return a[t].trim().split(/\s+/).forEach(function(e){var t=y(e.split(",").map(function(e){return parseFloat(e)}),2);u.push({x:t[0],y:t[1]})}),u}function be(e,t,r,n,a){if("number"==typeof n&&"number"==typeof a)return n+(e-t)/(r-t)*(a-n);if(Array.isArray(n)&&Array.isArray(a)){for(var i=[],s=0;s<Math.min(n.length,a.length);s++)i.push({x:be(e,t,r,n[s].x,a[s].x),y:be(e,t,r,n[s].y,a[s].y)});return i}return n}function ke(e){return!Q.asSet(e)&&!e.paused&&e.begin.length>0&&e.keyTimes.length>1&&e.duration>0}function Ae(e){return-1!==e.repeatCount?e.duration*e.repeatCount:Number.MAX_VALUE}function Se(e){return e.duration*(-1!==e.repeatCount?e.repeatCount:1)}var xe=function(e){return function(r){function n(){return a(this,n),f(this,l(n).apply(this,arguments))}return u(n,e),s(n,[{key:"getAnimateShape",value:function(e,t){for(var r=[],n=Array.isArray(i=t),a=0,i=n?i:i[Symbol.iterator]();;){var s;if(n){if(a>=i.length)break;s=i[a++]}else{if((a=i.next()).done)break;s=a.value}var o=s;if(ke(o))switch(o.attributeName){case"r":case"cx":case"cy":if(G.circle(e)){r.push(o);break}case"rx":case"ry":G.ellipse(e)&&r.push(o);break;case"x1":case"x2":case"y1":case"y2":G.line(e)&&r.push(o);break;case"points":(G.polyline(e)||G.polygon(e))&&r.push(o);break;case"x":case"y":case"width":case"height":G.rect(e)&&r.push(o)}}return r}},{key:"getAnimateViewRect",value:function(e){for(var t=[],r=Array.isArray(a=e),n=0,a=r?a:a[Symbol.iterator]();;){var i;if(r){if(n>=a.length)break;i=a[n++]}else{if((n=a.next()).done)break;i=n.value}var s=i;if(ke(s))switch(s.attributeName){case"x":case"y":t.push(s)}}return t}},{key:"mergeAnimate",value:function(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0;(e.length>1||e.some(function(e){return e.begin.length>1||!e.fromToType||e.alternate||void 0!==e.end||e.additiveSum}))&&function(){for(var i=function(e,t,r,n,a,i,o){var u,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;a<0?(u=o-a,a=0):u=o,u+1&&u++;for(var c,f=(u-(a+r.duration*i))/r.duration,h=r.keyTimes,v=-1,p=-1,m=0;m<h.length;m++){if(-1!==v&&f<=h[m]){p=m;break}f>=h[m]&&(v=m)}c=-1!==v&&-1!==p?be(f,h[v],h[p],de(r,v,n,i),de(r,p,n,i)):de(r,p=-1!==v?v+1:h.length-1,n,i);var y=o+l;if(e.get(y)!==c){for(;e.has(y);)y++;s(t,y,r.keySplines,p),e.set(y,c)}return[y,c]},s=function(e,t,r,a){if(!n){if(0===a)return;a--}var i=r&&r[a]||"";if(""!==i){var s=e.get(t)||new Set;s.add(i),e.set(t,s)}},o=e.filter(function(e){return void 0===e.element}),u=he.minArray(o.map(function(e){return e.delay})),l=he.maxArray(o.map(function(e){return Ae(e)})),c=o.filter(function(e){return he.hasBit(e.fillMode,2)}),f={},h=0,v=Array.isArray(m=e),p=0,m=v?m:m[Symbol.iterator]();;){var d;if(v){if(p>=m.length)break;d=m[p++]}else{if((p=m.next()).done)break;d=p.value}var b=d,k=b.attributeName;void 0===f[k]&&(f[k]=new Map);for(var A=Array.isArray(x=b.begin),S=0,x=A?x:x[Symbol.iterator]();;){var T;if(A){if(S>=x.length)break;T=x[S++]}else{if((S=x.next()).done)break;T=S.value}var E=T;if(void 0===b.element||0===c.length&&E<u||Ae(b)>l){var V=f[k].get(E)||{duration:0,items:[]};V.items.push(b),f[k].set(E,V)}}}for(var w in f)if(f[w].size){var _=f[w],R=Number.MAX_VALUE,M=function(){if(P){if(G>=N.length)return"break";O=N[G++]}else{if((G=N.next()).done)return"break";O=G.value}var e=y(O,2),t=e[0],r=e[1];r.items.sort(function(e,t){return e.element&&void 0===t.element?-1:0});var n=r.items.length-1,a=[];do{for(var i=r.items[n],s=-1===i.repeatCount||i.fillMode>=4,o=i.duration*i.repeatCount,u=0;u<n;u++){var l=r.items[u];(s||-1!==l.repeatCount&&l.duration*l.repeatCount<=o)&&a.push(l)}if(-1!==i.repeatCount&&i.fillMode>=4&&(R=Math.min(t+o,R)),s)break}while(--n>=0);r.items=r.items.filter(function(e){return!a.includes(e)}),_.set(t,r)},N=_.entries(),P=Array.isArray(N),G=0;for(N=P?N:N[Symbol.iterator]();;){var O;if("break"===M())break}var L=new Map,B=U(Array.from(_.keys())),C=Array.isArray(B),F=0;for(B=C?B:B[Symbol.iterator]();;){var I;if(C){if(F>=B.length)break;I=B[F++]}else{if((F=B.next()).done)break;I=F.value}var X=I,D=_.get(X);if(D){var j=he.maxArray(D.items.map(function(e){return Se(e)}));h=Math.max(h,X+j),D.items=D.items.filter(function(e){return!c.includes(e)}),D.items.length&&(D.duration=j,D.items.reverse(),L.set(X,D))}}f[w]=L}else delete f[w];var q,W,Y={},H={},K=new Map,Z=new Map,$=new Set,J={},ee={},te=0,re=function(e){var t;try{t=(a||r).getBaseValue(e)}catch(e){}return null!=t?t:"points"===e?[{x:0,y:0}]:0};e:{var ne=function(e){Y[e]=new Map;var r=Array.from(f[e].keys()),n=Array.from(f[e].values()),a=re(e),u=[],l=a,v=void 0,p=-1;function m(t,r){return u=u.filter(function(e){return e.value!==t}),he.hasBit(t.fillMode,4)?(ee[e]=!0,0===(o=o.filter(function(t){return t.attributeName!==e})).length?2:1):he.hasBit(t.fillMode,8)?(J[e]={ordinal:p,value:l},1):(r&&Y[e].set(++p,a),0)}if(c.length&&(v=c.filter(function(t){return t.attributeName===e})).length){for(var g=Array.isArray(b=v),d=0,b=g?b:b[Symbol.iterator]();;){var k;if(g){if(d>=b.length)break;k=b[d++]}else{if((d=b.next()).done)break;k=d.value}var A=k;r.unshift(A.delay),n.unshift({duration:Se(A),items:[A]})}var S=n[0].items[0];l=de(S,S.reverse?0:S.values.length-1,l,0),Y[e].set(0,l)}t:{for(var x=function(a){var c=n[a].items;if(0===c.length)return"continue";for(var f=r[a],g=-1,d=0,b=function(t){var b=c[t];t===g&&(f=d,g=-1,d=0);var A=-1===b.repeatCount,S=b.duration,x=b.repeatCount,T=S;if(!A&&f+Math.min(b.end||Number.MAX_VALUE,T*=x)<=p)return k=t,"continue";var E=void 0,V=void 0;A?(E=Math.ceil((h-f)/S),V=0):(E=Math.ceil(x),V=x-Math.floor(x));var w=void 0,_=0;if(b.element){if(w=r[a+1],u.length){for(var R,M=u.length-1;M>=0;M--)if(void 0===u[M].value.element){R=u[M],u.splice(M,1);break}if(R)return g=t+1,d=f,f=R.ordinal,c.splice(t,0,R.value),k=--t,"continue"}for(var N=a+1;N<r.length;N++)_=Math.max(_,r[N]+n[N].duration)}else!function(){var e=o.findIndex(function(e){return e===b});if(void 0===v||!v.includes(b))r:for(var i=a+1;i<r.length;i++){var s=function(){if(l){if(c>=u.length)return"break";f=u[c++]}else{if((c=u.next()).done)return"break";f=c.value}var t=f;if(o.findIndex(function(e){return e===t})>e)return w=r[i],"break|nextBegin"};var u=n[i].items.filter(function(e){return void 0===e.element}),l=Array.isArray(u),c=0;n:for(u=l?u:u[Symbol.iterator]();;){var f;switch(s()){case"break":break n;case"break|nextBegin":break r}}}for(var h=a+1;h<r.length;h++){var p=n[h].items.filter(function(t){return void 0===t.element&&o.findIndex(function(e){return e===t})>e});if(p.length){var m=he.maxArray(p.map(function(e){return Se(e)}));_=Math.max(_,r[t]+m)}}}();var P=Math.min(w||Number.MAX_VALUE,b.end||Number.MAX_VALUE,-1!==b.repeatDuration&&b.repeatDuration<S?b.repeatDuration:Number.MAX_VALUE),G=void 0,O=!1;if(P>p&&function(){O=!0;var t=-1!==p;r:for(var n=function(n){for(var o=0;o<b.keyTimes.length;o++){var c=b.keyTimes[o],h=void 0,v=de(b,o,l,n);if(n===E-1&&V>0)if(V>c){for(var m=o+1;m<b.keyTimes.length;m++)if(V<=b.keyTimes[m]){h=f+T,v=be(V,c,b.keyTimes[m],v,de(b,m,l,n)),V=-1;break}}else V===c&&(V=-1);if(void 0===h){if((h=ge(f,S,b.keyTimes,n,o))<0)continue;if(h===P)O=n===E-1&&o===b.keyTimes.length-1;else{var g=function(s){var o=y(i(Y[e],K,b,l,f,n,s,t||s!==r[a+1]||Y[e].has(s-1)?0:-1),2);p=o[0],G=o[1]};if(f<0&&-1===p)h>0&&g(0);else{if(h>P)return t=!1,g(P),O=!1,"break|threadTimeExceeded";if(t){if(f>=p)h=Math.max(f,p+1);else{if(h<p)continue;h===p?h=p+1:g(p)}t=!1}else if(n>0&&0===o){if(b.additiveSum&&b.accumulateSum){s(K,h,b.keySplines,o),p=h;continue}h=Math.max(h,p+1)}}}}if(h>p&&(o===b.keyTimes.length-1&&(n<E-1||0===u.length&&b.fillMode<4)&&!Y[e].has(h-1)&&h--,s(K,h,b.keySplines,o),Y[e].set(h,v),p=h,G=v),!O||-1===V)return"break|threadTimeExceeded"}},o=Math.floor(Math.max(0,Math.max(0,p)-f)/S);o<E;o++){if("break|threadTimeExceeded"===n(o))break r}}(),void 0!==G&&(l=G,A||$.add(b)),A)u.length=0,u.push({ordinal:f,value:b});else if(O){var L=m(b,r[a+1]>p+1);if(2===L)return k=t,{v:{v:"break|animationEnd"}};if(1===L)return k=t,{v:"break|attributeEnd"}}else r[a]+T>_&&u.push({ordinal:f,value:b});k=t},k=0;k<c.length;k++){var A=b(k);switch(A){case"continue":continue;default:if("object"===t(A))return A.v}}},T=0;T<r.length;T++){var E=x(T);switch(E){case"continue":continue;case"break|attributeEnd":break t;default:if("object"===t(E))return E.v}}if(u.length){u.reverse();var V=function(t){var r=u[t].ordinal,n=u[t].value,a=n.duration,c=p-r,f=Number.MAX_VALUE,h=function(){var t=Math.floor(c/a),o=!1;do{for(var u=0;u<n.keyTimes.length;u++){var h=ge(r,a,n.keyTimes,t,u);if(!o&&h>=p){var v=y(i(Y[e],K,n,l,r,t,p),2);p=v[0],l=v[1],o=!0}if(o){if(h>=f){if(f>p){var m=y(i(Y[e],K,n,l,r,t,f),2);p=m[0],l=m[1]}return}h>p&&(u===n.keyTimes.length-1&&h<f&&!Y[e].has(h-1)&&h--,l=de(n,u,l,t),s(K,h,n.keySplines,u),Y[e].set(h,l),p=h)}}}while(p<f&&++t)};if(-1===n.repeatCount)return c>0&&c%a!=0&&(f=r+n.duration*Math.ceil(c/a),h()),H[e]={ordinal:r,value:n},void 0===n.element&&0===(o=o.filter(function(t){return t.attributeName!==e})).length?{v:"break|animationEnd"}:"break|attributeEnd";if((f=r+n.duration*n.repeatCount)>p){h(),$.add(n);var v=m(n,!1);if(2===v)return{v:"break|animationEnd"};if(1===v)return"break|attributeEnd"}};for(T=0;T<u.length;T++){var w=V(T);switch(w){case"break|attributeEnd":break t;default:if("object"===t(w))return w.v}}}}o=o.filter(function(t){return t.attributeName!==e})};for(var ae in f){if("break|animationEnd"===ne(ae))break e}}var ie=[];for(var se in Y)ie.push.apply(ie,g(Y[se].keys()));var oe=he.maxArray(ie);if(Object.keys(H).length){var ue=[],le=[];for(var ke in H)ue.push(H[ke].ordinal),le.push(H[ke].value.duration);le.length>1?oe=z(le,oe,ue):oe-ue[0]%le[0]!=0&&(oe=le[0]*Math.ceil(oe/le[0]))}var xe=function(e){var t=Y[e],r=he.maxArray(Array.from(t.keys()));if(H[e]&&r<oe){var n=H[e].ordinal,a=H[e].value,o=Array.from(t.values()).pop(),u=Math.floor((r-n)/a.duration);do{for(var l=!1,c=0;c<a.keyTimes.length;c++){var f=ge(n,a.duration,a.keyTimes,u,c);if(!l&&f>=r){var h=y(i(t,K,a,o,n,u,r),2);o=h[1],ie.push(r=h[0]),l=!0}l&&f>r&&(c===a.keyTimes.length-1&&f<oe&&!t[e].has(f-1)&&f--,o=de(a,c,o,u),s(K,f,a.keySplines,c),t.set(f,o),ie.push(r=f))}}while(r<oe&&++u)}if(void 0===H[e]&&void 0===J[e]&&!ee[e]){var v,p=Array.from($).reverse().find(function(t){return t.attributeName===e});if(p&&void 0===p.element){var m=p.values[0]||p.from;isNaN(v=parseFloat(m))&&0===(v=Q.fromNumberList(Q.toNumberList(m))).length&&(v=void 0)}else v=re(e);if(void 0!==v&&JSON.stringify(t.get(r))!==JSON.stringify(v)){for(;t.has(r);)r++;t.set(r,v),ie.push(r)}}};for(var Te in Y)xe(Te);var Ee=U(Array.from(new Set(ie))),Ve={};for(var we in Y){for(var _e=new Map,Re=Array.from(Y[we].keys()).pop(),Me=0;Me<Ee.length;Me++){var Ne=Ee[Me];if(Ne<=Re){var Pe=Y[we].get(Ne);void 0===Pe?ve(Y[we],_e,Ne):_e.set(Ne,Pe)}}Ve[we]=_e}if(q=ye(Ve,Ee,J),h=Ee[Ee.length-1],n&&(q=pe(q,h)),Object.keys(H).length){var Ge=[],Oe={},Le=[];for(var Be in H)Ge.push(H[Be].value);te=z(Ge.map(function(e){return e.duration}));for(var Ce=0;Ce<Ge.length;Ce++){var Fe=Ge[Ce],Ie=Fe.attributeName;Oe[Ie]=new Map;var Xe=0,De=Y[Ie]?Array.from(Y[Ie].values()).pop():re(Ie),je=0;do{for(var qe=0;qe<Fe.keyTimes.length;qe++){var Ue=ge(0,Fe.duration,Fe.keyTimes,je,qe);qe===Fe.keyTimes.length-1&&Ue<te&&!Oe[Ie].has(Ue-1)&&Ue--,De=de(Fe,qe,De,je),s(Z,Ue,Fe.keySplines,qe),Oe[Ie].set(Ue,De),Xe=Ue,Le.push(Ue)}}while(Xe<te&&++je)}if(Ge.every(function(e){return e.alternate})){var ze=-1;for(var We in H)for(var Ye=Array.from(Oe[We].keys()),He=Array.from(Oe[We].values()).reverse(),Ke=0;Ke<Ye.length;Ke++){ze=te+Ye[Ke];var Ze=Z.get(Ye[Ke]);Ze&&Z.set(ze,Ze),Oe[We].set(ze,He[Ke]),Le.push(ze)}-1!==ze&&(te=ze)}for(var $e in Le=U(Array.from(new Set(Le))),Oe)for(var Qe=Oe[$e],Je=1;Je<Le.length;Je++){var et=Le[Je];Qe.has(et)||ve(Qe,Qe,et)}W=ye(Oe,Le),n&&(W=pe(W,te))}if(q||W){var tt=function(e){e.has("x")?nt=e.get("x"):e.set("x",nt),e.has("y")?at=e.get("y"):e.set("y",at)};he.retainArray(r.animation,function(t){return!e.includes(t)});var rt=Array.from(new Set(e.map(function(e){return e.attributeName}))).sort().join("-"),nt=0,at=0;void 0===a&&(nt=re("x")||0,at=re("y")||0);var it=function(e,t){t||(e.repeatCount=-1),e.from=e.values[0],e.to=e.values[e.values.length-1],r.animation.push(e)};[q,W].forEach(function(e){if(e){var t=e===q,i=t?K:Z,s=t?void 0:J;if(n){var o,u=[],l=r.parent;if(a){var c=me(e,a,l,s);if(!c)return;(o=new ce).attributeName="d";for(var f=Array.isArray(p=c),v=0,p=f?p:p[Symbol.iterator]();;){var m;if(f){if(v>=p.length)break;m=p[v++]}else{if((v=p.next()).done)break;m=v.value}var g=m;o.keyTimes.push(g.ordinal),o.values.push(""+g.value);var d=i.get(g.ordinal);d?(u.push(d.values().next().value),i.delete(g.ordinal)):u.push("")}}else{(o=new fe).attributeName="transform",o.type=SVGTransform.SVG_TRANSFORM_TRANSLATE;var b=e.entries(),k=Array.isArray(b),A=0;for(b=k?b:b[Symbol.iterator]();;){var S;if(k){if(A>=b.length)break;S=b[A++]}else{if((A=b.next()).done)break;S=A.value}var x=y(S,2),T=x[0];tt(x[1]),o.keyTimes.push(T),o.values.push(l?"".concat(l.refitX(nt)," ").concat(l.refitX(at)):"".concat(nt," ").concat(at));var E=i.get(T);E?(u.push(E.values().next().value),i.delete(T)):u.push("")}}o.keySplines=u,o.duration=t?h:te,it(o,t)}else for(var V=Array.from(e.entries()),w=0,_=0;w<V.length-1;w++){var R=y(V[w],2),M=R[0],N=R[1],P=y(V[w+1],2),G=P[0],O=P[1],L=void 0,B=void 0;if(a){var C=new Map;C.set(M,N),C.set(G,O);var F=me(C,a,r.parent,s);if(!F)continue;(L=new ce).attributeName="d",L.values=F.map(function(e){return""+e.value}),B=rt}else(L=new fe).attributeName="transform",L.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,L.values=[N,O].map(function(e){return tt(e),r.parent?"".concat(r.parent.refitX(nt)," ").concat(r.parent.refitX(at)):"".concat(nt," ").concat(at)}),B=rt+w;t&&(L.begin=[0===w?M:0]),L.duration=G-M,L.keyTimes=[0,1],L.sequential={ordinal:_++,value:B};var I=i.get(G);I&&(L.keySplines=[I.values().next().value],i.delete(G)),it(L,t)}}})}}()}}]),n}()},Te=squared.lib.util,Ee=function(e){function t(e){var r;if(a(this,t),(r=f(this,l(t).call(this,e))).element=e,r.path="",r.mpath=null,r.rotate=0,r.rotateAuto=!1,r.rotateAutoReverse=!1,e){r.setAttribute("path");var n=r.getAttribute("rotate");switch(n){case"auto":r.rotateAuto=!0;break;case"auto-reverse":r.rotateAutoReverse=!0;break;default:r.rotate=Te.convertInt(n)}if(r.keyTimes.length){var i=r.getAttribute("keyPoints");if(""!==i){var s=ce.toFractionList(i);s.length===r.keyTimes.length&&(r.keyPoints=s)}}for(var o=0;o<e.children.length;o++){var u=e.children[o];if("mpath"===u.tagName){var c=C(u);if(c&&(G.shape(c)||G.use(c))){r.mpath=c;break}}}}return r}return u(t,ce),s(t,[{key:"instanceType",get:function(){return 49160}}]),t}(),Ve=squared.lib.dom,we=squared.lib.util,_e=Ve.getKeyframeRules(),Re={"animation-delay":"0s","animation-duration":"0s","animation-iteration-count":"1","animation-play-state":"running","animation-direction":"normal","animation-fill-mode":"none","animation-timing-function":"ease"},Me=RegExp("cubic-bezier\\(".concat(_.ZERO_ONE,", ").concat(_.DECIMAL,", ").concat(_.ZERO_ONE,", ").concat(_.DECIMAL,"\\)"));function Ne(e,t){var r=Ve.cssAttribute(e,t);if("animation-timing-function"===t){for(var n=[];""!==r;){var a=r.indexOf(",");if(-1===a){n.push(r);break}var i=r.substring(0,a);if(i.startsWith("steps")||i.startsWith("cubic-bezier")){var s=r.indexOf(")",a)+1;i+=r.substring(a,s),a=s}n.push(i),r=r.substring(a+1).trim()}return n}return we.flatMap(r.split(/,/),function(e){return e.trim()})}function Pe(e){return e.sort(function(e,t){return e.ordinal>=t.ordinal?1:-1})}var Ge=function(e){return function(t){function r(){var e;return a(this,r),(e=f(this,l(r).apply(this,arguments))).transformed=null,e}return u(r,e),s(r,[{key:"getTransforms",value:function(e){var t=e||this.element;return X(t)||Q.convertTransformList(t.transform.baseVal)}},{key:"getAnimations",value:function(e){var t=this,r=e||this.element,n=[],a=Ne(r,"animation-name");if(a.length){var i={};for(var s in Re){var o=Ne(r,s);for(0===o.length&&o.push(Re[s]);o.length<a.length;)o.push.apply(o,g(o.slice(0)));o.length=a.length,i[s]=o}a.forEach(function(e,t){var a=_e.get(e);a&&function(){var e={},s={};for(var o in a){var u=parseInt(o)/100;for(var l in a[o]){var c=Re[l]?s:e;void 0===c[l]&&(c[l]=[]),c[l].push({ordinal:u,value:a[o][l]})}}if(e.transform){var f=function(){if(v){if(p>=h.length)return"break";m=h[p++]}else{if((p=h.next()).done)return"break";m=p.value}var t=m,n=X(r,t.value);if(n){var a=function(t){var n=e["transform-origin"]&&e["transform-origin"].find(function(e){return e.ordinal===t});if(n)return j(r,n.value)}(t.ordinal);n.forEach(function(r){var n,i,s,o=r.matrix;switch(r.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:n="translate",i="".concat(o.e," ").concat(o.f);break;case SVGTransform.SVG_TRANSFORM_SCALE:n="scale",i="".concat(o.a," ").concat(o.d),!a||0===t.ordinal&&0===a.x&&0===a.y||(s={x:a.x*(1-o.a),y:a.y*(1-o.d)});break;case SVGTransform.SVG_TRANSFORM_ROTATE:n="rotate",i="".concat(r.angle," ").concat(a?"".concat(a.x," ").concat(a.y):"0 0");break;case SVGTransform.SVG_TRANSFORM_SKEWX:n="skewX",i=""+r.angle,!a||0===t.ordinal&&0===a.y||(s={x:a.y*o.c*-1,y:0});break;case SVGTransform.SVG_TRANSFORM_SKEWY:n="skewY",i=""+r.angle,!a||0===t.ordinal&&0===a.x||(s={x:0,y:a.x*o.b*-1});break;default:return}void 0===e[n]&&(e[n]=[]);var u=e[n].findIndex(function(e){return e.ordinal===t.ordinal});-1!==u?(e[n][u].value=i,e[n][u].transformOrigin=s):e[n].push({ordinal:t.ordinal,value:i,transformOrigin:s})})}},h=Pe(e.transform),v=Array.isArray(h),p=0;for(h=v?h:h[Symbol.iterator]();;){var m;if("break"===f())break}}delete e.transform,delete e["transform-origin"];var y=function(a){var o=e[a];Pe(o);var u=void 0;switch(a){case"rotate":case"scale":case"skewX":case"skewY":case"translate":(u=new fe).attributeName="transform",u.fromBaseValue=q(a),u.setType(a);break;default:(u=new ce).attributeName=a,u.fromBaseValue=we.optionalAsString(r,"".concat(a,".baseVal.value"))||Ve.cssAttribute(r,a)}0!==o[0].ordinal&&o.unshift({ordinal:0,value:u.fromBaseValue}),u.paused="paused"===i["animation-play-state"][t],u.delay=P(i["animation-delay"][t]),u.duration=P(i["animation-duration"][t]);for(var l=i["animation-iteration-count"][t],c=i["animation-timing-function"][t],f=i["animation-direction"][t],h=i["animation-fill-mode"][t],v=[],p=[],m=[],y=function(e){if(v.push(o[e].ordinal),p.push(o[e].value),e<o.length-1){var t=s["animation-timing-function"]?s["animation-timing-function"].find(function(t){return t.ordinal===o[e].ordinal}):void 0;m.push(t?t.value:c)}var r=o[e].transformOrigin;r&&u instanceof fe&&(void 0===u.transformOrigin&&(u.transformOrigin=[]),u.transformOrigin[e]=r)},d=0;d<o.length;d++)y(d);m.every(function(e){return"linear"===e})?(u.keyTimes=v,u.values=p):function(){for(var e=[],t=[],n=[],i=0;i<m.length;i++){if(ne[m[i]])m[i]=ne[m[i]];else if(m[i].startsWith("steps")){var s=ce.toStepFractionList(a,m[i],i,v,p,M(),N(r));if(s){e.push.apply(e,g(s[0])),t.push.apply(t,g(s[1])),s[0].forEach(function(){return n.push(ne.step)});continue}m[i]=ne.linear}else{var o=Me.exec(m[i]);m[i]=o?"".concat(o[1]," ").concat(o[2]," ").concat(o[3]," ").concat(o[4]):ne.ease}e.push(v[i]),t.push(p[i]),n.push(m[i])}e.push(v.pop()),t.push(p.pop()),u.keyTimes=e,u.values=t,u.keySplines=n}(),u.repeatCount="infinite"!==l?parseFloat(l):-1,"forwards"!==h&&"both"!==h||(u.fillMode|=4),"backwards"!==h&&"both"!==h||(u.fillMode|=2),u.reverse=f.endsWith("reverse"),u.alternate=(-1===u.repeatCount||u.repeatCount>1)&&f.startsWith("alternate"),n.push(u)};for(var d in e)y(d)}()})}for(var u=0;u<r.children.length;u++){var l=r.children[u];switch(l.tagName){case"set":n.push(new re(l));break;case"animate":n.push(new ce(l));break;case"animateTransform":n.push(new fe(l));break;case"animateMotion":n.push(new Ee(l))}}return n.forEach(function(e){return e.parent=t}),n}},{key:"name",set:function(e){this._name=e},get:function(){return void 0===this._name&&(this._name=Q.setName(this.element)),this._name}},{key:"transform",get:function(){return void 0===this._transform&&(this._transform=this.getTransforms()),this._transform}},{key:"animation",get:function(){return void 0===this._animation&&(this._animation=this.getAnimations()),this._animation}},{key:"visible",set:function(e){L(this.element,e)},get:function(){return O(this.element)}},{key:"opacity",set:function(e){B(this.element,e)},get:function(){return Ve.cssAttribute(this.element,"opacity")||"1"}}]),r}()},Oe=squared.lib.dom;function Le(e){var t=e.parentElement instanceof HTMLElement;return"svg"===e.tagName&&(Oe.isUserAgent(4)&&!t||Oe.isUserAgent(16)&&t)}var Be=function(e){return function(t){function r(){return a(this,r),f(this,l(r).apply(this,arguments))}return u(r,e),s(r,[{key:"setRect",value:function(){var e=this.x,t=this.y,r=this.width,n=this.height,a=this.parent;a&&(e=a.refitX(e),t=a.refitY(t),r=a.refitSize(r),n=a.refitSize(n)),this.setBaseValue("x",e),this.setBaseValue("y",t),this.setBaseValue("width",r),this.setBaseValue("height",n)}},{key:"getElement",value:function(){switch(this.element.tagName){case"svg":case"use":case"image":return this.element;default:return null}}},{key:"x",set:function(e){this._x=e},get:function(){if(void 0!==this._x)return this._x;var e=this.getElement();return e?e.x.baseVal.value:0}},{key:"y",set:function(e){this._y=e},get:function(){if(void 0!==this._y)return this._y;var e=this.getElement();return e?e.y.baseVal.value:0}},{key:"width",set:function(e){this._width=e},get:function(){if(void 0!==this._width)return this._width;var e=this.getElement();return e?Le(e)?e.getBoundingClientRect().width:e.width.baseVal.value:0}},{key:"height",set:function(e){this._height=e},get:function(){if(void 0!==this._height)return this._height;var e=this.getElement();return e?Le(e)?e.getBoundingClientRect().height:e.height.baseVal.value:0}}]),r}()},Ce=squared.lib.dom;function Fe(e,t){if(t){var r=Ce.cssInheritAttribute(e,"fill");if(""!==r){var n=_.URL.exec(r);if(n)return t.definitions.pattern.get(n[1])}}}var Ie=function(e){function t(e){var r;return a(this,t),(r=f(this,l(t).call(this))).element=e,r.aspectRatio={x:0,y:0,unit:1},r}return u(t,squared.lib.base.Container),s(t,[{key:"append",value:function(e,r){return e.parent=this,e.viewport=r||this.getViewport(),v(l(t.prototype),"append",this).call(this,e)}},{key:"build",value:function(e,t,r){void 0===r&&(r=this.element),this.clear();for(var n=this.getViewport(),a=0;a<r.children.length;a++){var i=r.children[a],s=void 0;if(G.svg(i))s=new squared.svg.Svg(i,!1),this.setAspectRatio(s,i);else if(G.g(i))s=new squared.svg.SvgG(i),this.setAspectRatio(s);else if(G.use(i)){var o=C(i);if(o)if(G.symbol(o))s=new squared.svg.SvgUseSymbol(i,o),this.setAspectRatio(s,o);else if(G.image(o))s=new squared.svg.SvgImage(i,o);else if(G.shape(o)){var u=Fe(i,n);u?(s=new squared.svg.SvgUsePattern(i,o,u),this.setAspectRatio(s)):s=new squared.svg.SvgUse(i,o)}}else if(G.image(i))s=new squared.svg.SvgImage(i);else if(G.shape(i)){var l=Fe(i,n);l?(s=new squared.svg.SvgShapePattern(i,l),this.setAspectRatio(s)):s=new squared.svg.SvgShape(i)}s&&(this.append(s,n),s.build(e,t))}}},{key:"synchronize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.each(function(t){return t.synchronize(e)})}},{key:"refitX",value:function(e){return e*this.aspectRatio.unit+this.aspectRatio.x}},{key:"refitY",value:function(e){return e*this.aspectRatio.unit+this.aspectRatio.y}},{key:"refitSize",value:function(e){return e*this.aspectRatio.unit}},{key:"refitPoints",value:function(e){for(var t=this.aspectRatio,r=Array.isArray(a=e),n=0,a=r?a:a[Symbol.iterator]();;){var i;if(r){if(n>=a.length)break;i=a[n++]}else{if((n=a.next()).done)break;i=n.value}var s=i;s.x=s.x*t.unit+t.x,s.y=s.y*t.unit+t.y,void 0!==s.rx&&void 0!==s.ry&&(s.rx*=t.unit,s.ry*=t.unit)}return e}},{key:"getPathAll",value:function(){var e=[],t=this.cascade(),r=Array.isArray(t),n=0;for(t=r?t:t[Symbol.iterator]();;){var a;if(r){if(n>=t.length)break;a=t[n++]}else{if((n=t.next()).done)break;a=n.value}var i=a;Q.asShape(i)&&i.path&&i.path.value&&e.push(i.path.value)}return e}},{key:"getViewport",value:function(){return this.viewport||(Q.asSvg(this)?this:void 0)}},{key:"setAspectRatio",value:function(e,t){var r=function(e){for(;e;){if(Q.asSvg(e)||Q.asUseSymbol(e))return e;e=e.parent}}(this);if(r){var n=e.aspectRatio;if(t){var a=t.viewBox.baseVal;if(a&&a.width>0&&a.height>0){var i=a.width/a.height,s=r.viewBox,o=s.width/s.height;o>i?n.x=(s.width-s.height*a.width/a.height)/2:o<i&&(n.y=(s.height-s.width*a.height/a.width)/2),n.unit=Math.min(s.width/a.width,s.height/a.height)}}n.x*=r.aspectRatio.unit,n.x+=r.aspectRatio.x,n.y*=r.aspectRatio.unit,n.y+=r.aspectRatio.y,n.unit*=r.aspectRatio.unit}}},{key:"instanceType",get:function(){return 2}}]),t}(),Xe=squared.lib.color,De=squared.lib.dom;function je(e){var t=[];return Array.from(e.getElementsByTagName("stop")).forEach(function(e){var r=Xe.parseRGBA(De.cssAttribute(e,"stop-color"),De.cssAttribute(e,"stop-opacity"));r&&t.push({color:r.valueRGBA,offset:De.cssAttribute(e,"offset"),opacity:r.alpha})}),t}function qe(e){for(var t={},r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];for(var i=0;i<n.length;i++){var s=n[i];e[s]&&(t[s]=e[s].baseVal.value,t["".concat(s,"AsString")]=e[s].baseVal.valueAsString)}return t}var Ue=function(e){function t(e){var r,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return a(this,t),(r=f(this,l(t).call(this,e))).element=e,r.documentRoot=n,r.definitions={clipPath:new Map,pattern:new Map,gradient:new Map},r.init(),r}return u(t,xe(Be(ee(Ge(Ie))))),s(t,[{key:"build",value:function(e,r){this.setRect(),v(l(t.prototype),"build",this).call(this,e,r)}},{key:"synchronize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!this.documentRoot&&this.animation.length&&this.mergeAnimate(this.getAnimateViewRect(this.animation),e),v(l(t.prototype),"synchronize",this).call(this,e)}},{key:"init",value:function(){var e=this;[this.element].concat(g(Array.from(this.element.querySelectorAll("defs")))).forEach(function(t){t.querySelectorAll(":scope > set, :scope > animate, :scope > animateTransform, :scope > animateMotion").forEach(function(t){var r=C(t,e.documentRoot?e.element:void 0);r&&(t.parentElement&&t.parentElement.removeChild(t),r.appendChild(t))}),t.querySelectorAll("clipPath, pattern, linearGradient, radialGradient").forEach(function(t){if(t.id){var r="#".concat(t.id);G.clipPath(t)?e.definitions.clipPath.set(r,t):G.pattern(t)?e.definitions.pattern.set(r,t):G.linearGradient(t)?e.definitions.gradient.set(r,Object.assign({element:t,type:"linear",colorStop:je(t)},qe(t,"x1","x2","y1","y2"))):G.radialGradient(t)&&e.definitions.gradient.set(r,Object.assign({element:t,type:"radial",colorStop:je(t)},qe(t,"cx","cy","r","fx","fy")))}})})}},{key:"viewBox",get:function(){return this.element.viewBox.baseVal?this.element.viewBox.baseVal:De.getDOMRect(this.element)}},{key:"instanceType",get:function(){return 18}}]),t}(),ze=function(){function e(t){a(this,e),this.element=t}return s(e,[{key:"build",value:function(e,t,r){}},{key:"synchronize",value:function(e){}},{key:"instanceType",get:function(){return 4}}]),e}(),We=squared.lib.color,Ye=squared.lib.dom,He=squared.lib.util,Ke={url:_.URL,inset:RegExp("inset\\(".concat(_.LENGTH,"\\s?").concat(_.LENGTH,"?\\s?").concat(_.LENGTH,"?\\s?").concat(_.LENGTH,"?\\)")),polygon:/polygon\(([^)]+)\)/,circle:RegExp("circle\\(".concat(_.LENGTH,"(?: at ").concat(_.LENGTH," ").concat(_.LENGTH,")?\\)")),ellipse:RegExp("ellipse\\(".concat(_.LENGTH," ").concat(_.LENGTH,"(?: at ").concat(_.LENGTH," ").concat(_.LENGTH,")?\\)"))},Ze=function(e){return function(r){function n(){return a(this,n),f(this,l(n).apply(this,arguments))}return u(n,e),s(n,[{key:"setPaint",value:function(e){var r=this;this.resetPaint(),this.setAttribute("color",!0),this.setColor("fill"),this.setAttribute("fill-opacity"),this.setAttribute("fill-rule"),this.setColor("stroke"),this.setAttribute("stroke-opacity"),this.setAttribute("stroke-width"),this.setAttribute("stroke-linecap"),this.setAttribute("stroke-linejoin"),this.setAttribute("stroke-miterlimit"),this.setAttribute("stroke-dasharray"),this.setAttribute("stroke-dashoffset"),this.setAttribute("clip-rule");var n=this.getAttribute("clip-path",!1,!1);if(""!==n)for(var a in Ke){var i=Ke[a].exec(n);if(i){if("url"===a)return void(this.clipPath=i[1]);if(e&&e.length){var s=function(){var t=function(e,t){return Ye.convertClientUnit(e,0===t?u:l,n,s)},n=M(),s=N(r.element),o=Q.getPathBoxRect(e),u=o.right-o.left,l=o.bottom-o.top,c=r.parent;switch(a){case"inset":var f=0,h=0,v=t(i[1],1),p=0;i[4]?(f=o.left+t(i[4],0),h=o.right-t(i[2],0),p=o.bottom-t(i[3],1)):i[2]?(f=t(i[2],0),h=o.right-f,p=o.bottom-(i[3]?t(i[3],1):v),f+=o.left):(f=o.left+v,h=o.right-v,p=o.bottom-v);var m=[{x:f,y:v+=o.top},{x:h,y:v},{x:h,y:p},{x:f,y:p}];return c&&c.refitPoints(m),r.clipPath=Q.getPolygon(m),{v:void 0};case"polygon":var g=i[1].split(",").map(function(e){var r=y(e.trim().split(" ").map(function(e,r){return t(e,r)}),2),n=r[0],a=r[1];return{x:n+=o.left,y:a+=o.top}});return c&&c.refitPoints(g),r.clipPath=Q.getPolygon(g),{v:void 0};default:if("circle"===a||"ellipse"===a){var d,b;"circle"===a?b=d=t(i[1],u<l?0:1):(d=t(i[1],0),b=t(i[2],1));var k=o.left,A=o.top;if(i.length>=4){var S=u<l?0:1;k+=t(i[i.length-2],S),A+=t(i[i.length-1],S)}c&&(k=c.refitX(k),A=c.refitX(A),d=c.refitSize(d),b=c.refitSize(b)),r.clipPath=Q.getEllipse(k,A,d,b)}return{v:void 0}}}();if("object"===t(s))return s.v}}}}},{key:"resetPaint",value:function(){this.fill="black",this.fillPattern="",this.fillOpacity="1",this.fillRule="nonzero",this.stroke="",this.strokeWidth="1",this.strokePattern="",this.strokeOpacity="1",this.strokeLinecap="butt",this.strokeLinejoin="miter",this.strokeMiterlimit="4",this.strokeDashArray="",this.strokeDashOffset="0",this.color="",this.clipPath="",this.clipRule=""}},{key:"setColor",value:function(e){var t=this.getAttribute(e),r=_.URL.exec(t);if(r)this["".concat(e,"Pattern")]=r[1];else if(""!==t){var n;switch(t.toLowerCase()){case"none":case"transparent":case"rgba(0, 0, 0, 0)":this[e]="";break;case"currentcolor":n=We.parseRGBA(this.color||Ye.cssAttribute(this.element,e,!0));break;default:n=We.parseRGBA(t)}n&&(this[e]=n.valueRGB)}}},{key:"setAttribute",value:function(e){var t=this.getAttribute(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]);""!==t&&(this[He.convertCamelCase(e)]=t)}},{key:"getAttribute",value:function(e){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Ye.cssAttribute(this.element,e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]);if(t&&""===r){if(this.patternParent)switch(e){case"fill-opacity":case"stroke-opacity":break;default:return r}for(var n=this.useParent||this.parent;n&&(r=Ye.cssAttribute(n.element,e),!He.isString(r));)n=n.parent}return r}}]),n}()},$e=function(e){function t(e){var r;return a(this,t),(r=f(this,l(t).call(this,e))).element=e,r}return u(t,Ze(Ge(Ie))),s(t,[{key:"build",value:function(e,r){v(l(t.prototype),"build",this).call(this,e,r),this.setPaint(this.getPathAll())}},{key:"instanceType",get:function(){return 34}}]),t}(),Qe=squared.lib.util,Je=function(e){function t(e,r){var n;return a(this,t),(n=f(this,l(t).call(this,e))).element=e,n.imageElement=null,n.__get_transform=!1,n.__get_animation=!1,r&&(n.imageElement=r),n}return u(t,Be(ee(Ge(ze)))),s(t,[{key:"build",value:function(){this.setRect()}},{key:"extract",value:function(e){var t=Q.filterTransforms(this.transform,e),r=this.x,n=this.y,a=this.width,i=this.height;if(t.length){t.reverse();for(var s=0;s<t.length;s++){var o=t[s],u=o.matrix,l=r;switch(r=W(u,l,n),n=Y(u,l,n),o.type){case SVGTransform.SVG_TRANSFORM_SCALE:a*=u.a,i*=u.d;break;case SVGTransform.SVG_TRANSFORM_ROTATE:0!==o.angle&&(u.a<0&&(r+=u.a*a),u.c<0&&(r+=u.c*a),u.b<0&&(n+=u.b*i),u.d<0&&(n+=u.d*i),this.rotateOrigin?this.rotateOrigin.angle=(this.rotateOrigin.angle||0)+o.angle:this.rotateOrigin={angle:o.angle,x:0,y:0})}}this.transformed=t}this.parent&&(r=this.parent.refitX(r),n=this.parent.refitY(n),a=this.parent.refitSize(a),i=this.parent.refitSize(i)),this.translationOffset&&(r+=this.translationOffset.x,n+=this.translationOffset.y),this.setBaseValue("x",r),this.setBaseValue("y",n),this.setBaseValue("width",a),this.setBaseValue("height",i)}},{key:"x",set:function(e){m(l(t.prototype),"x",e,this,!0)},get:function(){var e=v(l(t.prototype),"x",this);return 0===e&&this.imageElement?this.imageElement.x.baseVal.value:e}},{key:"y",set:function(e){m(l(t.prototype),"y",e,this,!0)},get:function(){var e=v(l(t.prototype),"y",this);return 0===e&&this.imageElement?this.imageElement.y.baseVal.value:e}},{key:"width",set:function(e){m(l(t.prototype),"width",e,this,!0)},get:function(){var e=v(l(t.prototype),"width",this);return 0===e&&this.imageElement?this.imageElement.width.baseVal.value:e}},{key:"height",set:function(e){m(l(t.prototype),"height",e,this,!0)},get:function(){var e=v(l(t.prototype),"height",this);return 0===e&&this.imageElement?this.imageElement.height.baseVal.value:e}},{key:"href",get:function(){var e=this.imageElement||this.element;return G.image(e)?Qe.resolvePath(e.href.baseVal):""}},{key:"transform",get:function(){var e=v(l(t.prototype),"transform",this);return this.__get_transform||(this.imageElement&&e.push.apply(e,g(this.getTransforms(this.imageElement))),this.__get_transform=!0),e}},{key:"animation",get:function(){var e=v(l(t.prototype),"animation",this);return this.__get_animation||(this.imageElement&&e.push.apply(e,g(this.getAnimations(this.imageElement))),this.__get_animation=!0),e}},{key:"instanceType",get:function(){return 4100}}]),t}(),et=function(e){function t(e){var r;return a(this,t),(r=f(this,l(t).call(this,e))).element=e,r.name="",r.value="",r.transformed=null,r.init(),r}return u(t,Ze(ee(ze))),s(t,[{key:"draw",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];r&&(this.transformed=null);var n=this.parent,a=this.element,i="";if(G.path(a)){if(i=this.getBaseValue("d"),n&&1!==n.aspectRatio.unit||e&&e.length){var s=Q.toPathCommandList(i);if(s.length){var o=Q.getPathPoints(s);if(o.length){if(e&&e.length){if("function"==typeof t){var u=y(t.call(this,a,e),2);this.transformResidual=u[0],e=u[1]}e.length&&(o=this.transformPoints(e,o),this.transformed=e)}n&&n.refitPoints(o),i=Q.fromPathCommandList(Q.rebindPathPoints(s,o))}}}}else if(G.line(a)){var l=[{x:this.getBaseValue("x1"),y:this.getBaseValue("y1")},{x:this.getBaseValue("x2"),y:this.getBaseValue("y2")}];if(e&&e.length){if("function"==typeof t){var c=y(t.call(this,a,e),2);this.transformResidual=c[0],e=c[1]}e.length&&(l=this.transformPoints(e,l),this.transformed=e)}n&&n.refitPoints(l),i=Q.getPolyline(l)}else if(G.circle(a)||G.ellipse(a)){var f,h;G.ellipse(a)?(f=this.getBaseValue("rx"),h=this.getBaseValue("ry")):h=f=this.getBaseValue("r");var v=[{x:this.getBaseValue("cx"),y:this.getBaseValue("cy"),rx:f,ry:h}];if(e&&e.length){if("function"==typeof t){var p=y(t.call(this,a,e,f,h),2);this.transformResidual=p[0],e=p[1]}e.length&&(v=this.transformPoints(e,v),this.transformed=e)}n&&n.refitPoints(v);var m=v[0];i=Q.getEllipse(m.x,m.y,m.rx,m.ry)}else if(G.rect(a)){var g=this.getBaseValue("x"),d=this.getBaseValue("y"),b=this.getBaseValue("width"),k=this.getBaseValue("height");if(e&&e.length){var A=[{x:g,y:d},{x:g+b,y:d},{x:g+b,y:d+k},{x:g,y:d+k}];if("function"==typeof t){var S=y(t.call(this,a,e),2);this.transformResidual=S[0],e=S[1]}e.length&&(A=this.transformPoints(e,A),this.transformed=e),n&&n.refitPoints(A),i=Q.getPolygon(A)}else n&&(g=n.refitX(g),d=n.refitY(d),b=n.refitSize(b),k=n.refitSize(k)),i=Q.getRect(b,k,g,d)}else if(G.polygon(a)||G.polyline(a)){var x=this.getBaseValue("points");if(e&&e.length){if("function"==typeof t){var T=y(t.call(this,a,e),2);this.transformResidual=T[0],e=T[1]}e.length&&(x=this.transformPoints(e,x),this.transformed=e)}n&&(null===this.transformed&&(x=Q.clonePoints(x)),n.refitPoints(x)),i="polygon"===a.tagName?Q.getPolygon(x):Q.getPolyline(x)}return r&&(this.value=i,this.setPaint([i])),i}},{key:"transformPoints",value:function(e,t,r){return Q.applyTransforms(e,t,j(this.element),r)}},{key:"init",value:function(){var e=this.element;G.path(e)?this.setBaseValue("d"):G.line(e)?(this.setBaseValue("x1"),this.setBaseValue("y1"),this.setBaseValue("x2"),this.setBaseValue("y2")):G.rect(e)?(this.setBaseValue("x"),this.setBaseValue("y"),this.setBaseValue("width"),this.setBaseValue("height")):G.circle(e)?(this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("r")):G.ellipse(e)?(this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("rx"),this.setBaseValue("ry")):(G.polygon(e)||G.polyline(e))&&this.setBaseValue("points",Q.clonePoints(e.points))}},{key:"transform",get:function(){return void 0===this._transform&&(this._transform=X(this.element)||Q.convertTransformList(this.element.transform.baseVal)),this._transform}},{key:"instanceType",get:function(){return 1028}}],[{key:"build",value:function(e,t,r,n){return e.draw(Q.filterTransforms(t,r&&r[e.element.tagName]),n),e}}]),t}(),tt=function(e){function t(e,r){var n;return a(this,t),(n=f(this,l(t).call(this,e))).element=e,n.patternElement=r,n}return u(t,Ge(Ie)),s(t,[{key:"build",value:function(e,r){v(l(t.prototype),"build",this).call(this,e,r,this.patternElement)}},{key:"animation",get:function(){return[]}},{key:"instanceType",get:function(){return 130}}]),t}(),rt=function(e){function t(e){var r,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return a(this,t),r=f(this,l(t).call(this,e)),n&&r.setPath(),r}return u(t,xe(Ge(ze))),s(t,[{key:"setPath",value:function(){this.path=new et(this.element)}},{key:"build",value:function(e,t){this.path&&(this.path.parent=this.parent,et.build(this.path,this.transform,e,t))}},{key:"synchronize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.path&&this.animation.length&&this.mergeAnimate(this.getAnimateShape((arguments.length>1?arguments[1]:void 0)||this.element,this.animation),e,this.path)}},{key:"path",set:function(e){this._path=e,e&&(e.name=this.name)},get:function(){return this._path}},{key:"instanceType",get:function(){return 2052}}]),t}(),nt=squared.lib.util,at=function(e){function t(e,r){var n;return a(this,t),(n=f(this,l(t).call(this,e))).element=e,n.patternElement=r,n._clipRegion=[],n}return u(t,Ze(ee(Ge(Ie)))),s(t,[{key:"build",value:function(e,t,r){var n=this;void 0===r&&(r=this.element);var a=et.build(new et(r),this.transform,e);a.value&&function(){n.clipRegion=a.value,a.clipPath&&(n.clipRegion=a.clipPath);var i=[a.value];n.setPaint(i);for(var s=Q.getPathBoxRect(i),o=n.patternElement.width.baseVal.valueAsString,u=n.patternElement.height.baseVal.valueAsString,l=nt.isPercent(o)?parseInt(o)/100:parseFloat(o),c=nt.isPercent(u)?parseInt(u)/100:parseFloat(u),f=(s.right-s.left)*l,h=(s.bottom-s.top)*c,v=1,p=0,m=function(){var a=s.top+p*h,i=1,o=0,u=function(){var u=s.left+o*f,c=new tt(r,n.patternElement);c.build(e,t),c.cascade().forEach(function(r){Q.asShape(r)&&r.path&&(r.path.patternParent=n,r.path.refitBaseValue(u,a),et.build(r.path,r.transform,e,t),r.path.fillOpacity=""+parseFloat(r.path.fillOpacity)*parseFloat(n.fillOpacity),r.path.clipPath=Q.getRect(f,h,u,a)+(""!==r.path.clipPath?";".concat(r.path.clipPath):""))}),n.append(c),i-=l,o++};do{u()}while(i>0);p++,v-=c};v>0;)m();if(""!==n.stroke&&parseFloat(n.strokeWidth)>0){a.fill="",a.fillOpacity="0",a.stroke=n.stroke,a.strokeWidth=n.strokeWidth;var y=new rt(r,!1);y.path=a,n.append(y)}n.drawRegion=s}()}},{key:"clipRegion",set:function(e){""!==e?this._clipRegion.push(e):this._clipRegion.length=0},get:function(){return this._clipRegion.length?this._clipRegion.join(";"):""}},{key:"instanceType",get:function(){return 258}}]),t}(),it=function(e){function t(e,r){var n;return a(this,t),(n=f(this,l(t).call(this,e,!1))).element=e,n.shapeElement=r,n.__get_transform=!1,n.__get_animation=!1,n.setPath(),n}return u(t,Ze(Be(ee(rt)))),s(t,[{key:"setPath",value:function(){this.path=new et(this.shapeElement),this.path.useParent=this}},{key:"build",value:function(e,r){v(l(t.prototype),"build",this).call(this,e,r),this.setPaint(this.path?[this.path.value]:void 0)}},{key:"synchronize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.animation.length&&this.mergeAnimate(this.getAnimateViewRect(this.animation),e),v(l(t.prototype),"synchronize",this).call(this,e,this.shapeElement)}},{key:"transform",get:function(){var e=v(l(t.prototype),"transform",this);return this.__get_transform||(e.push.apply(e,g(this.getTransforms(this.shapeElement))),this.__get_transform=!0),e}},{key:"animation",get:function(){var e=v(l(t.prototype),"animation",this);return this.__get_animation||(e.push.apply(e,g(this.getAnimations(this.shapeElement))),this.__get_animation=!0),e}},{key:"instanceType",get:function(){return 10244}}]),t}(),st=function(e){function t(e,r,n){var i;return a(this,t),(i=f(this,l(t).call(this,e,n))).element=e,i.shapeElement=r,i}return u(t,xe(Be(at))),s(t,[{key:"build",value:function(e,r){v(l(t.prototype),"build",this).call(this,e,r,this.shapeElement)}},{key:"synchronize",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.animation.filter(function(t){return void 0===e.validateBaseValueType(t.attributeName,0)||"x"===t.attributeName||"y"===t.attributeName});n.length&&this.mergeAnimate(this.getAnimateViewRect(n),r),v(l(t.prototype),"synchronize",this).call(this,r)}},{key:"instanceType",get:function(){return 514}}]),t}(),ot=squared.lib.dom,ut=function(e){function t(e,r){var n;return a(this,t),(n=f(this,l(t).call(this,e))).element=e,n.symbolElement=r,n}return u(t,Ze(xe(Be(ee(Ge(Ie)))))),s(t,[{key:"build",value:function(e,r){this.setRect(),v(l(t.prototype),"build",this).call(this,e,r,this.symbolElement);var n=this.getBaseValue("x",0),a=this.getBaseValue("y",0);if(0!==n||0!==a){var i={x:n,y:a};this.cascade().forEach(function(e){return e.translationOffset=i})}this.setPaint(this.getPathAll())}},{key:"synchronize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.animation.length&&this.mergeAnimate(this.getAnimateViewRect(this.animation),e),v(l(t.prototype),"synchronize",this).call(this,e)}},{key:"viewBox",get:function(){return this.symbolElement.viewBox.baseVal?this.symbolElement.viewBox.baseVal:ot.getDOMRect(this.element)}},{key:"instanceType",get:function(){return 66}}]),t}(),lt={constant:ae,util:K};e.Svg=Ue,e.SvgAnimate=ce,e.SvgAnimateMotion=Ee,e.SvgAnimateTransform=fe,e.SvgAnimation=re,e.SvgBaseVal=ee,e.SvgBuild=Q,e.SvgContainer=Ie,e.SvgElement=ze,e.SvgG=$e,e.SvgImage=Je,e.SvgPaint=Ze,e.SvgPath=et,e.SvgPattern=tt,e.SvgShape=rt,e.SvgShapePattern=at,e.SvgSynchronize=xe,e.SvgUse=it,e.SvgUsePattern=st,e.SvgUseSymbol=ut,e.SvgView=Ge,e.SvgViewRect=Be,e.lib=lt,Object.defineProperty(e,"__esModule",{value:!0})});
