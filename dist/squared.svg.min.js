!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e=e||self).squared=e.squared||{},e.squared.svg={}))}(this,function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){this.wrapped=e}function n(e){var t,n;function i(t,n){try{var s=e[t](n),o=s.value,u=o instanceof r;Promise.resolve(u?o.wrapped:o).then(function(e){u?i("next",e):a(s.done?"return":"normal",e)},function(e){i("throw",e)})}catch(e){a("throw",e)}}function a(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?i(t.key,t.arg):n=null}this._invoke=function(e,r){return new Promise(function(a,s){var o={key:e,arg:r,resolve:a,reject:s,next:null};n?n=n.next=o:(t=n=o,i(e,r))})},"function"!=typeof e.return&&(this.return=void 0)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}function v(e,t,r){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=h(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function p(e,t,r,n){return(p="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,r,n){var i,a=h(e,t);if(a){if((i=Object.getOwnPropertyDescriptor(a,t)).set)return i.set.call(n,r),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(n,t)){if(!i.writable)return!1;i.value=r,Object.defineProperty(n,t,i)}else o(n,t,r);return!0})(e,t,r,n)}function y(e,t,r,n,i){if(!p(e,t,r,n||e)&&i)throw Error("failed to set property");return r}"function"==typeof Symbol&&Symbol.asyncIterator&&(n.prototype[Symbol.asyncIterator]=function(){return this}),n.prototype.next=function(e){return this._invoke("next",e)},n.prototype.throw=function(e){return this._invoke("throw",e)},n.prototype.return=function(e){return this._invoke("return",e)};function m(e,t){return d(e)||function(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw a}}return r}(e,t)||k()}function g(e){return function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(e){if(Array.isArray(e))return e}function b(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function k(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var S=squared.lib.dom,A=squared.lib.util;function T(e,t,r){e.style[t]=r,e.setAttribute(t,r)}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"deg",r=parseFloat(e);switch(t){case"turn":r*=360;break;case"rad":r*=180/Math.PI}return r}function _(e){return e*Math.PI/180}var w={path:1,line:2,rect:3,ellipse:4,circle:5,polyline:6,polygon:7},R={URL:/url\("?(#.*?)"?\)/,ZERO_ONE:"(0(?:\\.\\d+)?|1(?:\\.0+)?)",DECIMAL:"(-?[\\d.]+)",LENGTH:"(-?[\\d.]+(?:[a-z]{2,}|%)?)",DEGREE:"(?:(-?[\\d.]+)(deg|rad|turn))"},V={MATRIX:"(matrix(?:3d)?)\\(".concat(R.DECIMAL,", ").concat(R.DECIMAL,", ").concat(R.DECIMAL,", ").concat(R.DECIMAL,", ").concat(R.DECIMAL,", ").concat(R.DECIMAL,"(?:, ").concat(R.DECIMAL,")?(?:, ").concat(R.DECIMAL,")?(?:, ").concat(R.DECIMAL,")?(?:, ").concat(R.DECIMAL,")?(?:, ").concat(R.DECIMAL,")?(?:, ").concat(R.DECIMAL,")?(?:, ").concat(R.DECIMAL,")?(?:, ").concat(R.DECIMAL,")?(?:, ").concat(R.DECIMAL,")?(?:, ").concat(R.DECIMAL,")?\\)"),ROTATE:"(rotate[XY]?)\\(".concat(R.DEGREE,"\\)"),SKEW:"(skew[XY]?)\\(".concat(R.DEGREE,"(?:, ").concat(R.DEGREE,")?\\)"),SCALE:"(scale[XY]?)\\(".concat(R.DECIMAL,"(?:, ").concat(R.DECIMAL,")?\\)"),TRANSLATE:"(translate[XY]?)\\(".concat(R.LENGTH,"(?:, ").concat(R.LENGTH,")?\\)")},E={applyX:function(e,t,r){return e.a*t+e.c*r+e.e},applyY:function(e,t,r){return e.b*t+e.d*r+e.f},clone:function(e){return{a:e.a,b:e.b,c:e.c,d:e.d,e:e.e,f:e.f}},rotate:function(e){var t=_(e),r=Math.cos(t),n=Math.sin(t);return{a:r,b:n,c:-1*n,d:r,e:0,f:0}},skew:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{a:1,b:Math.tan(_(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)),c:Math.tan(_(e)),d:1,e:0,f:0}},scale:function(){return{a:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,b:0,c:0,d:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e:0,f:0}},translate:function(){return{a:1,b:0,c:0,d:1,e:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,f:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0}}},M={create:function(e,t){return{type:e,matrix:t,angle:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,method:{x:!(arguments.length>3&&void 0!==arguments[3])||arguments[3],y:!(arguments.length>4&&void 0!==arguments[4])||arguments[4]}}},parse:function(e,t){var r=void 0===t?S.cssInline(e,"transform"):t;if(""!==r){var n=[];for(var i in V)for(var a=RegExp(V[i],"g"),s=null;null!==(s=a.exec(r));){var o=s[1].endsWith("X"),u=s[1].endsWith("Y");if(s[1].startsWith("rotate")){var l=x(s[2],s[3]),c=E.rotate(l);o?(c.a=1,c.b=0,c.c=0):u&&(c.b=0,c.c=0,c.d=1),n[s.index]=M.create(SVGTransform.SVG_TRANSFORM_ROTATE,c,l,!o,!u)}else if(s[1].startsWith("skew")){var f=u?0:x(s[2],s[3]),h=u?x(s[2],s[3]):s[4]&&s[5]?x(s[4],s[5]):0,v=E.skew(f,h);o?n[s.index]=M.create(SVGTransform.SVG_TRANSFORM_SKEWX,v,f,!0,!1):u?n[s.index]=M.create(SVGTransform.SVG_TRANSFORM_SKEWY,v,h,!1,!0):(n[s.index]=M.create(SVGTransform.SVG_TRANSFORM_SKEWX,Object.assign({},v,{b:0}),f,!0,!1),0!==h&&(n[s.index+1]=M.create(SVGTransform.SVG_TRANSFORM_SKEWY,Object.assign({},v,{c:0}),h,!1,!0)))}else if(s[1].startsWith("scale")){var p=u?void 0:parseFloat(s[2]),y=E.scale(p,o?void 0:u?parseFloat(s[2]):!o&&s[3]?parseFloat(s[3]):p);n[s.index]=M.create(SVGTransform.SVG_TRANSFORM_SCALE,y,0,!u,!o)}else if(s[1].startsWith("translate")){var m=G(),g=F(e),d=parseFloat(A.convertPX(s[2],m,g)),b=!o&&s[3]?parseFloat(A.convertPX(s[3],m,g)):0,k=E.translate(u?0:d,u?d:b);n[s.index]=M.create(SVGTransform.SVG_TRANSFORM_TRANSLATE,k,0)}else if(s[1].startsWith("matrix")){var T=M.matrix(e,t);T&&(n[s.index]=M.create(SVGTransform.SVG_TRANSFORM_MATRIX,T))}}return n.filter(function(e){return!!e&&(e.fromCSS=!0,!0)})}},matrix:function(e,t){var r=RegExp(V.MATRIX).exec(t||S.getStyle(e,!0).transform||"");if(r)switch(r[1]){case"matrix":return{a:parseFloat(r[2]),b:parseFloat(r[3]),c:parseFloat(r[4]),d:parseFloat(r[5]),e:parseFloat(r[6]),f:parseFloat(r[7])};case"matrix3d":return{a:parseFloat(r[2]),b:parseFloat(r[3]),c:parseFloat(r[6]),d:parseFloat(r[7]),e:parseFloat(r[14]),f:parseFloat(r[15])}}},origin:function(e,t){var r={x:null,y:null};if(""!==(t=t||S.cssAttribute(e,"transform-origin"))){var n,i,a=I(e);if(a)n=a.width,i=a.height;else{var s=e.parentElement;s instanceof SVGGraphicsElement&&s.viewportElement&&(N.svg(s.viewportElement)||N.symbol(s.viewportElement))&&s.viewportElement.viewBox&&(n=s.viewportElement.viewBox.baseVal.width,i=s.viewportElement.viewBox.baseVal.height)}if(!n||!i){var o=e.getBoundingClientRect();n||(n=o.width),i||(i=o.height)}var u=t.split(" ");1===u.length&&u.push("center"),(u=u.slice(0,2)).includes("left")?r.x=0:u.includes("right")&&(r.x=n),u.includes("top")?r.y=0:u.includes("bottom")&&(r.y=i),["x","y"].forEach(function(t){if(null===r[t])for(var a=0;a<u.length;a++){var s=u[a];if(""!==s&&("center"===s&&(s="50%"),A.isUnit(s)?r[t]=parseInt(s.endsWith("px")?s:A.convertPX(s,G(),F(e))):A.isPercent(s)&&(r[t]=("x"===t?n:i)*(parseInt(s)/100)),null!==r[t])){u[a]="";break}}})}return r.x=r.x||0,r.y=r.y||0,r},rotate:function(e){var t=[],r=e.attributes.getNamedItem("transform");if(r)for(var n,i=/rotate\((-?[\d.]+),?\s*(-?[\d.]+),?\s*(-?[\d.]+)\)/g;null!==(n=i.exec(r.value));)t.push({angle:parseFloat(n[1]),x:parseFloat(n[2]),y:parseFloat(n[3])});return t.length?t:[{angle:0,x:0,y:0}]},valueAsInitial:function(e){switch(e){case"rotate":case SVGTransform.SVG_TRANSFORM_ROTATE:return"0 0 0";case"scale":case SVGTransform.SVG_TRANSFORM_SCALE:return"1 1";case"skewX":case"skewY":case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:return"0";case"translate":case SVGTransform.SVG_TRANSFORM_TRANSLATE:return"0 0"}return""},typeAsName:function(e){switch(e){case SVGTransform.SVG_TRANSFORM_ROTATE:return"rotate";case SVGTransform.SVG_TRANSFORM_SCALE:return"scale";case SVGTransform.SVG_TRANSFORM_SKEWX:return"skewX";case SVGTransform.SVG_TRANSFORM_SKEWY:return"skewY";case SVGTransform.SVG_TRANSFORM_TRANSLATE:return"translate"}return""}},N={svg:function(e){return"svg"===e.tagName},g:function(e){return"g"===e.tagName},symbol:function(e){return"symbol"===e.tagName},path:function(e){return"path"===e.tagName},shape:function(e){return void 0!==w[e.tagName]},image:function(e){return"image"===e.tagName},use:function(e){return"use"===e.tagName},line:function(e){return"line"===e.tagName},rect:function(e){return"rect"===e.tagName},circle:function(e){return"circle"===e.tagName},ellipse:function(e){return"ellipse"===e.tagName},polygon:function(e){return"polygon"===e.tagName},polyline:function(e){return"polyline"===e.tagName},clipPath:function(e){return"clipPath"===e.tagName},pattern:function(e){return"pattern"===e.tagName},linearGradient:function(e){return"linearGradient"===e.tagName},radialGradient:function(e){return"radialGradient"===e.tagName}};function G(){return A.optionalAsNumber(squared,"settings.resolutionDPI")||96}function F(e){return parseInt(S.getStyle(e).fontSize||"16")}function O(e){var t=0,r=0;if(A.isNumber(e))t=parseInt(e);else if(/-?\d+ms$/.test(e))r=parseInt(e);else if(/-?\d+s$/.test(e))t=parseInt(e);else if(/-?\d+min$/.test(e))t=60*parseInt(e);else if(/-?\d+(.\d+)?h$/.test(e))t=60*parseFloat(e)*60;else{var n=/^(?:(-?)(\d?\d):)?(?:(\d?\d):)?(\d?\d)\.?(\d?\d?\d)?$/.exec(e);n&&(n[2]&&(t+=60*parseInt(n[2])*60),n[3]&&(t+=60*parseInt(n[3])),n[4]&&(t+=parseInt(n[4])),n[5]&&(r=parseInt(n[5])*(n[5].length<3?Math.pow(10,3-n[5].length):1)),n[1]&&(t*=-1,r*=-1))}return 1e3*t+r}function P(e){var t=S.cssAttribute(e,"visibility",!0);return"hidden"!==t&&"collapse"!==t&&"none"!==S.cssAttribute(e,"display",!0)}function C(e,t){T(e,"display",t?"block":"none"),T(e,"visibility",t?"visible":"hidden")}function B(e,t){if(A.isNumber(t)){var r=parseFloat(""+t);r<=0?r=0:r>=1&&(r=1),e.style.opacity=""+r,e.setAttribute("opacity",""+r)}}function L(e,t){var r=e.attributes.getNamedItem("href");if(r&&"#"===r.value.charAt(0)){var n,i=r.value.substring(1);if(void 0===t)for(n=e.parentElement;n&&n.parentElement instanceof SVGGraphicsElement;)n=n.parentElement;else n=t;if(n)for(var a=Array.from(n.querySelectorAll("*")),s=0;s<a.length;s++){var o=a[s];if(o.id===i&&o instanceof SVGElement)return o}else{var u=document.getElementById(i);if(u instanceof SVGElement)return u}}return null}function I(e){for(var t=e.parentElement;t&&t instanceof SVGElement;){if(N.svg(t)||N.symbol(t)&&t.viewBox&&t.viewBox.baseVal.width>0&&t.viewBox.baseVal.height>0)return t.viewBox.baseVal;t=t.parentElement}}function X(e){return e.sort(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?function(e,t){return e>t?-1:1}:function(e,t){return e<t?-1:1})}function z(e){return e%1!=0?e.toFixed(arguments.length>1&&void 0!==arguments[1]?arguments[1]:3).replace(/(\.\d+?)0+$/,function(e,t){return t}):e}function D(e,t,r){return e+(t-e)*r}function j(e,t){if(e.length>1){var r=X(e.slice(0))[0],n=0;if(t)if(t.length===e.length)for(var i=0;i<t.length;i++)n=Math.max(n,t[i]+e[i]);else t=void 0;void 0===t&&(n=Math.max(n,r));for(var a=n,s=!1;!s;)for(var o=0;o<e.length;o++){if((a-(t?t[o]:0))%e[o]!=0){s=!1,a+=r;break}s=!0}return a}return e[0]}function q(e,t){return t*Math.cos(_(e))*-1}var W=Object.freeze({REGEXP_SVG:R,MATRIX:E,TRANSFORM:M,SVG:N,getHostDPI:G,getFontSize:F,convertClockTime:O,isVisible:P,setVisible:C,setOpacity:B,getTargetElement:L,getNearestViewBox:I,sortNumber:X,truncateDecimal:z,getSplitValue:D,getLeastCommonMultiple:j,getRadiusX:function(e,t){return t*Math.sin(_(e))},getRadiusY:q}),Y=squared.lib.util,U=new Map,H=function(){function e(){i(this,e)}return s(e,null,[{key:"asContainer",value:function(e){return Y.hasBit(e.instanceType,2)}},{key:"asElement",value:function(e){return Y.hasBit(e.instanceType,4)}},{key:"asSvg",value:function(e){return 18===e.instanceType}},{key:"asG",value:function(e){return 34===e.instanceType}},{key:"asUseSymbol",value:function(e){return 66===e.instanceType}},{key:"asPattern",value:function(e){return 130===e.instanceType}},{key:"asShapePattern",value:function(e){return 258===e.instanceType}},{key:"asUsePattern",value:function(e){return 514===e.instanceType}},{key:"asShape",value:function(e){return Y.hasBit(e.instanceType,2052)}},{key:"asImage",value:function(e){return 4100===e.instanceType}},{key:"asUse",value:function(e){return 10244===e.instanceType}},{key:"asSet",value:function(e){return 8===e.instanceType}},{key:"asAnimation",value:function(e){return Y.hasBit(e.instanceType,8)}},{key:"asAnimationAnimate",value:function(e){return Y.hasBit(e.instanceType,16392)}},{key:"asAnimate",value:function(e){return 16392===e.instanceType}},{key:"asAnimateMotion",value:function(e){return 49160===e.instanceType}},{key:"asAnimateTransform",value:function(e){return 81928===e.instanceType}},{key:"setName",value:function(e){if(e){var t,r="";if(Y.isString(e.id)){var n=Y.convertWord(e.id,!0);U.has(n)||(r=n),t=n}else t=e.tagName;var i=U.get(t)||0;return""!==r?(U.set(r,i),r):(U.set(t,++i),"".concat(t,"_").concat(i))}return U.clear(),""}},{key:"drawLine",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return"M".concat(e,",").concat(t," L").concat(r,",").concat(n)}},{key:"drawRect",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return"M".concat(r,",").concat(n," ").concat(r+e,",").concat(n," ").concat(r+e,",").concat(n+t," ").concat(r,",").concat(n+t," Z")}},{key:"drawCircle",value:function(t,r,n){return e.drawEllipse(t,r,n)}},{key:"drawEllipse",value:function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return void 0===n&&(n=r),"M".concat(i?z(e-r):e-r,",").concat(i?z(t):t," a").concat(r,",").concat(n,",0,1,0,").concat(2*r,",0 a").concat(r,",").concat(n,",0,1,0,-").concat(2*r,",0")}},{key:"drawPolygon",value:function(t){var r=e.drawPolyline(t,arguments.length>1&&void 0!==arguments[1]&&arguments[1]);return""!==r?"".concat(r," Z"):""}},{key:"drawPolyline",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.length?"M".concat(e.map(function(e){return"".concat(t?z(e.x):e.x,",").concat(t?z(e.y):e.y)}).join(" ")):""}},{key:"drawPath",value:function(e){for(var t="",r=Array.isArray(i=e),n=0,i=r?i:i[Symbol.iterator]();;){var a;if(r){if(n>=i.length)break;a=i[n++]}else{if((n=i.next()).done)break;a=n.value}var s=a;switch(t+=(""!==t?" ":"")+s.command,s.command.toUpperCase()){case"M":case"L":case"C":case"S":case"Q":case"T":t+=s.coordinates.join(",");break;case"H":t+=s.coordinates[0];break;case"V":t+=s.coordinates[1];break;case"A":t+="".concat(s.radiusX,",").concat(s.radiusY,",").concat(s.xAxisRotation,",").concat(s.largeArcFlag,",").concat(s.sweepFlag,",").concat(s.coordinates.join(","))}}return t}},{key:"getPathCommands",value:function(t){var r,n=[],i=/([A-Za-z])([^A-Za-z]+)?/g;for(t=t.trim();null!==(r=i.exec(t))&&(0!==n.length||"M"===r[1].toUpperCase());){r[2]=(r[2]||"").trim();var a=e.toNumberList(r[2]),s=n[n.length-1],o=s?s.command.toUpperCase():"",u=s?s.points[s.points.length-1]:void 0,l=void 0,c=void 0,f=void 0,h=void 0,v=void 0;switch(r[1].toUpperCase()){case"M":0===n.length&&(r[1]="M");case"L":if(a.length>=2){a.length%2!=0&&a.length--;break}continue;case"H":if(u&&a.length){a[1]="h"===r[1]?0:u.y,a.length=2;break}continue;case"V":if(u&&a.length){var p=a[0];a[0]="v"===r[1]?0:u.x,a[1]=p,a.length=2;break}continue;case"Z":if(n.length){a.push.apply(a,g(n[0].coordinates.slice(0,2))),r[1]="Z";break}continue;case"C":if(a.length>=6){a.length=6;break}continue;case"S":if(a.length>=4&&("C"===o||"S"===o)){a.length=4;break}continue;case"Q":if(a.length>=4){a.length=4;break}continue;case"T":if(a.length>=2&&("Q"===o||"T"===o)){a.length=2;break}continue;case"A":if(a.length>=7){var y=m(a.splice(0,5),5);l=y[0],c=y[1],f=y[2],h=y[3],v=y[4],a.length=2;break}continue;default:continue}if(a.length>1){for(var d=[],b=/[a-z]/.test(r[1]),k=0;k<a.length;k+=2){var S=a[k],A=a[k+1];b&&u&&(u={x:S+=u.x,y:A+=u.y}),d.push({x:S,y:A})}n.push({command:r[1],relative:b,coordinates:a,points:d,radiusX:l,radiusY:c,xAxisRotation:f,largeArcFlag:h,sweepFlag:v})}}return n}},{key:"getPathPoints",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[],n=0,i=0,a=0;a<e.length;a++){for(var s=e[a],o=0;o<s.coordinates.length;o+=2){s.relative?(n+=s.coordinates[o],i+=s.coordinates[o+1]):(n=s.coordinates[o],i=s.coordinates[o+1]);var u={x:n,y:i};"A"===s.command.toUpperCase()&&(u.rx=s.radiusX,u.ry=s.radiusY,t&&(s.coordinates[o]>=0?u.y-=s.radiusY:u.y+=s.radiusY)),r.push(u)}if(s.relative){switch(s.command){case"h":case"v":var l,c=e[a-1];if(c&&"M"===c.command)(l=c.coordinates).push.apply(l,g(s.coordinates)),e.splice(a--,1);s.command="M";break;default:s.command=s.command.toUpperCase()}s.relative=!1}}return r}},{key:"setPathPoints",value:function(e,t){var r=t.slice(0);e:for(var n=Array.isArray(a=e),i=0,a=n?a:a[Symbol.iterator]();;){var s;if(n){if(i>=a.length)break;s=a[i++]}else{if((i=a.next()).done)break;s=i.value}var o=s;switch(o.command.toUpperCase()){case"M":case"L":case"H":case"V":case"C":case"S":case"Q":case"T":for(var u=0;u<o.coordinates.length;u+=2){var l=r.shift();if(!l){e=[];break e}o.coordinates[u]=l.x,o.coordinates[u+1]=l.y}break;case"A":var c=r.shift();if(!c||void 0===c.rx||void 0===c.ry){e=[];break e}o.coordinates[0]=c.x,o.coordinates[1]=c.y,o.radiusX=c.rx,o.radiusY=c.ry}}return e}},{key:"convertTransforms",value:function(e){for(var t=[],r=0;r<e.numberOfItems;r++){var n=e.getItem(r);t.push(M.create(n.type,n.matrix,n.angle))}return t}},{key:"filterTransforms",value:function(e,t){for(var r=[],n=Array.isArray(a=e),i=0,a=n?a:a[Symbol.iterator]();;){var s;if(n){if(i>=a.length)break;s=a[i++]}else{if((i=a.next()).done)break;s=i.value}var o=s;if(void 0===t||!t.includes(o.type)){switch(o.type){case SVGTransform.SVG_TRANSFORM_ROTATE:case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:if(0===o.angle)continue;break;case SVGTransform.SVG_TRANSFORM_SCALE:if(1===o.matrix.a&&1===o.matrix.d)continue;break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:if(0===o.matrix.e&&0===o.matrix.f)continue}r.push(o)}}return r}},{key:"applyTransforms",value:function(t,r,n,i){t=t.slice(0).reverse();for(var a=e.clonePoints(r),s=Array.isArray(u=t),o=0,u=s?u:u[Symbol.iterator]();;){var l;if(s){if(o>=u.length)break;l=u[o++]}else{if((o=u.next()).done)break;l=o.value}var c=l,f=c.matrix,h=0,v=0,p=0,y=0;if(n)switch(c.type){case SVGTransform.SVG_TRANSFORM_SCALE:c.method.x&&(p=n.x*(1-f.a)),c.method.y&&(y=n.y*(1-f.d));break;case SVGTransform.SVG_TRANSFORM_SKEWX:c.method.y&&(v-=n.y);break;case SVGTransform.SVG_TRANSFORM_SKEWY:c.method.x&&(h-=n.x);break;case SVGTransform.SVG_TRANSFORM_ROTATE:c.method.x&&(h-=n.x,p=n.x+q(c.angle,n.x)),c.method.y&&(v-=n.y,y=n.y+q(c.angle,n.y))}if(i)switch(c.type){case SVGTransform.SVG_TRANSFORM_SCALE:i.x*=f.a,i.y*=f.d;break;case SVGTransform.SVG_TRANSFORM_ROTATE:0!==c.angle&&(i.angle=(i.angle||0)+c.angle);break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:i.x+=f.e,i.y+=f.f}for(var m=Array.isArray(d=a),g=0,d=m?d:d[Symbol.iterator]();;){var b;if(m){if(g>=d.length)break;b=d[g++]}else{if((g=d.next()).done)break;b=g.value}var k=b,S=k.x;if(k.x=E.applyX(f,S,k.y+v)+p,k.y=E.applyY(f,S+h,k.y)+y,c.type===SVGTransform.SVG_TRANSFORM_SCALE&&void 0!==k.rx&&void 0!==k.ry){var A=k.rx;k.rx=E.applyX(f,A,k.ry+v),k.ry=E.applyY(f,A+h,k.ry)}}}return a}},{key:"clonePoints",value:function(e){var t=[];if(Array.isArray(e))for(var r=Array.isArray(i=e),n=0,i=r?i:i[Symbol.iterator]();;){var a;if(r){if(n>=i.length)break;a=i[n++]}else{if((n=i.next()).done)break;a=n.value}var s=a,o={x:s.x,y:s.y};void 0!==s.rx&&void 0!==s.ry&&(o.rx=s.rx,o.ry=s.ry),t.push(o)}else for(var u=0;u<e.numberOfItems;u++){var l=e.getItem(u);t.push({x:l.x,y:l.y})}return t}},{key:"convertNumbers",value:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push({x:e[r],y:e[r+1]});return t.length%2==0?t:[]}},{key:"toNumberList",value:function(e){for(var t,r=[],n=/-?[\d.]+/g;null!==(t=n.exec(e));){var i=parseFloat(t[0]);isNaN(i)||r.push(i)}return r}},{key:"toPointList",value:function(e){var t=[],r=e.trim().split(/\s+/),n=Array.isArray(r),i=0;for(r=n?r:r[Symbol.iterator]();;){var a;if(n){if(i>=r.length)break;a=r[i++]}else{if((i=r.next()).done)break;a=i.value}var s=m(a.split(",").map(function(e){return parseFloat(e)}),2);t.push({x:s[0],y:s[1]})}return t}},{key:"toBoxRect",value:function(t){for(var r=Number.MAX_VALUE,n=-Number.MAX_VALUE,i=-Number.MAX_VALUE,a=Number.MAX_VALUE,s=Array.isArray(u=t),o=0,u=s?u:u[Symbol.iterator]();;){var l;if(s){if(o>=u.length)break;l=u[o++]}else{if((o=u.next()).done)break;l=o.value}for(var c=e.getPathPoints(e.getPathCommands(l),!0),f=Array.isArray(v=c),h=0,v=f?v:v[Symbol.iterator]();;){var p;if(f){if(h>=v.length)break;p=v[h++]}else{if((h=v.next()).done)break;p=h.value}p.y<r?r=p.y:p.y>i&&(i=p.y),p.x<a?a=p.x:p.x>n&&(n=p.x)}}return{top:r,right:n,bottom:i,left:a}}}]),e}(),K=squared.lib.dom,Z=function(e){return function(t){function r(){var e;return i(this,r),(e=f(this,l(r).apply(this,arguments)))._baseVal={},e}return u(r,e),s(r,[{key:"setBaseValue",value:function(e,t){if(void 0!==t){if(this.validateBaseValue(e,t))return this._baseVal[e]=t,!0}else switch(e){case"d":return this._baseVal[e]=K.cssAttribute(this.element,"d"),!0;case"points":var r=this.element[e];if(Array.isArray(r))return this._baseVal[e]=H.clonePoints(r),!0;break;default:var n=this.element[e];if(n&&n.baseVal)return this._baseVal[e]=n.baseVal.value,!0}return!1}},{key:"getBaseValue",value:function(e,t){return void 0!==this._baseVal[e]||this.setBaseValue(e)?this._baseVal[e]:t}},{key:"refitBaseValue",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;function i(i){for(var a=Array.isArray(o=i),s=0,o=a?o:o[Symbol.iterator]();;){var u;if(a){if(s>=o.length)break;u=o[s++]}else{if((s=o.next()).done)break;u=s.value}var l=u;l.x+=e,l.y+=t,void 0!==l.rx&&void 0!==l.ry&&(l.rx*=r,l.ry*=n)}}for(var a in this._baseVal){var s=this._baseVal[a];if("string"==typeof s){if("d"===a){var o=H.getPathCommands(s),u=H.getPathPoints(o);i(u),this._baseVal[a]=H.drawPath(H.setPathPoints(o,u))}}else if("number"==typeof s)switch(a){case"cx":case"x1":case"x2":case"x":this._baseVal[a]+=e;break;case"cy":case"y1":case"y2":case"y":this._baseVal[a]+=t;case"r":this._baseVal[a]*=Math.min(r,n);break;case"rx":case"width":this._baseVal[a]*=r;break;case"height":case"ry":this._baseVal[a]*=n}else Array.isArray(s)&&"points"===a&&i(s)}}},{key:"validateBaseValue",value:function(e,t){switch(e){case"d":return"string"==typeof t;case"cx":case"cy":case"r":case"rx":case"ry":case"x1":case"x2":case"y1":case"y2":case"x":case"y":case"width":case"height":return"number"==typeof t;case"points":return Array.isArray(t)}}}]),r}()},$=squared.lib.dom,Q=squared.lib.util,J=function(){function e(t){if(i(this,e),this.attributeName="",this.paused=!1,this.synchronizeState=0,this._duration=-1,this._begin=0,this._to="",t){this.element=t,this.setAttribute("attributeName"),this.setAttribute("to");var r=this.getAttribute("dur");""!==r&&"indefinite"!==r&&(this.duration=O(r)),"transform"===this.attributeName?this.baseFrom=M.valueAsInitial(this.getAttribute("type")):t.parentElement&&(this.baseFrom=Q.optionalAsString(t.parentElement,"".concat(this.attributeName,".baseVal.valueAsString"))||$.cssInheritAttribute(t.parentElement,this.attributeName))}}return s(e,[{key:"setAttribute",value:function(e,t){var r=this.getAttribute(e);""!==r&&(void 0!==t?this[e+Q.capitalize(t)]=r===t:this[e]=r)}},{key:"getAttribute",value:function(e){var t=this.element&&this.element.attributes.getNamedItem(e);return t?t.value.trim():""}},{key:"addState",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0;n<t.length;n++){var i=t[n];Q.hasBit(this.synchronizeState,i)||(this.synchronizeState|=i)}}},{key:"removeState",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0;n<t.length;n++){var i=t[n];Q.hasBit(this.synchronizeState,i)&&(this.synchronizeState^=i)}}},{key:"hasState",value:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.some(function(t){return Q.hasBit(e.synchronizeState,t)})}},{key:"begin",set:function(e){this._begin=e},get:function(){return this._begin}},{key:"duration",set:function(e){this._duration=Math.round(e)},get:function(){return this._duration}},{key:"to",set:function(e){this._to=e},get:function(){return this._to}},{key:"group",set:function(e){this._group=e},get:function(){return this._group||{id:-1/0,name:""}}},{key:"setterType",set:function(e){},get:function(){return!0}},{key:"instanceType",get:function(){return 8}}]),e}(),ee={ease:"0.25 0.1 0.25 1","ease-in":"0.42 0 1 1","ease-in-out":"0.42 0 0.58 1","ease-out":"0 0 0.58 1",linear:"0 0 1 1",step:"0 1 0 1"},te=Object.freeze({KEYSPLINE_NAME:ee}),re=squared.lib.color,ne=squared.lib.util;function ie(e){return parseFloat((1-e).toFixed(5))}var ae=function(e){function t(e){var r;if(i(this,t),(r=f(this,l(t).call(this,e))).element=e,r.from="",r.repeatDuration=-1,r.additiveSum=!1,r.accumulateSum=!1,r.fillMode=0,r.alternate=!1,r._repeatCount=1,r._reverse=!1,r._setterType=!1,e){var n=r.getAttribute("values"),a=-1!==r.duration?t.toFractionList(r.getAttribute("keyTimes")):[];if(""!==n)r.values=ne.flatMap(n.split(";"),function(e){return e.trim()}),r.values.length>1&&a.length===r.values.length?(r.from=r.values[0],r.to=r.values[r.values.length-1],r.keyTimes=a):1===r.values.length&&(r.to=n[0],r.convertToValues());else{if(r.from=r.getAttribute("from"),""===r.to){var s=r.getAttribute("by");ne.isNumber(s)&&(""===r.from&&r.baseFrom&&(r.from=r.baseFrom),ne.isNumber(r.from)&&(r.to=""+(parseFloat(r.from)+parseFloat(s))))}r.convertToValues(a)}r.setAttribute("additive","sum");var o=r.getAttribute("repeatDur");if(""!==o&&"indefinite"!==o&&(r.repeatDuration=O(o)),!(-1!==r.duration&&-1!==r.repeatDuration&&r.repeatDuration<r.duration)){var u=r.getAttribute("repeatCount");r.repeatCount="indefinite"===u?-1:parseFloat(u)}"animate"===e.tagName&&r.setCalcMode(r.attributeName)}return r}return u(t,J),s(t,[{key:"setCalcMode",value:function(e){if(this.element)switch(this.getAttribute("calcMode")){case"discrete":if(2===this.keyTimes.length&&0===this.keyTimes[0]){for(var r=[],n=[],i=0;i<this.keyTimes.length-1;i++){var a=t.toStepFractionList(e,"step-end",i,this.keyTimes,this.values,G(),F(this.element));a&&(r.push.apply(r,g(a[0])),n.push.apply(n,g(a[1])))}r.push(this.keyTimes.pop()),n.push(this.values.pop()),this.values=n,this.keyTimes=r,this._keySplines=[ee.step]}break;case"spline":this.keySplines=ne.flatMap(this.getAttribute("keySplines").split(";"),function(e){return e.trim()});case"linear":if(0!==this.keyTimes[0]&&1!==this.keyTimes[this.keyTimes.length-1]){for(var s=[],o=0;o<this.values.length;o++)s.push(o/(this.values.length-1));this._keyTimes=s,this._keySplines=void 0}}}},{key:"convertToValues",value:function(e){""!==this.to&&(this.values=[this.from,this.to],this.keyTimes=e&&2===e.length&&0===this.keyTimes[0]&&this.keyTimes[1]<=1?e:[0,1])}},{key:"setGroupOrder",value:function(e){if(this.group.order=e,this.fillBackwards)for(var t=e.length-1,r=!1;t>=0;t--)if(r){if("backwards"===e[t].fillMode||"both"===e[t].fillMode){this.fillBackwards=!1;break}}else e[t].name===this.group.name&&(r=!0)}},{key:"_setFillMode",value:function(e,t){var r=ne.hasBit(this.fillMode,t);e?r||(this.fillMode|=t):r&&(this.fillMode^=t)}},{key:"begin",set:function(e){if(y(l(t.prototype),"begin",e,this,!0),this.element){var r=this.getAttribute("end");if(""!==r){var n=X(r.split(";").map(function(e){return O(e)}))[0];void 0!==n&&(-1===this.repeatCount||this.duration>0&&n<this.duration*this.repeatCount)&&(this.begin>n?(this.end=n,-1===this.repeatCount&&(this.repeatCount=Math.ceil((this.end-this.begin)/this.duration))):this.duration=-1)}}},get:function(){return v(l(t.prototype),"begin",this)}},{key:"repeatCount",set:function(e){isNaN(e)?this._repeatCount=1:(this._repeatCount=e,-1!==e&&(this.repeatDuration=-1)),this.element&&(this.fillFreeze=-1!==this.repeatCount&&"freeze"===this.getAttribute("fill"),1!==this.repeatCount?this.setAttribute("accumulate","sum"):this.accumulateSum=!1)},get:function(){if(-1===this._repeatCount&&-1===this.repeatDuration)return-1;if(this.duration>0){if(-1!==this._repeatCount&&-1!==this.repeatDuration&&this._repeatCount*this.duration<=this.repeatDuration)return this._repeatCount;if(-1!==this.repeatDuration&&this.duration>0)return this.repeatDuration/this.duration}return this._repeatCount}},{key:"to",set:function(e){y(l(t.prototype),"to",e,this,!0)},get:function(){return this._setterType?this.values[this.values.length-1]||v(l(t.prototype),"to",this):this.setterType?this.values[0]:v(l(t.prototype),"to",this)}},{key:"values",set:function(e){this._values=e,this._keyTimes&&this._keyTimes.length!==e.length&&(this._keyTimes=void 0,this._keySplines=void 0)},get:function(){return void 0===this._values&&(this._values=[]),this._values}},{key:"keyTimes",set:function(e){!e.every(function(e){return e>=0&&e<=1})||void 0!==this._values&&this._values.length!==e.length||(this._keyTimes=e)},get:function(){return void 0===this._keyTimes&&(this._keyTimes=[]),this._keyTimes}},{key:"keySplines",set:function(e){if(e&&e.length){var t=this.keyTimes.length-1;if(e.length>=t&&!e.every(function(e){return""===e||e===ee.linear})){for(var r=[],n=0;n<t;n++){var i=e[n].split(" ").map(function(e){return parseFloat(e)});4===i.length&&!i.some(function(e){return isNaN(e)})&&i[0]>=0&&i[0]<=1&&i[2]>=0&&i[2]<=1?r.push(i.join(" ")):r.push(ee.linear)}this._keySplines=r}}else this._keySplines=void 0},get:function(){return this._keySplines}},{key:"reverse",set:function(e){if(e!==this._reverse&&this.values.length){this.values.reverse();for(var t=[],r=0;r<this.keyTimes.length;r++)t.push(1-this.keyTimes[r]);if(t.reverse(),this.keyTimes=t,this._keySplines){for(var n=[],i=this._keySplines.length-1;i>=0;i--){var a=this._keySplines[i].split(" ").map(function(e){return parseFloat(e)});n.push(4===a.length?"".concat(ie(a[2])," ").concat(ie(a[3])," ").concat(ie(a[0])," ").concat(ie(a[1])):ee.linear)}this._keySplines=n}this._reverse=e}},get:function(){return this._reverse}},{key:"fillBackwards",set:function(e){this._setFillMode(e,2)},get:function(){return ne.hasBit(this.fillMode,2)}},{key:"fillForwards",set:function(e){this._setFillMode(e,4)},get:function(){return ne.hasBit(this.fillMode,4)}},{key:"fillFreeze",set:function(e){this._setFillMode(e,8)},get:function(){return ne.hasBit(this.fillMode,8)}},{key:"fillReplace",get:function(){return this.fillMode<4}},{key:"fromToType",get:function(){return 2===this.keyTimes.length&&0===this.keyTimes[0]&&1===this.keyTimes[1]}},{key:"partialType",get:function(){return this.keyTimes.length>=2&&this.keyTimes[this.keyTimes.length-1]<1}},{key:"setterType",set:function(e){this._setterType=e},get:function(){return this._setterType||void 0!==this.element&&0===this.duration&&this.keyTimes.length>=2&&0===this.keyTimes[0]}},{key:"instanceType",get:function(){return 16392}}],[{key:"toStepFractionList",value:function(e,t,r,n,i){var a,s,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:96,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:16;switch(e){case"fill":case"stroke":var l=re.parseRGBA(i[r]),c=re.parseRGBA(i[r+1]);l&&c&&(a=[l],s=[c]);break;case"points":a=H.convertNumbers(H.toNumberList(i[r])),s=H.convertNumbers(H.toNumberList(i[r+1]));break;case"rotate":case"scale":case"translate":a=i[r].trim().split(/\s+/).map(function(e){return parseFloat(e)}),s=i[r+1].trim().split(/\s+/).map(function(e){return parseFloat(e)});break;default:ne.isNumber(i[r])?a=[parseFloat(i[r])]:ne.isUnit(i[r])&&(a=[parseFloat(ne.convertPX(i[r],o,u))]),ne.isNumber(i[r+1])?s=[parseFloat(i[r+1])]:ne.isUnit(i[r+1])&&(s=[parseFloat(ne.convertPX(i[r+1],o,u))])}if(a&&s&&a.length&&a.length===s.length){switch(t){case"step-start":t="steps(1, start)";break;case"step-end":t="steps(1, end)"}var f=/steps\((\d+)(?:, (start|end))?\)/.exec(t);if(f){for(var h=n[r+1]-n[r],v=parseInt(f[1]),p=100/v,y=[],m=[],g=0;g<v;g++){var d=n[r]+h*(g/v),b=p*(g+(0===g&&"start"===f[2]?1:0))/100,k=[];switch(e){case"fill":case"stroke":var S=a[0],A=s[0],T=re.convertHex(D(S.rgba.r,A.rgba.r,b),D(S.rgba.g,A.rgba.g,b),D(S.rgba.b,A.rgba.b,b)),x=re.convertHex(D(S.rgba.a,A.rgba.a,b));k.push("#".concat(T+("FF"!==x?x:"")));break;case"points":for(var _=0;_<a.length;_++){var w=a[_],R=s[_];k.push("".concat(D(w.x,R.x,b),",").concat(D(w.y,R.y,b)))}break;default:for(var V=0;V<a.length;V++){k.push(""+D(a[V],s[V],b))}}if(!k.length)return;y.push(d),m.push(k.join(" "))}return[y,m]}}}},{key:"toFractionList",value:function(e){var t=0,r=ne.flatMap(e.split(arguments.length>1&&void 0!==arguments[1]?arguments[1]:";"),function(e){var r=parseFloat(e);return!isNaN(r)&&r>=t&&r<=1?(t=r,r):-1});return r.length>1&&0===r[0]&&r.some(function(e){return-1!==e})?r:[]}}]),t}(),se=function(e){function t(e){var r;if(i(this,t),(r=f(this,l(t).call(this,e))).element=e,r.type=0,e){var n=r.getAttribute("type");r.setType(n),r.setCalcMode(n)}return r}return u(t,ae),s(t,[{key:"expandToValues",value:function(){if(this.additiveSum&&-1!==this.repeatCount&&this.keyTimes.length&&this.duration>0){var e=this.duration*this.repeatCount;e:{for(var t,r=[],n=[],i=[],a=0;a<this.repeatCount;a++){a>0&&this.keySplines&&i.push("");for(var s=0;s<this.keyTimes.length;s++){var o=this.values[s].split(" "),u=o.map(function(e){return parseFloat(e)});if(o.length!==u.length)break e;var l=void 0;switch(this.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:1===u.length?l=[u[0],0]:2===u.length&&(l=u);break;case SVGTransform.SVG_TRANSFORM_SCALE:1===u.length?l=[u[0],u[0]]:2===u.length&&(l=u);break;case SVGTransform.SVG_TRANSFORM_ROTATE:1===u.length?l=[u[0],0,0]:3===u.length&&(l=u);break;case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:1===u.length&&(l=u)}if(!l)break e;var c=(this.keyTimes[s]+a)*this.duration;if(t)for(var f=0;f<l.length;f++)l[f]+=t[f];a<this.repeatCount-1&&s===this.keyTimes.length-1&&(this.accumulateSum&&(t=l),c--),r.push(c/e),n.push(l.join(" ")),this.keySplines&&s<this.keyTimes.length-1&&i.push(this.keySplines[s])}}this.keyTimes=r,this.values=n,this.keySplines=i.length?i:void 0,this.duration=e,this.repeatCount=1,this.accumulateSum=!1}}}},{key:"setType",value:function(e){var r;switch(e){case"translate":this.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,r=t.toTranslateList(this.values);break;case"scale":this.type=SVGTransform.SVG_TRANSFORM_SCALE,r=t.toScaleList(this.values);break;case"rotate":this.type=SVGTransform.SVG_TRANSFORM_ROTATE,r=t.toRotateList(this.values);break;case"skewX":this.type=SVGTransform.SVG_TRANSFORM_SKEWX,r=t.toSkewList(this.values);break;case"skewY":this.type=SVGTransform.SVG_TRANSFORM_SKEWY,r=t.toSkewList(this.values)}this.values=r?r.map(function(e){return e.join(" ")}):[]}},{key:"instanceType",get:function(){return 81928}}],[{key:"toRotateList",value:function(e){var t=e.map(function(e){if(""===e)return[0,0,0];var t=H.toNumberList(e);return 1===t.length?[t[0],0,0]:3===t.length?t:[]});return t.some(function(e){return 0===e.length})?void 0:t}},{key:"toScaleList",value:function(e){var t=e.map(function(e){if(""===e)return[1,1];var t=H.toNumberList(e);return 1===t.length?[t[0],t[0]]:2===t.length?t:[]});return t.some(function(e){return 0===e.length})?void 0:t}},{key:"toTranslateList",value:function(e){var t=e.map(function(e){if(""===e)return[0,0];var t=H.toNumberList(e);return 1===t.length?[t[0],0]:2===t.length?t:[]});return t.some(function(e){return 0===e.length})?void 0:t}},{key:"toSkewList",value:function(e){var t=e.map(function(e){if(""===e)return[0];var t=H.toNumberList(e);return 1===t.length?[t[0]]:[]});return t.some(function(e){return 0===e.length})?void 0:t}}]),t}(),oe=squared.lib.util;function ue(e,t,r){var n,i,a,s=0,o=e.entries(),u=Array.isArray(o),l=0;for(o=u?o:o[Symbol.iterator]();;){var c;if(u){if(l>=o.length)break;c=o[l++]}else{if((l=o.next()).done)break;c=l.value}var f=m(c,2),h=f[0],v=f[1];if(r===h){i={ordinal:h,value:v};break}if(r>s&&r<h){i={ordinal:s,value:n},a={ordinal:h,value:v};break}s=h,n=v}i&&a?be(t,r,ge(r,i.ordinal,i.value,a.ordinal,a.value)):i&&be(t,r,i.value)}function le(e){for(var t=e[e.length-1][0],r=new Set,n=0;n<e.length;n++){var i=e[n][0]/t;if(i>0)for(var a=7;;a++){var s=parseFloat((""+i).substring(0,a));if(!r.has(s)){i=s;break}}e[n][0]=i,r.add(i)}return e}function ce(e,t,r){var n,i=[],a=t.element.tagName;switch(a){case"line":n=["x1","y1","x2","y2"];break;case"rect":n=["width","height","x","y"];break;case"polyline":case"polygon":n=["points"];break;case"circle":n=["cx","cy","r"];break;case"ellipse":n=["cx","cy","rx","ry"];break;default:return}for(var s=M.origin(t.element),o=0;o<e.length;o++){for(var u=e[o][0],l=e[o][1],c=[],f=Array.isArray(v=n),h=0,v=f?v:v[Symbol.iterator]();;){var p;if(f){if(h>=v.length)break;p=v[h++]}else{if((h=v.next()).done)break;p=h.value}var y=p,m=l.get(y);if(void 0===m&&(m=t.getBaseValue(y)),void 0===m)return;c.push(m)}var g=void 0;switch(a){case"line":g=fe(c);break;case"rect":g=he(c);break;case"polygon":case"polyline":g=c[0];break;case"circle":case"ellipse":g=ve(c)}if(g){var d=void 0;switch(t.transformed&&t.transformed.length&&(g=H.applyTransforms(t.transformed,g,s)),r&&r.refitPoints(g),a){case"line":case"polyline":d=H.drawPolyline(g,!0);break;case"rect":case"polygon":d=H.drawPolygon(g,!0);break;case"circle":case"ellipse":var b=g[0];d=H.drawEllipse(b.x,b.y,b.rx,b.ry,!0)}void 0!==d&&i.push({ordinal:u,value:d})}}return i}function fe(e){return[{x:e[0],y:e[1]},{x:e[2],y:e[4]}]}function he(e){var t=e[0],r=e[1],n=e[2],i=e[3];return[{x:n,y:i},{x:n+t,y:i},{x:n+t,y:i+r},{x:n,y:i+r}]}function ve(e){return[{x:e[0],y:e[1],rx:e[2],ry:e[e.length-1]}]}function pe(e,t,r){for(var n=new Map,i=Array.isArray(s=t),a=0,s=i?s:s[Symbol.iterator]();;){var o;if(i){if(a>=s.length)break;o=s[a++]}else{if((a=s.next()).done)break;o=a.value}var u=o,l=new Map;for(var c in r||e){var f=void 0;e[c]?void 0===(f=e[c].get(u))&&(f=we(e[c],u)):r&&(f=r[c].value),void 0!==f&&l.set(c,f)}n.set(u,l)}return n}function ye(e,t,r,n,i){return Math.round(e+(r[i]+n)*t)}function me(e,t,r,n){var i=e.alternate&&r%2!=0?e.values.slice(0).reverse():e.values;if("number"==typeof t){var a=parseFloat(i[n]);if(e.additiveSum){a+=t,e.accumulateSum||(r=0);for(var s=0;s<r;s++)for(var o=0;o<i.length;o++)a+=parseFloat(i[o])}return a}if("string"==typeof t){if(e.additiveSum){var u=t.split(/\s+/).map(function(e){return parseFloat(e)}),l=i.map(function(e){return e.trim().split(/\s+/).map(function(e){return parseFloat(e)})});if(l.every(function(e){return u.length===e.length})){var c=l[n];e.accumulateSum||(r=0);for(var f=0;f<u.length;f++)c[f]+=u[f];for(var h=0;h<r;h++)for(var v=0;v<l.length;v++)for(var p=0;p<l[v].length;p++)c[p]+=l[v][p];return c.join(" ")}}return i[n]}return Array.isArray(t)?H.toPointList(i[n]):t}function ge(e,t,r,n,i){if("number"==typeof r&&"number"==typeof i)return D(r,i,(e-t)/(n-t));if("string"==typeof r&&"string"==typeof i){var a=r.split(" ").map(function(e){return parseFloat(e)}),s=i.split(" ").map(function(e){return parseFloat(e)});if(a.length===s.length){for(var o=[],u=0;u<a.length;u++)o.push(ge(e,t,a[u],n,s[u]));return o.join(" ")}}else if(Array.isArray(r)&&Array.isArray(i)){for(var l=[],c=0;c<Math.min(r.length,i.length);c++)l.push({x:ge(e,t,r[c].x,n,i[c].x),y:ge(e,t,r[c].y,n,i[c].y)});return l}return r}function de(e,t,r,n,i,a,s,o,u){var l;i<0?(l=s-i,i=0):l=s,l=Re(l);for(var c,f=Math.max(0,Math.min((l-(i+r.duration*a))/r.duration,1)),h=r.keyTimes,v=-1,p=-1,y=0;y<h.length;y++){if(-1!==v&&f<=h[y]){p=y;break}f>=h[y]&&(v=y)}return ke(t,r,s=be(e,s,c=-1!==v&&-1!==p?ge(f,h[v],me(r,n,a,v),h[p],me(r,n,a,p)):me(r,n,a,p=-1!==v?v+1:h.length-1)),p,o,u),[s,c]}function be(e,t,r){var n=e.get(t);if(void 0===n&&(n=e.get(Re(t))),n!==r){if("number"==typeof r&&Math.round(n)===Math.round(r))return t;for(;t>0&&e.has(t);)t++;e.set(t,r)}return t}function ke(e,t,r,n,i,a){if(!Se(H.asAnimateTransform(t),i)){if(0===n)return;n--}var s=t.keySplines&&t.keySplines[n];s&&e.set(r,s),a&&function(e,t,r,n){H.asAnimateTransform(t)&&t.transformOrigin&&t.transformOrigin[n]&&e.set(r,t.transformOrigin[n])}(a,t,r,n)}function Se(e,t){return oe.hasBit(t,e?32:4)}function Ae(e){return!e.paused&&(e.element&&-1!==e.duration||e.keyTimes&&e.keyTimes.length>1&&e.duration>0)}function Te(e){return-1!==e.repeatCount?Math.min(e.begin+e.duration*e.repeatCount,e.end||1/0):1/0}function xe(e){return Math.min(e.begin+e.duration*(-1!==e.repeatCount?e.repeatCount:1),e.end||1/0)}function _e(e){return"infinite"===e.iterationCount?1/0:e.delay+e.duration*parseInt(e.iterationCount)}function we(e,t){var r,n=0,i=e.entries(),a=Array.isArray(i),s=0;for(i=a?i:i[Symbol.iterator]();;){var o;if(a){if(s>=i.length)break;o=i[s++]}else{if((s=i.next()).done)break;o=s.value}var u=m(o,2),l=u[0],c=u[1];if(t===l)return c;if(t>n&&t<l)return r;n=l,r=c}return r}function Re(e){return(e+1)%10==0?e++:(e-1)%10==0&&e--,e}var Ve=function(e){return function(r){function n(){return i(this,n),f(this,l(n).apply(this,arguments))}return u(n,e),s(n,[{key:"getAnimateShape",value:function(e,t){void 0===t&&(t=this.animation);for(var r=[],n=Array.isArray(a=t),i=0,a=n?a:a[Symbol.iterator]();;){var s;if(n){if(i>=a.length)break;s=a[i++]}else{if((i=a.next()).done)break;s=i.value}var o=s;if(Ae(o))switch(o.attributeName){case"r":case"cx":case"cy":if(N.circle(e)){r.push(o);break}case"rx":case"ry":N.ellipse(e)&&r.push(o);break;case"x1":case"x2":case"y1":case"y2":N.line(e)&&r.push(o);break;case"points":(N.polyline(e)||N.polygon(e))&&r.push(o);break;case"x":case"y":case"width":case"height":N.rect(e)&&r.push(o)}}return r}},{key:"getAnimateViewRect",value:function(e){void 0===e&&(e=this.animation);for(var t=[],r=Array.isArray(i=e),n=0,i=r?i:i[Symbol.iterator]();;){var a;if(r){if(n>=i.length)break;a=i[n++]}else{if((n=i.next()).done)break;a=n.value}var s=a;if(Ae(s))switch(s.attributeName){case"x":case"y":t.push(s)}}return t}},{key:"getAnimateTransform",value:function(e){return void 0===e&&(e=this.animation),e.filter(function(e){return H.asAnimateTransform(e)&&e.duration>0})}},{key:"mergeAnimations",value:function(e,r){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0;[e,r].forEach(function(e,r){var s=1===r;if(!(0===e.length||0===r&&oe.hasBit(i,8)||s&&oe.hasBit(i,64))){for(var o={},u=[],l=[],c=[],f=0;f<e.length;f++)if(e[f].setterType)l.push(e[f]);else for(var h=e[f],v=Te(h),p=0;p<e.length;p++){var y=e[p];if(f!==p&&h.attributeName===y.attributeName&&h.group.id<y.group.id)if(y.setterType){if(h.begin===y.begin){c[f]=h;break}}else{var d=Te(y);if(h.begin===y.begin&&(!y.fillReplace||v<=d||-1===y.repeatCount)||y.fillBackwards&&h.begin<=y.begin&&(y.fillForwards||h.fillReplace&&v<=y.begin)||h.element&&void 0===y.element&&(h.begin>=y.begin&&v<=d||y.fillForwards)){c[f]=h;break}}}for(var b=[],k=0;k<e.length;k++){var S=c[k];S?void 0===S.element&&S.fillForwards?(S.setterType=!0,l.push(S)):b.push(e[k]):u.push(e[k])}n._removeAnimations(b),(0===r&&u.length>0||s&&(u.length>1||1===u.length&&(u[0].alternate||void 0!==u[0].end)))&&function(){for(var e=function(e,t,r){e&&(z.set(t,e),void 0!==r&&z.set(r,e))},r=new Set(u.map(function(e){return e.group.name})),c=0;c<u.length;c++){var f=u[c];f.group.order&&oe.spliceArray(f.group.order,function(e){return!r.has(e.name)})}for(var h={},v=0,p=0;p<u.length;p++){var y=u[p],d=y.attributeName;void 0===h[d]&&(h[d]=new Map);var b=h[d].get(y.begin)||[];b.push(y),h[d].set(y.begin,b)}for(var k in h){var S=new Map,A=X(Array.from(h[k].keys())),T=Array.isArray(A),x=0;for(A=T?A:A[Symbol.iterator]();;){var _;if(T){if(x>=A.length)break;_=A[x++]}else{if((x=A.next()).done)break;_=x.value}var w=_,R=h[k].get(w);if(R){var V=oe.maxArray(R.map(function(e){return xe(e)}));v=Math.max(v,V),R.reverse(),S.set(w,R)}}h[k]=S}var E,N,G,F={},O={},P=new Map,C=new Map,B=new Map,L=new Map,I=new Set,z=new Map,D={},q={},W=function(r){F[r]=new Map,s||(D[r]=n._getBaseValue(r,a));var c=[],f=[],p=u.filter(function(e){return e.attributeName===r}),y=h[r].entries(),d=Array.isArray(y),b=0;for(y=d?y:y[Symbol.iterator]();;){var k;if(d){if(b>=y.length)break;k=y[b++]}else{if((b=y.next()).done)break;k=b.value}var S=m(k,2),A=S[1];c.push(S[0]),f.push(A)}var T=[],x=l.filter(function(e){return e.attributeName===r}),_=p.filter(function(e){return e.fillBackwards})[0],w=-1,R=0,V=void 0,E=void 0,N=void 0;if(_){V=1===_.keyTimes[_.keyTimes.length-1]?me(_,s?"":D[r],0,0):s?M.valueAsInitial(_.type):D[r],w=be(F[r],0,V),s&&(e(_.type,0),E=_);for(var G=!0,C=Array.isArray(X=p),L=0,X=C?X:X[Symbol.iterator]();;){var z;if(C){if(L>=X.length)break;z=X[L++]}else{if((L=X.next()).done)break;z=L.value}if(z.group.id>_.group.id&&z.begin<=_.begin){G=!1;break}}for(var j=0;j<c.length;j++)for(var W=0;W<f[j].length;W++){var Y=f[j][W];G&&f[j][W]===_?0===j&&0===W||(f[j].splice(W,1),0===f[j].length&&(c.splice(j,1),f.splice(j,1)),c.unshift(_.begin),f.unshift([_])):Y.element&&Y.begin<=_.begin&&(Y.addState(2),$(Y))}G||(_=void 0)}function U(t,n,i){E&&!t&&(void 0===i&&(i=M.valueAsInitial(E.type)),n!==(w=be(F[r],n,i))&&e(E.type,w)),E=void 0}function K(e,t){var r=[];oe.spliceArray(T,function(e){return Te(e)<=R},function(n){if(n.addState(16),!n.fillReplace&&(r.push.apply(r,g(T.filter(function(e){return e.group.id<n.group.id}))),void 0!==e&&void 0!==t))for(var i=e;i<c.length;i++){i!==e&&(t=-1);for(var a=t+1;a<f[i].length;a++){var s=f[i][a];s.group.id<n.group.id&&(s.fillReplace||J(s),s.addState(16))}}}),r.length&&oe.spliceArray(T,function(e){return r.includes(e)},function(e){return e.addState(16)})}function Z(t,n){if(I.add(t),t.addState(16),t.fillForwards){if(ee(t.type,V),q[r]=t,T.length=0,t.group.order)for(var i=Array.isArray(o=t.group.order),a=0,o=i?o:o[Symbol.iterator]();;){var u;if(i){if(a>=o.length)break;u=o[a++]}else{if((a=o.next()).done)break;u=a.value}if(u.name===t.group.name)return!0;if(_e(u)>=Te(t))return!1}}else{if(t.fillFreeze&&(q[r]=t,ee(t.type,V),oe.spliceArray(T,function(e){return void 0!==e.element&&-1!==e.repeatCount})),void 0!==n){var l=w,c=m(re(R,n),2),f=c[0],h=c[1];t.fillReplace&&void 0!==f&&n>R&&0===T.length&&(l=be(F[r],l,f),s&&e(t.type,l),h||(V=f,w=l))}K()}return!1}function $(e){e.addState(4),T.push(e)}function Q(){T.sort(function(e,t){return e.group.order&&t.group.order?e.group.id>t.group.id?-1:1:e.element&&void 0===t.element?-1:void 0===e.element&&t.element?1:e.begin===t.begin?e.group.id>t.group.id?-1:1:e.begin<t.begin?1:-1})}function J(e){e&&x.push(e),x.sort(function(e,t){return e.begin===t.begin?e.group.id<t.group.id?-1:1:e.begin<t.begin?-1:1})}function ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s?void 0===D[r]&&(D[r]=t):"string"==typeof t&&(oe.isNumber(t)||0===H.toPointList(t).length&&(t=""));""!==t&&(o[r]={ordinal:e||0,value:t},n&&(V=t))}function te(e,t,n){return void 0===t&&(t=e.begin),void 0===n&&(n=e.to),q[r]=e,be(F[r],t,n)}function re(e,t){var n=w,i=!1,a=o[r]&&o[r].value;return oe.spliceArray(x,function(e){return e.begin>=n},function(r){r.begin===n?a=r.to:i=!0,ee(r.type,r.to,0===T.length),r.begin>e&&r.begin<t&&(w=te(r),R=r.begin)}),[a,i]}J(),oe.spliceArray(x,function(e){return e.begin<=c[0]},function(e){ee(e.type,e.to,!0),e.begin<c[0]&&void 0===_&&te(e)}),s||(void 0===o[r]&&ee(0,D[r]),void 0===V&&(V=o[r].value));e:{for(var ne=function(n){for(var a=c[n],u=function(t){var u=f[n][t];if(u.hasState(16,64)||u.hasState(2))return l=t,"continue";var h=q[r];if(h&&u.group.id<h.group.id)return u.addState(16),l=t,"continue";var p=-1===u.repeatCount,y=u.duration,g=u.repeatCount,d=void 0;if(p)d=a+y;else if((d=Math.min(u.end||1/0,Math.round(a+y*g)))<=w)return u.fillReplace?u.addState(64):$(u),l=t,"continue";var b=void 0,k=void 0;if(p?(b=Math.ceil((v-a)/y),k=0):(b=Math.ceil(g),k=g-Math.floor(g)),R<a&&re(R,a),-1!==w&&w<a&&(w=be(F[r],a-1,V),R=a,u.fillReplace&&(q[r]=void 0)),u.group.order){N=void 0;for(var S=!0,A=Array.isArray(C=u.group.order),G=0,C=A?C:C[Symbol.iterator]();;){var L;if(A){if(G>=C.length)break;L=C[G++]}else{if((G=C.next()).done)break;L=G.value}var I=L;if(I.name===u.group.name){S=!1;break}if(R<=I.delay)break}if(S)t:for(var X=n+1;X<c.length;X++)for(var z=0;z<f[X].length;z++){var D=f[X][z];if(D.group.order){N=D.begin;break t}Te(D)<=d?(D.fillFreeze&&J(D),D.addState(16)):D.begin<d&&$(D)}}else N=void 0!==c[n+1]?oe.minArray(c.slice(n+1)):void 0;var j=R,W=w+1,Y=Math.min(N||1/0,u.end||1/0,-1!==u.repeatDuration&&u.repeatDuration<y?u.repeatDuration:1/0),H=void 0;if(u.element&&(H=x.find(function(e){return e.begin>=R&&e.begin<=Math.min(N||1/0,d,Y)}))){switch(H.begin){case R:ee(H.type,H.to,!0),V=H.to,H.group.id>u.group.id&&0===u.keyTimes[0]&&(s&&E&&U(u.additiveSum,Math.max(a-1,w)),w=te(H,Math.max(H.begin,w),V),u.addState(64));break;case N:H.addState(32);break;default:Y=H.begin,H.addState(32)}oe.spliceArray(x,function(e){return e!==H})}var ne=!1,ie=void 0;if(Y>w&&!u.hasState(64)){s&&(E&&(U(u.additiveSum,Math.max(a-1,w)),W=w+1),ee(u.type,M.valueAsInitial(u.type),!0));var ae=c[n]===1/0||(-1!==w||u===_)&&!(0===n&&0===t);ne=!0;t:for(var se=function(e){for(var t=0;t<u.keyTimes.length;t++){var n=u.keyTimes[t],s=void 0,l=me(u,V,e,t);if(e===b-1&&k>0)if(k>n){for(var c=t+1;c<u.keyTimes.length;c++)if(k<=u.keyTimes[c]){R=s=d,l=ge(k,n,l,u.keyTimes[c],me(u,V,e,c)),k=-1;break}}else k===n&&(k=-1);if(void 0===s){if((s=ye(a,y,u.keyTimes,e,t))<0||s<w)continue;if(s===Y)ne=e===b-1&&t===u.keyTimes.length-1,R=s;else{var f=function(t){var n=m(de(F[r],P,u,V,a,e,t,i,B),2);w=n[0],ie=n[1]};if(a<0&&-1===w)s>0&&(R=0,f(0));else{if(s>Y)return ae&&w+1<Y&&f(w),R=Y,f(Y+(Y!==N||F[r].has(Y-1)?0:-1)),ne=!1,"break|threadTimeExceeded";if(ae)u===_&&(R=j),a>=w?(s=Math.max(a,w+1),R=a):s===w?(R=s,s=w+1):(f(w),R=Math.max(s,w)),ae=!1;else{if(R=s,e>0&&0===t&&u.accumulateSum){ke(P,u,s,t,i,B),w=s;continue}s=Math.max(s,w+1)}}}}if(s>w&&(t===u.keyTimes.length-1&&(e<b-1||u.fillReplace&&l!==o[r].value)&&!u.accumulateSum&&s--,w=be(F[r],s,l),ke(P,u,w,t,i,B),ie=l),!ne||-1===k)return"break|threadTimeExceeded"}},ue=Math.floor(Math.max(0,Math.max(0,w)-a)/y);ue<b;ue++){if("break|threadTimeExceeded"===se(ue))break t}K(n,t)}if(void 0!==ie&&(V=ie,s&&(e(u.type,W,w),E=u)),H&&(H.hasState(32)?(w=te(H,H.begin,ie=H.to),R=w,ee(H.type,ie)):u.hasState(64)&&e(H.type,w),oe.spliceArray(T,function(e){return void 0===e.element})),u.fillReplace||oe.spliceArray(x,function(e){return e.begin>=j&&e.begin<=R},function(e){return ee(e.type,e.to)}),p){if(ne)return O[r]=u,l=t,{v:"break|attributeEnd"};T.length=0,T.push(u)}else if(ne){if(Z(u,N=N||1/0))return l=t,{v:"break|attributeEnd"};for(var le=n;le<c.length;le++)if(c[le]<R){for(var ce=0;ce<f[le].length;ce++){var fe=f[le][ce];Te(fe)>R&&!fe.hasState(4,16,64)&&fe!==_&&$(fe)}c[le]=1/0,f[le].length=0}if(T.length&&R<N){Q();var he=T.filter(function(e){return e.begin<=R}).shift();he&&(he.removeState(4,2),he.addState(8),a=he.begin,f[n]=[he],t=-1)}}else $(u);l=t},l=0;l<f[n].length;l++){var h=u(l);switch(h){case"continue":continue;default:if("object"===t(h))return h.v}}},ie=0;ie<c.length;ie++){if("break|attributeEnd"===ne(ie))break e}if(T.length){Q();for(var ae=function(t){var n=T[t],a=n.begin,o=n.duration,u=w-a,l=1/0;function c(){var t=w+1,c=Math.floor(u/o),f=!1;q[r]=void 0;do{for(var h=0;h<n.keyTimes.length;h++){var v=ye(a,o,n.keyTimes,c,h);if(!f&&v>=w){var p=m(de(F[r],P,n,V,a,c,w,i,B),2);w=p[0],V=p[1],f=!0}if(f){if(v>=l){if(l>w){var y=m(de(F[r],P,n,V,a,c,l,i,B),2);w=y[0],V=y[1],R=l}return}v>w&&(R=v,h===n.keyTimes.length-1&&v<l&&v--,V=me(n,V,c,h),w=be(F[r],v,V),ke(P,n,w,h,i,B))}}}while(w<l&&++c);s&&e(n.type,t,w)}return-1===n.repeatCount?(u>0&&u%n.duration!=0&&(l=a+n.duration*Math.ceil(u/o),c()),O[r]=n,"break|attributeEnd"):(l=Math.min(a+n.duration*n.repeatCount,n.end||1/0))>w&&(c(),Z(n))?"break|attributeEnd":void 0},se=0;se<T.length;se++){if("break|attributeEnd"===ae(se))break e}}}};for(var Y in h)W(Y);var U=[];for(var K in F)U.push.apply(U,g(F[K].keys()));var Z=oe.maxArray(U);if(Object.keys(O).length){var $=[],Q=[];for(var J in O)$.push(O[J].begin),Q.push(O[J].duration);0===I.size&&$[0]===U[0]&&1===new Set($).size&&1===new Set(Q).size?N=$[0]<=0?0:$[0]:Q.length>1?Z=j(Q,$):(Z-$[0])%Q[0]!=0&&(Z=Q[0]*Math.ceil(Z/Q[0]))}if(void 0===N)for(var ee in F){var te=Array.from(F[ee].keys()).pop();if(O[ee]){if(te<Z){var re=O[ee],ne=re.begin,ie=te+1,fe=Array.from(F[ee].values()).pop(),he=Math.floor((te-ne)/re.duration);do{for(var ve=!1,Ae=0;Ae<re.keyTimes.length;Ae++){var we=ye(ne,re.duration,re.keyTimes,he,Ae);if(!ve&&we>=te){var Re=m(de(F[ee],P,re,fe,ne,he,te,i,B),2);fe=Re[1],U.push(te=Re[0]),ve=!0}ve&&we>te&&(Ae===re.keyTimes.length-1&&we<Z&&we--,fe=me(re,fe,he,Ae),te=be(F[ee],we,fe),ke(P,re,we,Ae,i,B),U.push(te))}}while(te<Z&&++he);s&&e(re.type,ie,te)}}else if(void 0===q[ee]){var Ve=void 0,Ee=void 0;o[ee]?(Ve=o[ee].ordinal,Ee=o[ee].value):s?(Ve=Array.from(z.values()).pop(),Ee=M.valueAsInitial(Ve)):Ee=n._getBaseValue(ee,a),void 0!==Ee&&JSON.stringify(F[ee].get(te))!==JSON.stringify(Ee)&&(te=be(F[ee],te,Ee),e(Ve,te),U.push(te))}}var Me=X(Array.from(new Set(U)));for(var Ne in F)if(0===Me[0]&&!F[Ne].has(0)&&void 0!==D[Ne]){var Ge=F[Ne].keys().next().value-1;F[Ne].set(0,D[Ne]),F[Ne].set(Ge,D[Ne]),Me.includes(Ge)||(Me.push(Ge),X(Me))}var Fe={};for(var Oe in F){for(var Pe=new Map,Ce=oe.maxArray(Array.from(F[Oe].keys())),Be=0;Be<Me.length;Be++){var Le=Me[Be];if(Le<=Ce){var Ie=F[Oe].get(Le);void 0===Ie?ue(F[Oe],Pe,Le):Pe.set(Le,Ie)}}Fe[Oe]=Pe}if(E=pe(Fe,Me),void 0===N&&Object.keys(O).length){var Xe={},ze=[],De=[];for(var je in O)ze.push(O[je]);for(var qe=j(ze.map(function(e){return e.duration})),We=0;We<ze.length;We++){var Ye=ze[We],Ue=Ye.attributeName;Xe[Ue]=new Map;var He=Array.from(F[Ue].values()).pop(),Ke=0,Ze=0;do{for(var $e=0;$e<Ye.keyTimes.length;$e++){var Qe=ye(0,Ye.duration,Ye.keyTimes,Ze,$e);$e===Ye.keyTimes.length-1&&Qe<qe&&Qe--,He=me(Ye,He,Ze,$e),Ke=be(Xe[Ue],Qe,He),ke(C,Ye,Ke,$e,i,L),De.push(Ke)}}while(Ke<qe&&++Ze)}if(ze.every(function(e){return e.alternate})){var Je=-1;for(var et in O)for(var tt=Array.from(Xe[et].keys()),rt=Array.from(Xe[et].values()).reverse(),nt=0;nt<tt.length;nt++)if(0!==tt[nt]){Je=qe+tt[nt];var it=C.get(tt[nt]);it&&C.set(Je,it),Je=be(Xe[et],Je,rt[nt]),De.push(Je)}}for(var at in De=X(Array.from(new Set(De))),Xe)for(var st=Array.isArray(ut=De),ot=0,ut=st?ut:ut[Symbol.iterator]();;){var lt;if(st){if(ot>=ut.length)break;lt=ut[ot++]}else{if((ot=ut.next()).done)break;lt=ot.value}var ct=lt;Xe[at].has(ct)||ue(Xe[at],Xe[at],ct)}G=pe(Xe,De,o)}if(E||G){n._removeAnimations(u);var ft=Array.from(z.entries()),ht=Array.from(u.map(function(e){return H.asAnimateTransform(e)?M.typeAsName(e.type):e.attributeName})).join("-");[E,G].forEach(function(e){if(e){var t=e===E,r=t?P:C,o=t?B:L;if(Se(s,i)){var u=[];if(s){var l=[],c=Array.from(e.entries());if(t)for(var f=ft[0][1],h=0,v=0,p=0;h<ft.length;h++){var y=h<ft.length-1?ft[h+1][1]:-1;if(f!==y){for(var g=new Map,d=p;d<c.length;d++){var b=c[d][0];if(b>=ft[v][0]&&b<=ft[h][0])g.set(b,new Map([[f,c[d][1].values().next().value]])),p=d;else if(b>ft[h][0])break}l.push(g),f=y,v=h+1}}else{if(!O.transform)return;for(var k=new Map,S=0;S<c.length;S++)k.set(c[S][0],new Map([[O.transform.type,c[S][1].values().next().value]]));l.push(k)}for(var A=0,T=0;T<l.length;T++){var x=Array.from(l[T].entries()),_=x[0][0];1===x.length&&x.push(T<l.length-1?[l[T+1].keys().next().value,x[0][1]]:[_+1,x[0][1]]);var w=x[x.length-1][0],R=w-_,V=new se;V.attributeName="transform",V.type=x[0][1].keys().next().value,V.transformOrigin=[];for(var M=0;M<x.length;M++){var G=x[M];if(u.push(r.get(G[0])||""),V.type!==SVGTransform.SVG_TRANSFORM_ROTATE){var F=o.get(G[0]);F&&(V.transformOrigin[M]=F)}G[0]-=_}var I=le(x),X=Array.isArray(I),z=0;for(I=X?I:I[Symbol.iterator]();;){var D;if(X){if(z>=I.length)break;D=I[z++]}else{if((z=I.next()).done)break;D=z.value}var j=m(D,2),q=j[1];V.keyTimes.push(j[0]),V.values.push(q.values().next().value)}(_-=A)>1?V.begin=_:1===_&&(R+1)%10==0&&R++,V.duration=R,V.keySplines=u,V.synchronized={ordinal:T,value:""},A=w,n._insertAnimate(V,t)}}else{for(var W,Y=Array.from(e.entries()),U=N||0,H=0;H<Y.length;H++){var K=Y[H];u.push(r.get(K[0])||""),K[0]-=U}if(a){var Z=ce(le(Y),a,n.parent);if(!Z)return;(W=new ae).attributeName="d";for(var $=Array.isArray(J=Z),Q=0,J=$?J:J[Symbol.iterator]();;){var ee;if($){if(Q>=J.length)break;ee=J[Q++]}else{if((Q=J.next()).done)break;ee=Q.value}var te=ee;W.keyTimes.push(te.ordinal),W.values.push(""+te.value)}}else{var re=new se;re.attributeName="transform",re.type=SVGTransform.SVG_TRANSFORM_TRANSLATE;var ne=e.entries(),ie=Array.isArray(ne),ue=0;for(ne=ie?ne:ne[Symbol.iterator]();;){var fe;if(ie){if(ue>=ne.length)break;fe=ne[ue++]}else{if((ue=ne.next()).done)break;fe=ue.value}var he=m(fe,2),ve=he[0],pe=(q=he[1]).get("x")||0,ye=q.get("y")||0;re.keyTimes.push(ve),re.values.push(n.parent?"".concat(n.parent.refitX(pe)," ").concat(n.parent.refitX(ye)):"".concat(pe," ").concat(ye))}W=re}W.begin=U,W.keySplines=u,W.duration=Y[Y.length-1][0],n._insertAnimate(W,t)}}else if(function(e,t){return oe.hasBit(t,e?16:2)}(s,i))for(var me=Array.from(e.entries()),ge=0;ge<me.length-1;ge++){var de=m(me[ge],2),be=de[0],ke=de[1],Ae=m(me[ge+1],2),Te=Ae[0],xe=Ae[1],_e=void 0,we=ht;if(s){var Re=new se;if(Re.attributeName="transform",t)for(var Ve=0;Ve<ft.length-1;Ve++){var Ee=ft[Ve],Me=ft[Ve+1];if(Ee[1]===Me[1]&&be>=Ee[0]&&Te<=Me[0]){Re.type=Ee[1];break}if(Te-be==1&&Te===Me[0]){Re.type=Me[1];break}}else O.transform&&(Re.type=O.transform.type);if(0===Re.type)continue;Re.values=[ke.values().next().value,xe.values().next().value];var Ne=o.get(Te);Ne&&(Re.transformOrigin=[Ne]),_e=Re}else if(a){var Ge=ce([[be,ke],[Te,xe]],a,n.parent);if(!Ge)continue;(_e=new ae).attributeName="d",_e.values=Ge.map(function(e){return""+e.value})}else{var Fe=new se;Fe.attributeName="transform",Fe.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,Fe.values=[ke,xe].map(function(e){var t=e.get("x")||0,r=e.get("y")||0;return n.parent?"".concat(n.parent.refitX(t)," ").concat(n.parent.refitX(r)):"".concat(t," ").concat(r)}),we+=ge,_e=Fe}t&&(_e.begin=0===ge?be:0),_e.duration=Te-be,_e.keyTimes=[0,1],_e.synchronized={ordinal:ge,value:we};var Oe=r.get(Te);Oe&&(_e.keySplines=[Oe]),n._insertAnimate(_e,t)}}})}}()}})}},{key:"_removeAnimations",value:function(e){e.length&&oe.retainArray(this.animation,function(t){return!e.includes(t)})}},{key:"_insertAnimate",value:function(e,t){t||(e.repeatCount=-1),e.from=e.values[0],e.to=e.values[e.values.length-1],this.animation.push(e)}},{key:"_getBaseValue",value:function(e,t){var r;try{r=(t||this).getBaseValue(e)}catch(e){}return null!=r?r:"points"===e?[{x:0,y:0}]:0}}]),n}()},Ee=squared.lib.util,Me=function(e){function t(e){var r;if(i(this,t),(r=f(this,l(t).call(this,e))).element=e,r.path="",r.mpath=null,r.rotate=0,r.rotateAuto=!1,r.rotateAutoReverse=!1,e){r.setAttribute("path");var n=r.getAttribute("rotate");switch(n){case"auto":r.rotateAuto=!0;break;case"auto-reverse":r.rotateAutoReverse=!0;break;default:r.rotate=Ee.convertInt(n)}if(r.keyTimes.length){var a=r.getAttribute("keyPoints");if(""!==a){var s=ae.toFractionList(a);s.length===r.keyTimes.length&&(r.keyPoints=s)}}for(var o=0;o<e.children.length;o++){var u=e.children[o];if("mpath"===u.tagName){var c=L(u);if(c&&(N.shape(c)||N.use(c))){r.mpath=c;break}}}}return r}return u(t,ae),s(t,[{key:"instanceType",get:function(){return 49160}}]),t}(),Ne=squared.lib.dom,Ge=squared.lib.util,Fe=Ne.getKeyframeRules(),Oe={"animation-delay":"0s","animation-duration":"0s","animation-iteration-count":"1","animation-play-state":"running","animation-direction":"normal","animation-fill-mode":"none","animation-timing-function":"ease"},Pe=RegExp("cubic-bezier\\(".concat(R.ZERO_ONE,", ").concat(R.DECIMAL,", ").concat(R.ZERO_ONE,", ").concat(R.DECIMAL,"\\)"));function Ce(e,t){var r=Ne.cssAttribute(e,t);if("animation-timing-function"===t){for(var n=[];""!==r;){var i=r.indexOf(",");if(-1===i){n.push(r);break}var a=r.substring(0,i);if(a.startsWith("steps")||a.startsWith("cubic-bezier")){var s=r.indexOf(")",i)+1;a+=r.substring(i,s),i=s}n.push(a),r=r.substring(i+1).trim()}return n}return Ge.flatMap(r.split(/,/),function(e){return e.trim()})}function Be(e){return e.sort(function(e,t){return e.ordinal>=t.ordinal?1:-1})}var Le=function(e){return function(t){function r(){var e;return i(this,r),(e=f(this,l(r).apply(this,arguments))).transformed=null,e}return u(r,e),s(r,[{key:"getTransforms",value:function(e){var t=e||this.element;return M.parse(t)||H.convertTransforms(t.transform.baseVal)}},{key:"getAnimations",value:function(e){var t=e||this.element,r=[],n=0;function i(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";""===i&&n++,e.begin=t,e.group={id:n,name:i},r.push(e)}for(var a=0;a<t.children.length;a++){var s=t.children[a];if(s instanceof SVGAnimationElement){var o=s.attributes.getNamedItem("begin");if(o&&/^[a-zA-Z]+$/.test(o.value.trim()))continue;var u=o?X(o.value.split(";").map(function(e){return O(e)})):[0];if(u.length)switch(s.tagName){case"set":for(var l=Array.isArray(f=u),c=0,f=l?f:f[Symbol.iterator]();;){var h;if(l){if(c>=f.length)break;h=f[c++]}else{if((c=f.next()).done)break;h=c.value}var v=h;i(new J(s),v)}break;case"animate":for(var p=Array.isArray(m=u),y=0,m=p?m:m[Symbol.iterator]();;){var d;if(p){if(y>=m.length)break;d=m[y++]}else{if((y=m.next()).done)break;d=y.value}var b=d;i(new ae(s),b)}break;case"animateTransform":for(var k=Array.isArray(A=u),S=0,A=k?A:A[Symbol.iterator]();;){var T;if(k){if(S>=A.length)break;T=A[S++]}else{if((S=A.next()).done)break;T=S.value}var x=T,_=new se(s);H.asShape(this)&&this.path&&(_.transformFrom=this.path.draw(void 0,void 0,!0)),i(_,x)}break;case"animateMotion":for(var w=Array.isArray(V=u),R=0,V=w?V:V[Symbol.iterator]();;){var E;if(w){if(R>=V.length)break;E=V[R++]}else{if((R=V.next()).done)break;E=R.value}var N=E;i(new Me(s),N)}}}}var P=Ce(t,"animation-name");if(P.length){var C={};for(var B in Oe){var L=Ce(t,B);for(0===L.length&&L.push(Oe[B]);L.length<P.length;)L.push.apply(L,g(L.slice(0)));L.length=P.length,C[B]=L}var I=[],z=[];P.forEach(function(e,r){var a=Fe.get(e);if(a){var s=O(C["animation-duration"][r]);s>0&&function(){var o="paused"===C["animation-play-state"][r],u=O(C["animation-delay"][r]),l=C["animation-iteration-count"][r],c=C["animation-fill-mode"][r],f="".concat(e,"_").concat(r);z.push({name:f,paused:o,delay:u,duration:s,iterationCount:l,fillMode:c}),n++;var h={},v={};for(var p in a){var y=parseInt(p)/100;for(var m in a[p]){var d=Oe[m]?v:h;void 0===d[m]&&(d[m]=[]),d[m].push({ordinal:y,value:a[p][m]})}}if(h.transform){var b=function(){if(S){if(A>=k.length)return"break";T=k[A++]}else{if((A=k.next()).done)return"break";T=A.value}var e=T,r=M.parse(t,e.value);if(r){var n=function(e){var r=h["transform-origin"]&&h["transform-origin"].find(function(t){return t.ordinal===e});if(r)return M.origin(t,r.value)}(e.ordinal);r.forEach(function(t){var r,i,a,s=t.matrix;switch(t.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:r="translate",i="".concat(s.e," ").concat(s.f);break;case SVGTransform.SVG_TRANSFORM_SCALE:r="scale",i="".concat(s.a," ").concat(s.d),!n||0===e.ordinal&&0===n.x&&0===n.y||(a={x:n.x*(1-s.a),y:n.y*(1-s.d)});break;case SVGTransform.SVG_TRANSFORM_ROTATE:r="rotate",i="".concat(t.angle," ").concat(n?"".concat(n.x," ").concat(n.y):"0 0");break;case SVGTransform.SVG_TRANSFORM_SKEWX:r="skewX",i=""+t.angle,!n||0===e.ordinal&&0===n.y||(a={x:n.y*s.c*-1,y:0});break;case SVGTransform.SVG_TRANSFORM_SKEWY:r="skewY",i=""+t.angle,!n||0===e.ordinal&&0===n.x||(a={x:0,y:n.x*s.b*-1});break;default:return}void 0===h[r]&&(h[r]=[]);var o=h[r].findIndex(function(t){return t.ordinal===e.ordinal});-1!==o?(h[r][o].value=i,h[r][o].transformOrigin=a):h[r].push({ordinal:e.ordinal,value:i,transformOrigin:a})})}},k=Be(h.transform),S=Array.isArray(k),A=0;for(k=S?k:k[Symbol.iterator]();;){var T;if("break"===b())break}}delete h.transform,delete h["transform-origin"];var x=function(e){var n=h[e],a=void 0;switch(e){case"rotate":case"scale":case"skewX":case"skewY":case"translate":(a=new se).attributeName="transform",a.baseFrom=M.valueAsInitial(e),a.setType(e);break;default:(a=new ae).attributeName=e,a.baseFrom=Ge.optionalAsString(t,"".concat(e,".baseVal.valueAsString"))||Ne.cssAttribute(t,e)}var p=C["animation-timing-function"][r],y=C["animation-direction"][r],m=[],d=[],b=[];Be(n);for(var k=function(e){if(m.push(n[e].ordinal),d.push(n[e].value),e<n.length-1){var t=v["animation-timing-function"]&&v["animation-timing-function"].find(function(t){return t.ordinal===n[e].ordinal});b.push(t?t.value:p)}var r=n[e].transformOrigin;r&&H.asAnimateTransform(a)&&(void 0===a.transformOrigin&&(a.transformOrigin=[]),a.transformOrigin[e]=r)},S=0;S<n.length;S++)k(S);i(a,u,f),a.paused=o,a.duration=s,b.every(function(e){return"linear"===e})?(a.values=d,a.keyTimes=m):function(){for(var r=[],n=[],i=[],s=0;s<b.length;s++){if(ee[b[s]])b[s]=ee[b[s]];else if(b[s].startsWith("step")){0===s&&""===d[s]&&a.baseFrom&&(d[s]=a.baseFrom);var o=ae.toStepFractionList(e,b[s],s,m,d,G(),F(t));if(o){r.push.apply(r,g(o[0])),n.push.apply(n,g(o[1])),o[0].forEach(function(){return i.push(ee.step)});continue}b[s]=ee.linear}else{var u=Pe.exec(b[s]);b[s]=u?"".concat(u[1]," ").concat(u[2]," ").concat(u[3]," ").concat(u[4]):ee.ease}r.push(m[s]),n.push(d[s]),i.push(b[s])}r.push(m.pop()),n.push(d.pop()),a.values=n,a.keyTimes=r,a.keySplines=i}(),a.repeatCount="infinite"!==l?parseFloat(l):-1,a.fillForwards="forwards"===c||"both"===c,a.fillBackwards="backwards"===c||"both"===c,a.reverse=y.endsWith("reverse"),a.alternate=(-1===a.repeatCount||a.repeatCount>1)&&y.startsWith("alternate"),Ge.hasValue(a.baseFrom)&&0!==a.keyTimes[0]&&(a.keyTimes.unshift(0),a.values.unshift(a.baseFrom),a.keySplines&&a.keySplines.unshift(p)),I.push(a)};for(var _ in h)x(_)}()}}),z.reverse();for(var D=0;D<I.length;D++){I[D].setGroupOrder(z)}}for(var j=0;j<r.length;j++){r[j].parent=this}return r}},{key:"name",set:function(e){this._name=e},get:function(){return void 0===this._name&&(this._name=H.setName(this.element)),this._name}},{key:"transform",get:function(){return void 0===this._transform&&(this._transform=this.getTransforms()),this._transform}},{key:"animation",get:function(){return void 0===this._animation&&(this._animation=this.getAnimations()),this._animation}},{key:"visible",set:function(e){C(this.element,e)},get:function(){return P(this.element)}},{key:"opacity",set:function(e){B(this.element,e)},get:function(){return Ne.cssAttribute(this.element,"opacity")||"1"}}]),r}()},Ie=squared.lib.dom;function Xe(e){var t=e.parentElement instanceof HTMLElement;return"svg"===e.tagName&&(Ie.isUserAgent(4)&&!t||Ie.isUserAgent(16)&&t)}var ze=function(e){return function(t){function r(){return i(this,r),f(this,l(r).apply(this,arguments))}return u(r,e),s(r,[{key:"setRect",value:function(){var e=this.x,t=this.y,r=this.width,n=this.height,i=this.parent;i&&(e=i.refitX(e),t=i.refitY(t),r=i.refitSize(r),n=i.refitSize(n)),this.setBaseValue("x",e),this.setBaseValue("y",t),this.setBaseValue("width",r),this.setBaseValue("height",n)}},{key:"_getElement",value:function(){switch(this.element.tagName){case"svg":case"use":case"image":return this.element;default:return null}}},{key:"x",set:function(e){this._x=e},get:function(){if(void 0!==this._x)return this._x;var e=this._getElement();return e?e.x.baseVal.value:0}},{key:"y",set:function(e){this._y=e},get:function(){if(void 0!==this._y)return this._y;var e=this._getElement();return e?e.y.baseVal.value:0}},{key:"width",set:function(e){this._width=e},get:function(){if(void 0!==this._width)return this._width;var e=this._getElement();return e?Xe(e)?e.getBoundingClientRect().width:e.width.baseVal.value:0}},{key:"height",set:function(e){this._height=e},get:function(){if(void 0!==this._height)return this._height;var e=this._getElement();return e?Xe(e)?e.getBoundingClientRect().height:e.height.baseVal.value:0}}]),r}()},De=squared.lib.dom;function je(e,t){if(t){var r=De.cssInheritAttribute(e,"fill");if(""!==r){var n=R.URL.exec(r);if(n)return t.definitions.pattern.get(n[1])}}}var qe=function(e){function t(e){var r;return i(this,t),(r=f(this,l(t).call(this))).element=e,r.aspectRatio={x:0,y:0,unit:1},r}return u(t,squared.lib.base.Container),s(t,[{key:"append",value:function(e,r){return e.parent=this,e.viewport=r||this.getViewport(),v(l(t.prototype),"append",this).call(this,e)}},{key:"build",value:function(e,t,r){void 0===r&&(r=this.element),this.clear();for(var n=this.getViewport(),i=0;i<r.children.length;i++){var a=r.children[i],s=void 0;if(N.svg(a))s=new squared.svg.Svg(a,!1),this.setAspectRatio(s,a);else if(N.g(a))s=new squared.svg.SvgG(a),this.setAspectRatio(s);else if(N.use(a)){var o=L(a);if(o)if(N.symbol(o))s=new squared.svg.SvgUseSymbol(a,o),this.setAspectRatio(s,o);else if(N.image(o))s=new squared.svg.SvgImage(a,o);else if(N.shape(o)){var u=je(a,n);u?(s=new squared.svg.SvgUsePattern(a,o,u),this.setAspectRatio(s)):s=new squared.svg.SvgUse(a,o)}}else if(N.image(a))s=new squared.svg.SvgImage(a);else if(N.shape(a)){var l=je(a,n);l?(s=new squared.svg.SvgShapePattern(a,l),this.setAspectRatio(s)):s=new squared.svg.SvgShape(a)}s&&(this.append(s,n),s.build(e,t))}}},{key:"synchronize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.each(function(t){return t.synchronize(e)})}},{key:"refitX",value:function(e){return e*this.aspectRatio.unit+this.aspectRatio.x}},{key:"refitY",value:function(e){return e*this.aspectRatio.unit+this.aspectRatio.y}},{key:"refitSize",value:function(e){return e*this.aspectRatio.unit}},{key:"refitPoints",value:function(e){for(var t=this.aspectRatio,r=Array.isArray(i=e),n=0,i=r?i:i[Symbol.iterator]();;){var a;if(r){if(n>=i.length)break;a=i[n++]}else{if((n=i.next()).done)break;a=n.value}var s=a;s.x=s.x*t.unit+t.x,s.y=s.y*t.unit+t.y,void 0!==s.rx&&void 0!==s.ry&&(s.rx*=t.unit,s.ry*=t.unit)}return e}},{key:"getPathAll",value:function(){var e=[],t=this.cascade(),r=Array.isArray(t),n=0;for(t=r?t:t[Symbol.iterator]();;){var i;if(r){if(n>=t.length)break;i=t[n++]}else{if((n=t.next()).done)break;i=n.value}var a=i;H.asShape(a)&&a.path&&a.path.value&&e.push(a.path.value)}return e}},{key:"getViewport",value:function(){return this.viewport||(H.asSvg(this)?this:void 0)}},{key:"setAspectRatio",value:function(e,t){var r=function(e){for(;e;){if(H.asSvg(e)||H.asUseSymbol(e))return e;e=e.parent}}(this);if(r){var n=e.aspectRatio;if(t){var i=t.viewBox.baseVal;if(i&&i.width>0&&i.height>0){var a=i.width/i.height,s=r.viewBox,o=s.width/s.height;o>a?n.x=(s.width-s.height*i.width/i.height)/2:o<a&&(n.y=(s.height-s.width*i.height/i.width)/2),n.unit=Math.min(s.width/i.width,s.height/i.height)}}n.x*=r.aspectRatio.unit,n.x+=r.aspectRatio.x,n.y*=r.aspectRatio.unit,n.y+=r.aspectRatio.y,n.unit*=r.aspectRatio.unit}}},{key:"instanceType",get:function(){return 2}}]),t}(),We=squared.lib.color,Ye=squared.lib.dom;function Ue(e){var t=[];return Array.from(e.getElementsByTagName("stop")).forEach(function(e){var r=We.parseRGBA(Ye.cssAttribute(e,"stop-color"),Ye.cssAttribute(e,"stop-opacity"));r&&t.push({color:r.valueRGBA,offset:Ye.cssAttribute(e,"offset"),opacity:r.alpha})}),t}function He(e){for(var t={},r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];for(var a=0;a<n.length;a++){var s=n[a];e[s]&&(t[s]=e[s].baseVal.value,t["".concat(s,"AsString")]=e[s].baseVal.valueAsString)}return t}var Ke=function(e){function t(e){var r,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return i(this,t),(r=f(this,l(t).call(this,e))).element=e,r.documentRoot=n,r.definitions={clipPath:new Map,pattern:new Map,gradient:new Map},r.init(),r}return u(t,Ve(ze(Z(Le(qe))))),s(t,[{key:"build",value:function(e,r){this.setRect(),v(l(t.prototype),"build",this).call(this,e,r)}},{key:"synchronize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;!this.documentRoot&&this.animation.length&&this.mergeAnimations(this.getAnimateViewRect(),this.getAnimateTransform(),e),v(l(t.prototype),"synchronize",this).call(this,e)}},{key:"init",value:function(){var e=this;[this.element].concat(g(Array.from(this.element.querySelectorAll("defs")))).forEach(function(t){t.querySelectorAll(":scope > set, :scope > animate, :scope > animateTransform, :scope > animateMotion").forEach(function(t){var r=L(t,e.documentRoot?e.element:void 0);r&&(t.parentElement&&t.parentElement.removeChild(t),r.appendChild(t))}),t.querySelectorAll("clipPath, pattern, linearGradient, radialGradient").forEach(function(t){if(t.id){var r="#".concat(t.id);N.clipPath(t)?e.definitions.clipPath.set(r,t):N.pattern(t)?e.definitions.pattern.set(r,t):N.linearGradient(t)?e.definitions.gradient.set(r,Object.assign({element:t,type:"linear",colorStop:Ue(t)},He(t,"x1","x2","y1","y2"))):N.radialGradient(t)&&e.definitions.gradient.set(r,Object.assign({element:t,type:"radial",colorStop:Ue(t)},He(t,"cx","cy","r","fx","fy")))}})})}},{key:"viewBox",get:function(){return this.element.viewBox.baseVal?this.element.viewBox.baseVal:Ye.getDOMRect(this.element)}},{key:"instanceType",get:function(){return 18}}]),t}(),Ze=function(){function e(t){i(this,e),this.element=t}return s(e,[{key:"build",value:function(e,t,r){}},{key:"synchronize",value:function(e){}},{key:"instanceType",get:function(){return 4}}]),e}(),$e=squared.lib.color,Qe=squared.lib.dom,Je=squared.lib.util,et={url:R.URL,inset:RegExp("inset\\(".concat(R.LENGTH,"\\s?").concat(R.LENGTH,"?\\s?").concat(R.LENGTH,"?\\s?").concat(R.LENGTH,"?\\)")),polygon:/polygon\(([^)]+)\)/,circle:RegExp("circle\\(".concat(R.LENGTH,"(?: at ").concat(R.LENGTH," ").concat(R.LENGTH,")?\\)")),ellipse:RegExp("ellipse\\(".concat(R.LENGTH," ").concat(R.LENGTH,"(?: at ").concat(R.LENGTH," ").concat(R.LENGTH,")?\\)"))},tt=function(e){return function(r){function n(){return i(this,n),f(this,l(n).apply(this,arguments))}return u(n,e),s(n,[{key:"setPaint",value:function(e){var r=this;this.resetPaint(),this._setAttribute("color",!0),this._setColor("fill"),this._setAttribute("fill-opacity"),this._setAttribute("fill-rule"),this._setColor("stroke"),this._setAttribute("stroke-opacity"),this._setAttribute("stroke-width"),this._setAttribute("stroke-linecap"),this._setAttribute("stroke-linejoin"),this._setAttribute("stroke-miterlimit"),this._setAttribute("stroke-dasharray"),this._setAttribute("stroke-dashoffset"),this._setAttribute("clip-rule");var n=this._getAttribute("clip-path",!1,!1);if(""!==n)for(var i in et){var a=et[i].exec(n);if(a){if("url"===i)return void(this.clipPath=a[1]);if(e&&e.length){var s=function(){var t=function(e,t){return Qe.convertClientUnit(e,0===t?u:l,n,s)},n=G(),s=F(r.element),o=H.toBoxRect(e),u=o.right-o.left,l=o.bottom-o.top,c=r.parent;switch(i){case"inset":var f=0,h=0,v=t(a[1],1),p=0;a[4]?(f=o.left+t(a[4],0),h=o.right-t(a[2],0),p=o.bottom-t(a[3],1)):a[2]?(f=t(a[2],0),h=o.right-f,p=o.bottom-(a[3]?t(a[3],1):v),f+=o.left):(f=o.left+v,h=o.right-v,p=o.bottom-v);var y=[{x:f,y:v+=o.top},{x:h,y:v},{x:h,y:p},{x:f,y:p}];return c&&c.refitPoints(y),r.clipPath=H.drawPolygon(y),{v:void 0};case"polygon":var g=a[1].split(",").map(function(e){var r=m(e.trim().split(" ").map(function(e,r){return t(e,r)}),2),n=r[0],i=r[1];return{x:n+=o.left,y:i+=o.top}});return c&&c.refitPoints(g),r.clipPath=H.drawPolygon(g),{v:void 0};default:if("circle"===i||"ellipse"===i){var d,b;"circle"===i?b=d=t(a[1],u<l?0:1):(d=t(a[1],0),b=t(a[2],1));var k=o.left,S=o.top;if(a.length>=4){var A=u<l?0:1;k+=t(a[a.length-2],A),S+=t(a[a.length-1],A)}c&&(k=c.refitX(k),S=c.refitX(S),d=c.refitSize(d),b=c.refitSize(b)),r.clipPath=H.drawEllipse(k,S,d,b)}return{v:void 0}}}();if("object"===t(s))return s.v}}}}},{key:"resetPaint",value:function(){this.fill="black",this.fillPattern="",this.fillOpacity="1",this.fillRule="nonzero",this.stroke="",this.strokeWidth="1",this.strokePattern="",this.strokeOpacity="1",this.strokeLinecap="butt",this.strokeLinejoin="miter",this.strokeMiterlimit="4",this.strokeDashArray="",this.strokeDashOffset="0",this.color="",this.clipPath="",this.clipRule=""}},{key:"_setColor",value:function(e){var t=this._getAttribute(e),r=R.URL.exec(t);if(r)this["".concat(e,"Pattern")]=r[1];else if(""!==t){var n;switch(t.toLowerCase()){case"none":case"transparent":case"rgba(0, 0, 0, 0)":this[e]="";break;case"currentcolor":n=$e.parseRGBA(this.color||Qe.cssAttribute(this.element,e,!0));break;default:n=$e.parseRGBA(t)}n&&(this[e]=n.valueRGB)}}},{key:"_setAttribute",value:function(e){var t=this._getAttribute(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]);""!==t&&(this[Je.convertCamelCase(e)]=t)}},{key:"_getAttribute",value:function(e){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Qe.cssAttribute(this.element,e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]);if(t&&""===r){if(this.patternParent)switch(e){case"fill-opacity":case"stroke-opacity":break;default:return r}for(var n=this.useParent||this.parent;n&&(r=Qe.cssAttribute(n.element,e),!Je.isString(r));)n=n.parent}return r}}]),n}()},rt=function(e){function t(e){var r;return i(this,t),(r=f(this,l(t).call(this,e))).element=e,r}return u(t,tt(Le(qe))),s(t,[{key:"build",value:function(e,r){v(l(t.prototype),"build",this).call(this,e,r),this.setPaint(this.getPathAll())}},{key:"instanceType",get:function(){return 34}}]),t}(),nt=squared.lib.util,it=function(e){function t(e,r){var n;return i(this,t),(n=f(this,l(t).call(this,e))).element=e,n.imageElement=null,n.__get_transform=!1,n.__get_animation=!1,r&&(n.imageElement=r),n}return u(t,ze(Z(Le(Ze)))),s(t,[{key:"build",value:function(){this.setRect()}},{key:"extract",value:function(e){var t=H.filterTransforms(this.transform,e),r=this.x,n=this.y,i=this.width,a=this.height;if(t.length){t.reverse();for(var s=0;s<t.length;s++){var o=t[s],u=o.matrix,l=r;switch(r=E.applyX(u,l,n),n=E.applyY(u,l,n),o.type){case SVGTransform.SVG_TRANSFORM_SCALE:i*=u.a,a*=u.d;break;case SVGTransform.SVG_TRANSFORM_ROTATE:0!==o.angle&&(u.a<0&&(r+=u.a*i),u.c<0&&(r+=u.c*i),u.b<0&&(n+=u.b*a),u.d<0&&(n+=u.d*a),void 0!==this.rotateAngle?this.rotateAngle+=o.angle:this.rotateAngle=o.angle)}}this.transformed=t}this.parent&&(r=this.parent.refitX(r),n=this.parent.refitY(n),i=this.parent.refitSize(i),a=this.parent.refitSize(a)),this.translationOffset&&(r+=this.translationOffset.x,n+=this.translationOffset.y),this.setBaseValue("x",r),this.setBaseValue("y",n),this.setBaseValue("width",i),this.setBaseValue("height",a)}},{key:"x",set:function(e){y(l(t.prototype),"x",e,this,!0)},get:function(){var e=v(l(t.prototype),"x",this);return 0===e&&this.imageElement?this.imageElement.x.baseVal.value:e}},{key:"y",set:function(e){y(l(t.prototype),"y",e,this,!0)},get:function(){var e=v(l(t.prototype),"y",this);return 0===e&&this.imageElement?this.imageElement.y.baseVal.value:e}},{key:"width",set:function(e){y(l(t.prototype),"width",e,this,!0)},get:function(){var e=v(l(t.prototype),"width",this);return 0===e&&this.imageElement?this.imageElement.width.baseVal.value:e}},{key:"height",set:function(e){y(l(t.prototype),"height",e,this,!0)},get:function(){var e=v(l(t.prototype),"height",this);return 0===e&&this.imageElement?this.imageElement.height.baseVal.value:e}},{key:"href",get:function(){var e=this.imageElement||this.element;return N.image(e)?nt.resolvePath(e.href.baseVal):""}},{key:"transform",get:function(){var e=v(l(t.prototype),"transform",this);return this.__get_transform||(this.imageElement&&e.push.apply(e,g(this.getTransforms(this.imageElement))),this.__get_transform=!0),e}},{key:"animation",get:function(){var e=v(l(t.prototype),"animation",this);return this.__get_animation||(this.imageElement&&e.push.apply(e,g(this.getAnimations(this.imageElement))),this.__get_animation=!0),e}},{key:"instanceType",get:function(){return 4100}}]),t}(),at=function(e){function t(e){var r;return i(this,t),(r=f(this,l(t).call(this,e))).element=e,r.name="",r.value="",r.transformed=null,r.init(),r}return u(t,tt(Z(Ze))),s(t,[{key:"draw",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r||(this.transformed=null);var n=this.parent,i=this.element,a="";if(N.path(i)){if(a=this.getBaseValue("d"),n&&1!==n.aspectRatio.unit||e&&e.length){var s=H.getPathCommands(a);if(s.length){var o=H.getPathPoints(s);if(o.length){if(e&&e.length){if("function"==typeof t){var u=m(t.call(this,i,e),2);this.transformResidual=u[0],e=u[1]}e.length&&(o=this.transformPoints(e,o),this.transformed=e)}n&&n.refitPoints(o),a=H.drawPath(H.setPathPoints(s,o))}}}}else if(N.line(i)){var l=[{x:this.getBaseValue("x1"),y:this.getBaseValue("y1")},{x:this.getBaseValue("x2"),y:this.getBaseValue("y2")}];if(e&&e.length){if("function"==typeof t){var c=m(t.call(this,i,e),2);this.transformResidual=c[0],e=c[1]}e.length&&(l=this.transformPoints(e,l),this.transformed=e)}n&&n.refitPoints(l),a=H.drawPolyline(l)}else if(N.circle(i)||N.ellipse(i)){var f,h;N.ellipse(i)?(f=this.getBaseValue("rx"),h=this.getBaseValue("ry")):h=f=this.getBaseValue("r");var v=[{x:this.getBaseValue("cx"),y:this.getBaseValue("cy"),rx:f,ry:h}];if(e&&e.length){if("function"==typeof t){var p=m(t.call(this,i,e,f,h),2);this.transformResidual=p[0],e=p[1]}e.length&&(v=this.transformPoints(e,v),this.transformed=e)}n&&n.refitPoints(v);var y=v[0];a=H.drawEllipse(y.x,y.y,y.rx,y.ry)}else if(N.rect(i)){var g=this.getBaseValue("x"),d=this.getBaseValue("y"),b=this.getBaseValue("width"),k=this.getBaseValue("height");if(e&&e.length){var S=[{x:g,y:d},{x:g+b,y:d},{x:g+b,y:d+k},{x:g,y:d+k}];if("function"==typeof t){var A=m(t.call(this,i,e),2);this.transformResidual=A[0],e=A[1]}e.length&&(S=this.transformPoints(e,S),this.transformed=e),n&&n.refitPoints(S),a=H.drawPolygon(S)}else n&&(g=n.refitX(g),d=n.refitY(d),b=n.refitSize(b),k=n.refitSize(k)),a=H.drawRect(b,k,g,d)}else if(N.polygon(i)||N.polyline(i)){var T=this.getBaseValue("points");if(e&&e.length){if("function"==typeof t){var x=m(t.call(this,i,e),2);this.transformResidual=x[0],e=x[1]}e.length&&(T=this.transformPoints(e,T),this.transformed=e)}n&&(null===this.transformed&&(T=H.clonePoints(T)),n.refitPoints(T)),a="polygon"===i.tagName?H.drawPolygon(T):H.drawPolyline(T)}return r||(this.value=a,this.setPaint([a])),a}},{key:"transformPoints",value:function(e,t,r){return H.applyTransforms(e,t,M.origin(this.element),r)}},{key:"init",value:function(){var e=this.element;N.path(e)?this.setBaseValue("d"):N.line(e)?(this.setBaseValue("x1"),this.setBaseValue("y1"),this.setBaseValue("x2"),this.setBaseValue("y2")):N.rect(e)?(this.setBaseValue("x"),this.setBaseValue("y"),this.setBaseValue("width"),this.setBaseValue("height")):N.circle(e)?(this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("r")):N.ellipse(e)?(this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("rx"),this.setBaseValue("ry")):(N.polygon(e)||N.polyline(e))&&this.setBaseValue("points",H.clonePoints(e.points))}},{key:"transform",get:function(){return void 0===this._transform&&(this._transform=M.parse(this.element)||H.convertTransforms(this.element.transform.baseVal)),this._transform}},{key:"instanceType",get:function(){return 1028}}],[{key:"build",value:function(e,t,r,n){return e.draw(H.filterTransforms(t,r&&r[e.element.tagName]),n),e}},{key:"getCenter",value:function(e){for(var t=e[0].x,r=e[0].y,n=t,i=r,a=1;a<e.length;a++){var s=e[a];s.x<t?t=s.x:s.x>n&&(n=s.x),s.y<r?r=s.y:s.y>n&&(i=s.y)}return{x:(t+n)/2,y:(r+i)/2}}}]),t}(),st=function(e){function t(e,r){var n;return i(this,t),(n=f(this,l(t).call(this,e))).element=e,n.patternElement=r,n}return u(t,Le(qe)),s(t,[{key:"build",value:function(e,r){v(l(t.prototype),"build",this).call(this,e,r,this.patternElement)}},{key:"animation",get:function(){return[]}},{key:"instanceType",get:function(){return 130}}]),t}(),ot=function(e){function t(e){var r,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return i(this,t),r=f(this,l(t).call(this,e)),n&&r.setPath(),r}return u(t,Ve(Le(Ze))),s(t,[{key:"setPath",value:function(){this.path=new at(this.element)}},{key:"build",value:function(e,t){this.path&&(this.path.parent=this.parent,at.build(this.path,this.transform,e,t))}},{key:"synchronize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;this.path&&this.animation.length&&this.mergeAnimations(this.getAnimateShape(t||this.element),t?[]:this.getAnimateTransform(),e,this.path)}},{key:"path",set:function(e){this._path=e,e&&(e.name=this.name)},get:function(){return this._path}},{key:"instanceType",get:function(){return 2052}}]),t}(),ut=squared.lib.util,lt=function(e){function t(e,r){var n;return i(this,t),(n=f(this,l(t).call(this,e))).element=e,n.patternElement=r,n._clipRegion=[],n}return u(t,tt(Z(Le(qe)))),s(t,[{key:"build",value:function(e,t,r){var n=this;void 0===r&&(r=this.element);var i=at.build(new at(r),this.transform,e);i.value&&function(){n.clipRegion=i.value,i.clipPath&&(n.clipRegion=i.clipPath);var a=[i.value];n.setPaint(a);for(var s=H.toBoxRect(a),o=n.patternElement.width.baseVal.valueAsString,u=n.patternElement.height.baseVal.valueAsString,l=ut.isPercent(o)?parseInt(o)/100:parseFloat(o),c=ut.isPercent(u)?parseInt(u)/100:parseFloat(u),f=(s.right-s.left)*l,h=(s.bottom-s.top)*c,v=1,p=0,y=function(){var i=s.top+p*h,a=1,o=0,u=function(){var u=s.left+o*f,c=new st(r,n.patternElement);c.build(e,t),c.cascade().forEach(function(r){H.asShape(r)&&r.path&&(r.path.patternParent=n,r.path.refitBaseValue(u,i),at.build(r.path,r.transform,e,t),r.path.fillOpacity=""+parseFloat(r.path.fillOpacity)*parseFloat(n.fillOpacity),r.path.clipPath=H.drawRect(f,h,u,i)+(""!==r.path.clipPath?";".concat(r.path.clipPath):""))}),n.append(c),a-=l,o++};do{u()}while(a>0);p++,v-=c};v>0;)y();if(""!==n.stroke&&parseFloat(n.strokeWidth)>0){i.fill="",i.fillOpacity="0",i.stroke=n.stroke,i.strokeWidth=n.strokeWidth;var m=new ot(r,!1);m.path=i,n.append(m)}n.drawRegion=s}()}},{key:"clipRegion",set:function(e){""!==e?this._clipRegion.push(e):this._clipRegion.length=0},get:function(){return this._clipRegion.length?this._clipRegion.join(";"):""}},{key:"instanceType",get:function(){return 258}}]),t}(),ct=function(e){function t(e,r){var n;return i(this,t),(n=f(this,l(t).call(this,e,!1))).element=e,n.shapeElement=r,n.__get_transform=!1,n.__get_animation=!1,n.setPath(),n}return u(t,tt(ze(Z(ot)))),s(t,[{key:"setPath",value:function(){this.path=new at(this.shapeElement),this.path.useParent=this}},{key:"build",value:function(e,r){v(l(t.prototype),"build",this).call(this,e,r),this.setPaint(this.path?[this.path.value]:void 0)}},{key:"synchronize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.animation.length&&this.mergeAnimations(this.getAnimateViewRect(),this.getAnimateTransform(),e),v(l(t.prototype),"synchronize",this).call(this,e,this.shapeElement)}},{key:"transform",get:function(){var e=v(l(t.prototype),"transform",this);return this.__get_transform||(e.push.apply(e,g(this.getTransforms(this.shapeElement))),this.__get_transform=!0),e}},{key:"animation",get:function(){var e=v(l(t.prototype),"animation",this);return this.__get_animation||(e.push.apply(e,g(this.getAnimations(this.shapeElement))),this.__get_animation=!0),e}},{key:"instanceType",get:function(){return 10244}}]),t}(),ft=function(e){function t(e,r,n){var a;return i(this,t),(a=f(this,l(t).call(this,e,n))).element=e,a.shapeElement=r,a}return u(t,Ve(ze(lt))),s(t,[{key:"build",value:function(e,r){v(l(t.prototype),"build",this).call(this,e,r,this.shapeElement)}},{key:"synchronize",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=[this.animation.filter(function(t){return void 0===e.validateBaseValue(t.attributeName,0)||"x"===t.attributeName||"y"===t.attributeName}),this.getAnimateTransform()],i=n[0],a=n[1];(i.length||a.length)&&this.mergeAnimations(this.getAnimateViewRect(i),a,r),v(l(t.prototype),"synchronize",this).call(this,r)}},{key:"instanceType",get:function(){return 514}}]),t}(),ht=squared.lib.dom,vt=function(e){function t(e,r){var n;return i(this,t),(n=f(this,l(t).call(this,e))).element=e,n.symbolElement=r,n}return u(t,tt(Ve(ze(Z(Le(qe)))))),s(t,[{key:"build",value:function(e,r){this.setRect(),v(l(t.prototype),"build",this).call(this,e,r,this.symbolElement);var n=this.getBaseValue("x",0),i=this.getBaseValue("y",0);if(0!==n||0!==i){var a={x:n,y:i};this.cascade().forEach(function(e){return e.translationOffset=a})}this.setPaint(this.getPathAll())}},{key:"synchronize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.animation.length&&this.mergeAnimations(this.getAnimateViewRect(),this.getAnimateTransform(),e),v(l(t.prototype),"synchronize",this).call(this,e)}},{key:"viewBox",get:function(){return this.symbolElement.viewBox.baseVal?this.symbolElement.viewBox.baseVal:ht.getDOMRect(this.element)}},{key:"instanceType",get:function(){return 66}}]),t}(),pt={constant:te,util:W};e.Svg=Ke,e.SvgAnimate=ae,e.SvgAnimateMotion=Me,e.SvgAnimateTransform=se,e.SvgAnimation=J,e.SvgBaseVal=Z,e.SvgBuild=H,e.SvgContainer=qe,e.SvgElement=Ze,e.SvgG=rt,e.SvgImage=it,e.SvgPaint=tt,e.SvgPath=at,e.SvgPattern=st,e.SvgShape=ot,e.SvgShapePattern=lt,e.SvgSynchronize=Ve,e.SvgUse=ct,e.SvgUsePattern=ft,e.SvgUseSymbol=vt,e.SvgView=Le,e.SvgViewRect=ze,e.lib=pt,Object.defineProperty(e,"__esModule",{value:!0})});
